const Gr=document.querySelector("#account-form-modal"),tr=Gr.querySelector("form"),Kc=Gr.querySelector("#save-account"),Br=document.querySelector('[data-behavior="extraFields"]');function md(t,{key:e="",value:r=""}){const n=document.createElement("p");return n.classList.add("input"),n.id="extraField"+t,n.innerHTML=`
      <span>
        <label for="extraKey${t}">Name</label>
        <input id="extraKey${t}" name="extraKey${t}" auto-complete="off" value="${e}">
      </span>
      <span>
        <label for="extraValue${t}">Value</label>
        <input id="extraValue${t}" name="extraValue${t}" auto-complete="off" value="${r}">
      </span>
      <button type="button" title="delete extra field" class="link" data-behavior="deleteExtraField">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="position: relative; top: -3px;">
          <path d="M2 4H3.33333H14" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M5.3335 4.00004V2.66671C5.3335 2.31309 5.47397 1.97395 5.72402 1.7239C5.97407 1.47385 6.31321 1.33337 6.66683 1.33337H9.3335C9.68712 1.33337 10.0263 1.47385 10.2763 1.7239C10.5264 1.97395 10.6668 2.31309 10.6668 2.66671V4.00004M12.6668 4.00004V13.3334C12.6668 13.687 12.5264 14.0261 12.2763 14.2762C12.0263 14.5262 11.6871 14.6667 11.3335 14.6667H4.66683C4.31321 14.6667 3.97407 14.5262 3.72402 14.2762C3.47397 14.0261 3.3335 13.687 3.3335 13.3334V4.00004H12.6668Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M6.6665 7.33337V11.3334" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9.3335 7.33337V11.3334" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    `,n}function Ls({key:t,value:e}){let r=Array.from(Br.querySelectorAll("p.input"));const n=r.length?parseInt(r[r.length-1].id.replace("extraField",""))+1:0;Br.appendChild(md(n,{key:t,value:e})),r=Array.from(Br.querySelectorAll("p.input")),r[r.length-1].querySelector("input").focus()}document.querySelector('[data-behavior="addExtraField"]').addEventListener("click",Ls);document.body.addEventListener("click",function(e){const r=e.target.closest('[data-behavior="deleteExtraField"]');if(!r)return;const n=Array.from(r.closest("p.input").querySelectorAll("input")).map(a=>a.value).join("");function i(){r.closest("p.input").remove()}n?confirm("Really delete this field?")&&i():i()});async function _d(t){t.preventDefault();const e=Object.fromEntries(new FormData(t.target).entries());Object.keys(e).filter(i=>i.match(/^extraKey/)).forEach(i=>{const a=i.replace("Key","Value"),o=e[i],c=e[a];e[o]=c,delete e[i],delete e[a]});for(key in e)e[key]||delete e[key];const r=await window.accounts.get(),n=r.findIndex(({account_name:i})=>tr.dataset.originalName===i);n>=0?(r[n]=e,window.accounts.set(r)):window.accounts.set([...r,e]),window.location.hash="",tr.reset()}function wd(){const t=tr.querySelectorAll("input[required]");Array.from(t).reduce((r,n)=>r&&!!n.value,!0)?Kc.disabled=!1:Kc.disabled=!0}tr.addEventListener("submit",_d);tr.addEventListener("keyup",wd);async function Sd(){const t=window.location.hash.match(/#edit=(.*)/),e=t&&t[1];return e&&(await window.accounts.get("undecorated")).find(r=>r.account_name===e)}function Ad(t){const e=Br.dataset.initialized;for(key in t)tr.elements[key]?tr.elements[key].value=t[key]:e||Ls({key,value:t[key]});Br.dataset.initialized=!0}function Ed(){Br.innerHTML="",delete Br.dataset.initialized}window.renderers.push(async function(){if(!/#(new|edit)/.test(window.location.hash)){Gr.style.display="none",Ed();return}tr.reset();const e=await Sd();e?(Gr.querySelector("h2").classList.add("edit"),Ad(e),tr.dataset.originalName=e.account_name):Gr.querySelector("h2").classList.add("new"),Gr.style.removeProperty("display")});const bo={};function xd(t){var e=document.createElement("textarea");e.innerHTML=t,document.body.appendChild(e),e.select();var r=document.execCommand("copy");return document.body.removeChild(e),r}const Rs={Edit:t=>{window.location.hash=`#edit=${t}`},"Copy bash variables":async t=>{const e=(await window.accounts.get()).find(r=>r.account_name===t);xd(`export NEAR_ENV=mainnet
export ACCOUNT_ID=${t}
export TOTAL_BALANCE=${e.current_balance}
${e.lockup_contract?`export LOCKUP_ID=${e.lockup_contract}`:""}
${e.delegated_to?`export POOL_ID=${e.delegated_to}`:""}
${e.hd_path?`export HD_PATH="${e.hd_path}"`:""}`)},Delete:async t=>{confirm("Are you sure? This can't be undone.")&&window.accounts.set((await window.accounts.get()).filter(e=>e.account_name!==t))}},Ks=(t,e="link")=>`
    <button
      class="${e}"
      data-behavior="actOnAccount"
    >${t}</button>
  `,$s=Object.keys(Rs),Id=Ks($s.shift(),"button--cta button-size--small"),Pr=document.createElement("div");Pr.classList.add("account__actions-dropdown");Pr.innerHTML=$s.map(t=>Ks(t)).join("");document.querySelector("body").addEventListener("click",async function(e){const r=e.target.closest("[data-behavior=actOnAccount]");if(!r)return;const n=r.closest(".account__actions-dropdown"),i=r.closest(".account"),a=(n||i).dataset.accountName,o=r.innerHTML,c=Rs[o];n&&po(n),await c(a)});function $c(t){const e=t.closest(".account"),{accountName:r}=e.dataset,n=e.className.replace("account ",""),{right:i}=e.getBoundingClientRect(),{bottom:a}=t.getBoundingClientRect();Pr.dataset.accountName=r,Pr.classList.add(n),Pr.style.top=a+window.scrollY+9+"px",Pr.style.right=document.body.offsetWidth-i+"px",document.body.appendChild(Pr)}function po(t){const e=t.dataset.accountName,n=document.querySelector(`.account[data-account-name="${e}"]`).className.replace("account ","");return t.classList.remove(n),t.remove(),e}document.querySelector("body").addEventListener("click",async function(e){const r=e.target.closest("[data-behavior=toggleActionsDropdown]"),n=document.querySelector(".account__actions-dropdown");if(r)if(n){const i=po(n),{accountName:a}=r.closest(".account").dataset;i!==a&&$c(r)}else $c(r);else n&&(n.contains(e.target)||po(n))});document.querySelector("body").addEventListener("click",function(e){const r=e.target.closest("[data-behavior=openAccountDetails]");if(!r)return;const n=r.closest(".account").dataset.accountName,i=r.closest("footer");bo[n]=!bo[n],i.classList.toggle("open"),Md()});function Md(){Array.from(document.querySelectorAll(".account")).map(t=>{const e=t.querySelector("footer"),r=e.querySelector("button").getBoundingClientRect().height,n=e.querySelector(".account__details").getBoundingClientRect().height;e.style.height=e.classList.contains("open")?`${r+n}px`:`${r}px`})}const Na=t=>`
    <a
      class="ellipsis"
      href="undefined/accounts/${t}"
      target="_blank"
      title="${t}"
    >
      ${t}
    </a>
  `;function Pd(t,e){return t?t==="active"?`${window.utils.formatLargeNum(e,{convertYocto:!1})} $NEAR earned so far`:t==="next"?'validator <a target="_blank" href="https://explorer.near.org/nodes/validators">inactive</a>; active next epoch':t==="proposed"?'validator inactive; <a target="_blank" href="https://explorer.near.org/nodes/proposals">back soon?</a>':'validator inactive; <a target="_blank" href="https://docs.near.org/docs/validator/delegation">pick a new one</a>':'earn $NEAR, secure the network; <a target="_blank" href="https://docs.near.org/docs/validator/delegation">delegate</a>'}window.renderers.push(async function({accounts:e}){if(!e)return;const r=document.querySelector("#accounts");if(!r)return;const n=await Promise.all(e.map(({wallet_location:i,public_key:a,account_name:o,starting_balance:c,lockup_balance:b,staked_balance:g,lockup_contract:p,delegated_to:v,validator_status:A,hd_path:E,lockup_info:B,...T})=>`
        <div
           class="account ${v?`validator-${A}`:"undelegated"}"
           data-account-name=${o}
        >
          <header class="account__header">
            <div>
              <h2 class="account__location">${i}</h2>
              <div class="account__validator-status">
                <span class="icon"></span>
                <span>${Pd(A,window.utils.formatLargeNum(g&&b?g-b:b))}</span>
              </div>
            </div>
            <div class="account__actions">
              <div class="button-group">
                ${Id}
                <button
                  title="more actions"
                  class="button--cta button-size--small button--more"
                  data-behavior="toggleActionsDropdown"
                >â–¾</button>
              </div>
            </div>
          </header>
          <div class="account__body">
            ${a?`
              <div class="account__datum">
                <label>Public Key</label>
                <div class="ellipsis" title="${a}">
                  ${a}
                </div>
              </div>
            `:""}
            <div class="account__datum">
              <label>Account Name</label>
              ${Na(o)}
            </div>
          </div>
          <footer class="account__footer ${bo[o]?"open":""}">
            <div class="account__details">
              ${E?`<div class="account__datum">
                <label>HD Path</label>
                ${E}
              </div>`:""}
              ${p?`<div class="account__datum">
                <label>Lockup Contract</label>
                ${p==="DELETED"?"DELETED":Na(p)}
              </div>`:""}
              ${v?`<div class="account__datum">
                <label>Delegated to</label>
                ${Na(v)}
              </div>`:""}
              <div class="account__datum">
                <label><abbr title="\`get_balance\` from Lockup Contract">Lockup Balance</abbr></label>
                ${window.utils.formatLargeNum(b)}
              </div>
              ${v?`<div class="account__datum">
                <label><abbr title="\`get_account_total_balance\` from the staking pool (${v})">Staking Pool Balance</abbr></label>
                ${window.utils.formatLargeNum(g)}
              </div>`:""}
              ${v?`<div class="account__datum">
                <label><abbr title="Staking Pool Balance minus Lockup Balance">Unclaimed Earnings</abbr></label>
                ${window.utils.formatLargeNum(g-b)}
              </div>`:""}
              ${Object.entries(B).map(([L,R])=>`<div class="account__datum">
                <label>${L}</label>
                <pre>${JSON.stringify(R)}</pre>
              </div>`).join("")}
              ${Object.entries(T).map(([L,R])=>`<div class="account__datum">
                <label>${L}</label>
                <div class="ellipsis" title="${R}">${R}</div>
              </div>`).join("")}
            </div>
            <button class="full-width button-size--small" data-behavior="openAccountDetails">
              <span>details</span>
            </button>
          </footer>
        </div>
      `));r.innerHTML=n.join("")});const Dc=document.querySelector("#aggregates");let jc=null;Dc&&window.renderers.push(async function({accounts:e}){if(!e.length||jc===e)return;jc=e;const r={"Total Unlocked":0,"Total Locked":0,"Total Unclaimed Earnings":0,"Grand Total":0};e.forEach(n=>{r["Total Unlocked"]+=n.lockup_info["Owner's Balance"],r["Total Locked"]+=n.lockup_info["Locked Amount"],r["Total Unclaimed Earnings"]+=window.utils.toNear(n.staked_balance-n.lockup_balance),r["Grand Total"]+=n.lockup_info["Owner's Balance"]+n.lockup_info["Locked Amount"]+window.utils.toNear(n.staked_balance-n.lockup_balance)}),Dc.innerHTML=`<p style="text-align: center">${Object.entries(r).map(([n,i])=>`${n}: ${window.utils.formatLargeNum(i,{convertYocto:!1})}<br>`).join("")}</p>`});const yo=document.querySelector("textarea"),vo=document.querySelector("#export-import-wrap"),go=vo.querySelector("button");go.addEventListener("click",()=>{vo.classList.toggle("active"),vo.classList.contains("active")&&setTimeout(()=>window.scrollTo(0,document.body.scrollHeight),200)});yo.addEventListener("change",async()=>{try{const t=JSON.parse(yo.value);JSON.stringify(t)!==await window.accounts.get("raw")&&await window.accounts.set(t)}catch{alert("Invalid JSON! Data not saved.")}});let Uc=null;window.renderers.push(async function({accountsRaw:e}){e.length?go.innerText="Back up your data!":go.innerText="Import data from a backup";const r=JSON.stringify(e,null,2);Uc!==r&&(yo.value=r,Uc=r)});window.renderers.push(async function({accounts:e}){e.length?document.querySelector("#intro").style.display="none":document.querySelector("#intro").style.display="block"});function Vr(t){return Number(t)/1e24}const Bd=(t,{convertYocto:e=!0}={})=>e?new Intl.NumberFormat(void 0).format(Vr(t)):new Intl.NumberFormat(void 0).format(t),Od=Object.freeze(Object.defineProperty({__proto__:null,formatLargeNum:Bd,toNear:Vr},Symbol.toStringTag,{value:"Module"}));var X=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function Ds(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Ro={},pi={};pi.byteLength=kd;pi.toByteArray=Ld;pi.fromByteArray=$d;var Ut=[],_t=[],Td=typeof Uint8Array<"u"?Uint8Array:Array,La="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Dr=0,Cd=La.length;Dr<Cd;++Dr)Ut[Dr]=La[Dr],_t[La.charCodeAt(Dr)]=Dr;_t[45]=62;_t[95]=63;function js(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function kd(t){var e=js(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Nd(t,e,r){return(e+r)*3/4-r}function Ld(t){var e,r=js(t),n=r[0],i=r[1],a=new Td(Nd(t,n,i)),o=0,c=i>0?n-4:n,b;for(b=0;b<c;b+=4)e=_t[t.charCodeAt(b)]<<18|_t[t.charCodeAt(b+1)]<<12|_t[t.charCodeAt(b+2)]<<6|_t[t.charCodeAt(b+3)],a[o++]=e>>16&255,a[o++]=e>>8&255,a[o++]=e&255;return i===2&&(e=_t[t.charCodeAt(b)]<<2|_t[t.charCodeAt(b+1)]>>4,a[o++]=e&255),i===1&&(e=_t[t.charCodeAt(b)]<<10|_t[t.charCodeAt(b+1)]<<4|_t[t.charCodeAt(b+2)]>>2,a[o++]=e>>8&255,a[o++]=e&255),a}function Rd(t){return Ut[t>>18&63]+Ut[t>>12&63]+Ut[t>>6&63]+Ut[t&63]}function Kd(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(Rd(n));return i.join("")}function $d(t){for(var e,r=t.length,n=r%3,i=[],a=16383,o=0,c=r-n;o<c;o+=a)i.push(Kd(t,o,o+a>c?c:o+a));return n===1?(e=t[r-1],i.push(Ut[e>>2]+Ut[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Ut[e>>10]+Ut[e>>4&63]+Ut[e<<2&63]+"=")),i.join("")}var Ko={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ko.read=function(t,e,r,n,i){var a,o,c=i*8-n-1,b=(1<<c)-1,g=b>>1,p=-7,v=r?i-1:0,A=r?-1:1,E=t[e+v];for(v+=A,a=E&(1<<-p)-1,E>>=-p,p+=c;p>0;a=a*256+t[e+v],v+=A,p-=8);for(o=a&(1<<-p)-1,a>>=-p,p+=n;p>0;o=o*256+t[e+v],v+=A,p-=8);if(a===0)a=1-g;else{if(a===b)return o?NaN:(E?-1:1)*(1/0);o=o+Math.pow(2,n),a=a-g}return(E?-1:1)*o*Math.pow(2,a-n)};Ko.write=function(t,e,r,n,i,a){var o,c,b,g=a*8-i-1,p=(1<<g)-1,v=p>>1,A=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=n?0:a-1,B=n?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,o=p):(o=Math.floor(Math.log(e)/Math.LN2),e*(b=Math.pow(2,-o))<1&&(o--,b*=2),o+v>=1?e+=A/b:e+=A*Math.pow(2,1-v),e*b>=2&&(o++,b/=2),o+v>=p?(c=0,o=p):o+v>=1?(c=(e*b-1)*Math.pow(2,i),o=o+v):(c=e*Math.pow(2,v-1)*Math.pow(2,i),o=0));i>=8;t[r+E]=c&255,E+=B,c/=256,i-=8);for(o=o<<i|c,g+=i;g>0;t[r+E]=o&255,E+=B,o/=256,g-=8);t[r+E-B]|=T*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=pi,r=Ko,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=z,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=a(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const S=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(S,f),S.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(S){if(S>i)throw new RangeError('The value "'+S+'" is invalid for option "size"');const f=new Uint8Array(S);return Object.setPrototypeOf(f,c.prototype),f}function c(S,f,l){if(typeof S=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(S)}return b(S,f,l)}c.poolSize=8192;function b(S,f,l){if(typeof S=="string")return A(S,f);if(ArrayBuffer.isView(S))return B(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(oe(S,ArrayBuffer)||S&&oe(S.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(oe(S,SharedArrayBuffer)||S&&oe(S.buffer,SharedArrayBuffer)))return T(S,f,l);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const x=S.valueOf&&S.valueOf();if(x!=null&&x!==S)return c.from(x,f,l);const O=L(S);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return c.from(S[Symbol.toPrimitive]("string"),f,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}c.from=function(S,f,l){return b(S,f,l)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function g(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function p(S,f,l){return g(S),S<=0?o(S):f!==void 0?typeof l=="string"?o(S).fill(f,l):o(S).fill(f):o(S)}c.alloc=function(S,f,l){return p(S,f,l)};function v(S){return g(S),o(S<0?0:R(S)|0)}c.allocUnsafe=function(S){return v(S)},c.allocUnsafeSlow=function(S){return v(S)};function A(S,f){if((typeof f!="string"||f==="")&&(f="utf8"),!c.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const l=F(S,f)|0;let x=o(l);const O=x.write(S,f);return O!==l&&(x=x.slice(0,O)),x}function E(S){const f=S.length<0?0:R(S.length)|0,l=o(f);for(let x=0;x<f;x+=1)l[x]=S[x]&255;return l}function B(S){if(oe(S,Uint8Array)){const f=new Uint8Array(S);return T(f.buffer,f.byteOffset,f.byteLength)}return E(S)}function T(S,f,l){if(f<0||S.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<f+(l||0))throw new RangeError('"length" is outside of buffer bounds');let x;return f===void 0&&l===void 0?x=new Uint8Array(S):l===void 0?x=new Uint8Array(S,f):x=new Uint8Array(S,f,l),Object.setPrototypeOf(x,c.prototype),x}function L(S){if(c.isBuffer(S)){const f=R(S.length)|0,l=o(f);return l.length===0||S.copy(l,0,0,f),l}if(S.length!==void 0)return typeof S.length!="number"||Pe(S.length)?o(0):E(S);if(S.type==="Buffer"&&Array.isArray(S.data))return E(S.data)}function R(S){if(S>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return S|0}function z(S){return+S!=S&&(S=0),c.alloc(+S)}c.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==c.prototype},c.compare=function(f,l){if(oe(f,Uint8Array)&&(f=c.from(f,f.offset,f.byteLength)),oe(l,Uint8Array)&&(l=c.from(l,l.offset,l.byteLength)),!c.isBuffer(f)||!c.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===l)return 0;let x=f.length,O=l.length;for(let N=0,K=Math.min(x,O);N<K;++N)if(f[N]!==l[N]){x=f[N],O=l[N];break}return x<O?-1:O<x?1:0},c.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(f,l){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return c.alloc(0);let x;if(l===void 0)for(l=0,x=0;x<f.length;++x)l+=f[x].length;const O=c.allocUnsafe(l);let N=0;for(x=0;x<f.length;++x){let K=f[x];if(oe(K,Uint8Array))N+K.length>O.length?(c.isBuffer(K)||(K=c.from(K)),K.copy(O,N)):Uint8Array.prototype.set.call(O,K,N);else if(c.isBuffer(K))K.copy(O,N);else throw new TypeError('"list" argument must be an Array of Buffers');N+=K.length}return O};function F(S,f){if(c.isBuffer(S))return S.length;if(ArrayBuffer.isView(S)||oe(S,ArrayBuffer))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);const l=S.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&l===0)return 0;let O=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return te(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return ue(S).length;default:if(O)return x?-1:te(S).length;f=(""+f).toLowerCase(),O=!0}}c.byteLength=F;function Z(S,f,l){let x=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,f>>>=0,l<=f))return"";for(S||(S="utf8");;)switch(S){case"hex":return m(this,f,l);case"utf8":case"utf-8":return h(this,f,l);case"ascii":return P(this,f,l);case"latin1":case"binary":return I(this,f,l);case"base64":return d(this,f,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,f,l);default:if(x)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),x=!0}}c.prototype._isBuffer=!0;function C(S,f,l){const x=S[f];S[f]=S[l],S[l]=x}c.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<f;l+=2)C(this,l,l+1);return this},c.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<f;l+=4)C(this,l,l+3),C(this,l+1,l+2);return this},c.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<f;l+=8)C(this,l,l+7),C(this,l+1,l+6),C(this,l+2,l+5),C(this,l+3,l+4);return this},c.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?h(this,0,f):Z.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(f){if(!c.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:c.compare(this,f)===0},c.prototype.inspect=function(){let f="";const l=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(f+=" ... "),"<Buffer "+f+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(f,l,x,O,N){if(oe(f,Uint8Array)&&(f=c.from(f,f.offset,f.byteLength)),!c.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(l===void 0&&(l=0),x===void 0&&(x=f?f.length:0),O===void 0&&(O=0),N===void 0&&(N=this.length),l<0||x>f.length||O<0||N>this.length)throw new RangeError("out of range index");if(O>=N&&l>=x)return 0;if(O>=N)return-1;if(l>=x)return 1;if(l>>>=0,x>>>=0,O>>>=0,N>>>=0,this===f)return 0;let K=N-O,fe=x-l;const Ne=Math.min(K,fe),ve=this.slice(O,N),me=f.slice(l,x);for(let Me=0;Me<Ne;++Me)if(ve[Me]!==me[Me]){K=ve[Me],fe=me[Me];break}return K<fe?-1:fe<K?1:0};function q(S,f,l,x,O){if(S.length===0)return-1;if(typeof l=="string"?(x=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Pe(l)&&(l=O?0:S.length-1),l<0&&(l=S.length+l),l>=S.length){if(O)return-1;l=S.length-1}else if(l<0)if(O)l=0;else return-1;if(typeof f=="string"&&(f=c.from(f,x)),c.isBuffer(f))return f.length===0?-1:W(S,f,l,x,O);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(S,f,l):Uint8Array.prototype.lastIndexOf.call(S,f,l):W(S,[f],l,x,O);throw new TypeError("val must be string, number or Buffer")}function W(S,f,l,x,O){let N=1,K=S.length,fe=f.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(S.length<2||f.length<2)return-1;N=2,K/=2,fe/=2,l/=2}function Ne(me,Me){return N===1?me[Me]:me.readUInt16BE(Me*N)}let ve;if(O){let me=-1;for(ve=l;ve<K;ve++)if(Ne(S,ve)===Ne(f,me===-1?0:ve-me)){if(me===-1&&(me=ve),ve-me+1===fe)return me*N}else me!==-1&&(ve-=ve-me),me=-1}else for(l+fe>K&&(l=K-fe),ve=l;ve>=0;ve--){let me=!0;for(let Me=0;Me<fe;Me++)if(Ne(S,ve+Me)!==Ne(f,Me)){me=!1;break}if(me)return ve}return-1}c.prototype.includes=function(f,l,x){return this.indexOf(f,l,x)!==-1},c.prototype.indexOf=function(f,l,x){return q(this,f,l,x,!0)},c.prototype.lastIndexOf=function(f,l,x){return q(this,f,l,x,!1)};function k(S,f,l,x){l=Number(l)||0;const O=S.length-l;x?(x=Number(x),x>O&&(x=O)):x=O;const N=f.length;x>N/2&&(x=N/2);let K;for(K=0;K<x;++K){const fe=parseInt(f.substr(K*2,2),16);if(Pe(fe))return K;S[l+K]=fe}return K}function $(S,f,l,x){return ie(te(f,S.length-l),S,l,x)}function ee(S,f,l,x){return ie(se(f),S,l,x)}function M(S,f,l,x){return ie(ue(f),S,l,x)}function s(S,f,l,x){return ie(de(f,S.length-l),S,l,x)}c.prototype.write=function(f,l,x,O){if(l===void 0)O="utf8",x=this.length,l=0;else if(x===void 0&&typeof l=="string")O=l,x=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(x)?(x=x>>>0,O===void 0&&(O="utf8")):(O=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const N=this.length-l;if((x===void 0||x>N)&&(x=N),f.length>0&&(x<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let K=!1;for(;;)switch(O){case"hex":return k(this,f,l,x);case"utf8":case"utf-8":return $(this,f,l,x);case"ascii":case"latin1":case"binary":return ee(this,f,l,x);case"base64":return M(this,f,l,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s(this,f,l,x);default:if(K)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),K=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function d(S,f,l){return f===0&&l===S.length?e.fromByteArray(S):e.fromByteArray(S.slice(f,l))}function h(S,f,l){l=Math.min(S.length,l);const x=[];let O=f;for(;O<l;){const N=S[O];let K=null,fe=N>239?4:N>223?3:N>191?2:1;if(O+fe<=l){let Ne,ve,me,Me;switch(fe){case 1:N<128&&(K=N);break;case 2:Ne=S[O+1],(Ne&192)===128&&(Me=(N&31)<<6|Ne&63,Me>127&&(K=Me));break;case 3:Ne=S[O+1],ve=S[O+2],(Ne&192)===128&&(ve&192)===128&&(Me=(N&15)<<12|(Ne&63)<<6|ve&63,Me>2047&&(Me<55296||Me>57343)&&(K=Me));break;case 4:Ne=S[O+1],ve=S[O+2],me=S[O+3],(Ne&192)===128&&(ve&192)===128&&(me&192)===128&&(Me=(N&15)<<18|(Ne&63)<<12|(ve&63)<<6|me&63,Me>65535&&Me<1114112&&(K=Me))}}K===null?(K=65533,fe=1):K>65535&&(K-=65536,x.push(K>>>10&1023|55296),K=56320|K&1023),x.push(K),O+=fe}return _(x)}const y=4096;function _(S){const f=S.length;if(f<=y)return String.fromCharCode.apply(String,S);let l="",x=0;for(;x<f;)l+=String.fromCharCode.apply(String,S.slice(x,x+=y));return l}function P(S,f,l){let x="";l=Math.min(S.length,l);for(let O=f;O<l;++O)x+=String.fromCharCode(S[O]&127);return x}function I(S,f,l){let x="";l=Math.min(S.length,l);for(let O=f;O<l;++O)x+=String.fromCharCode(S[O]);return x}function m(S,f,l){const x=S.length;(!f||f<0)&&(f=0),(!l||l<0||l>x)&&(l=x);let O="";for(let N=f;N<l;++N)O+=_e[S[N]];return O}function u(S,f,l){const x=S.slice(f,l);let O="";for(let N=0;N<x.length-1;N+=2)O+=String.fromCharCode(x[N]+x[N+1]*256);return O}c.prototype.slice=function(f,l){const x=this.length;f=~~f,l=l===void 0?x:~~l,f<0?(f+=x,f<0&&(f=0)):f>x&&(f=x),l<0?(l+=x,l<0&&(l=0)):l>x&&(l=x),l<f&&(l=f);const O=this.subarray(f,l);return Object.setPrototypeOf(O,c.prototype),O};function w(S,f,l){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+f>l)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(f,l,x){f=f>>>0,l=l>>>0,x||w(f,l,this.length);let O=this[f],N=1,K=0;for(;++K<l&&(N*=256);)O+=this[f+K]*N;return O},c.prototype.readUintBE=c.prototype.readUIntBE=function(f,l,x){f=f>>>0,l=l>>>0,x||w(f,l,this.length);let O=this[f+--l],N=1;for(;l>0&&(N*=256);)O+=this[f+--l]*N;return O},c.prototype.readUint8=c.prototype.readUInt8=function(f,l){return f=f>>>0,l||w(f,1,this.length),this[f]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(f,l){return f=f>>>0,l||w(f,2,this.length),this[f]|this[f+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(f,l){return f=f>>>0,l||w(f,2,this.length),this[f]<<8|this[f+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(f,l){return f=f>>>0,l||w(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(f,l){return f=f>>>0,l||w(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},c.prototype.readBigUInt64LE=ge(function(f){f=f>>>0,G(f,"offset");const l=this[f],x=this[f+7];(l===void 0||x===void 0)&&ce(f,this.length-8);const O=l+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,N=this[++f]+this[++f]*2**8+this[++f]*2**16+x*2**24;return BigInt(O)+(BigInt(N)<<BigInt(32))}),c.prototype.readBigUInt64BE=ge(function(f){f=f>>>0,G(f,"offset");const l=this[f],x=this[f+7];(l===void 0||x===void 0)&&ce(f,this.length-8);const O=l*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],N=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+x;return(BigInt(O)<<BigInt(32))+BigInt(N)}),c.prototype.readIntLE=function(f,l,x){f=f>>>0,l=l>>>0,x||w(f,l,this.length);let O=this[f],N=1,K=0;for(;++K<l&&(N*=256);)O+=this[f+K]*N;return N*=128,O>=N&&(O-=Math.pow(2,8*l)),O},c.prototype.readIntBE=function(f,l,x){f=f>>>0,l=l>>>0,x||w(f,l,this.length);let O=l,N=1,K=this[f+--O];for(;O>0&&(N*=256);)K+=this[f+--O]*N;return N*=128,K>=N&&(K-=Math.pow(2,8*l)),K},c.prototype.readInt8=function(f,l){return f=f>>>0,l||w(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},c.prototype.readInt16LE=function(f,l){f=f>>>0,l||w(f,2,this.length);const x=this[f]|this[f+1]<<8;return x&32768?x|4294901760:x},c.prototype.readInt16BE=function(f,l){f=f>>>0,l||w(f,2,this.length);const x=this[f+1]|this[f]<<8;return x&32768?x|4294901760:x},c.prototype.readInt32LE=function(f,l){return f=f>>>0,l||w(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},c.prototype.readInt32BE=function(f,l){return f=f>>>0,l||w(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},c.prototype.readBigInt64LE=ge(function(f){f=f>>>0,G(f,"offset");const l=this[f],x=this[f+7];(l===void 0||x===void 0)&&ce(f,this.length-8);const O=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(x<<24);return(BigInt(O)<<BigInt(32))+BigInt(l+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),c.prototype.readBigInt64BE=ge(function(f){f=f>>>0,G(f,"offset");const l=this[f],x=this[f+7];(l===void 0||x===void 0)&&ce(f,this.length-8);const O=(l<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(O)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+x)}),c.prototype.readFloatLE=function(f,l){return f=f>>>0,l||w(f,4,this.length),r.read(this,f,!0,23,4)},c.prototype.readFloatBE=function(f,l){return f=f>>>0,l||w(f,4,this.length),r.read(this,f,!1,23,4)},c.prototype.readDoubleLE=function(f,l){return f=f>>>0,l||w(f,8,this.length),r.read(this,f,!0,52,8)},c.prototype.readDoubleBE=function(f,l){return f=f>>>0,l||w(f,8,this.length),r.read(this,f,!1,52,8)};function j(S,f,l,x,O,N){if(!c.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>O||f<N)throw new RangeError('"value" argument is out of bounds');if(l+x>S.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(f,l,x,O){if(f=+f,l=l>>>0,x=x>>>0,!O){const fe=Math.pow(2,8*x)-1;j(this,f,l,x,fe,0)}let N=1,K=0;for(this[l]=f&255;++K<x&&(N*=256);)this[l+K]=f/N&255;return l+x},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(f,l,x,O){if(f=+f,l=l>>>0,x=x>>>0,!O){const fe=Math.pow(2,8*x)-1;j(this,f,l,x,fe,0)}let N=x-1,K=1;for(this[l+N]=f&255;--N>=0&&(K*=256);)this[l+N]=f/K&255;return l+x},c.prototype.writeUint8=c.prototype.writeUInt8=function(f,l,x){return f=+f,l=l>>>0,x||j(this,f,l,1,255,0),this[l]=f&255,l+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(f,l,x){return f=+f,l=l>>>0,x||j(this,f,l,2,65535,0),this[l]=f&255,this[l+1]=f>>>8,l+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(f,l,x){return f=+f,l=l>>>0,x||j(this,f,l,2,65535,0),this[l]=f>>>8,this[l+1]=f&255,l+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(f,l,x){return f=+f,l=l>>>0,x||j(this,f,l,4,4294967295,0),this[l+3]=f>>>24,this[l+2]=f>>>16,this[l+1]=f>>>8,this[l]=f&255,l+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(f,l,x){return f=+f,l=l>>>0,x||j(this,f,l,4,4294967295,0),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4};function H(S,f,l,x,O){D(f,x,O,S,l,7);let N=Number(f&BigInt(4294967295));S[l++]=N,N=N>>8,S[l++]=N,N=N>>8,S[l++]=N,N=N>>8,S[l++]=N;let K=Number(f>>BigInt(32)&BigInt(4294967295));return S[l++]=K,K=K>>8,S[l++]=K,K=K>>8,S[l++]=K,K=K>>8,S[l++]=K,l}function U(S,f,l,x,O){D(f,x,O,S,l,7);let N=Number(f&BigInt(4294967295));S[l+7]=N,N=N>>8,S[l+6]=N,N=N>>8,S[l+5]=N,N=N>>8,S[l+4]=N;let K=Number(f>>BigInt(32)&BigInt(4294967295));return S[l+3]=K,K=K>>8,S[l+2]=K,K=K>>8,S[l+1]=K,K=K>>8,S[l]=K,l+8}c.prototype.writeBigUInt64LE=ge(function(f,l=0){return H(this,f,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=ge(function(f,l=0){return U(this,f,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(f,l,x,O){if(f=+f,l=l>>>0,!O){const Ne=Math.pow(2,8*x-1);j(this,f,l,x,Ne-1,-Ne)}let N=0,K=1,fe=0;for(this[l]=f&255;++N<x&&(K*=256);)f<0&&fe===0&&this[l+N-1]!==0&&(fe=1),this[l+N]=(f/K>>0)-fe&255;return l+x},c.prototype.writeIntBE=function(f,l,x,O){if(f=+f,l=l>>>0,!O){const Ne=Math.pow(2,8*x-1);j(this,f,l,x,Ne-1,-Ne)}let N=x-1,K=1,fe=0;for(this[l+N]=f&255;--N>=0&&(K*=256);)f<0&&fe===0&&this[l+N+1]!==0&&(fe=1),this[l+N]=(f/K>>0)-fe&255;return l+x},c.prototype.writeInt8=function(f,l,x){return f=+f,l=l>>>0,x||j(this,f,l,1,127,-128),f<0&&(f=255+f+1),this[l]=f&255,l+1},c.prototype.writeInt16LE=function(f,l,x){return f=+f,l=l>>>0,x||j(this,f,l,2,32767,-32768),this[l]=f&255,this[l+1]=f>>>8,l+2},c.prototype.writeInt16BE=function(f,l,x){return f=+f,l=l>>>0,x||j(this,f,l,2,32767,-32768),this[l]=f>>>8,this[l+1]=f&255,l+2},c.prototype.writeInt32LE=function(f,l,x){return f=+f,l=l>>>0,x||j(this,f,l,4,2147483647,-2147483648),this[l]=f&255,this[l+1]=f>>>8,this[l+2]=f>>>16,this[l+3]=f>>>24,l+4},c.prototype.writeInt32BE=function(f,l,x){return f=+f,l=l>>>0,x||j(this,f,l,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4},c.prototype.writeBigInt64LE=ge(function(f,l=0){return H(this,f,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=ge(function(f,l=0){return U(this,f,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ne(S,f,l,x,O,N){if(l+x>S.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function V(S,f,l,x,O){return f=+f,l=l>>>0,O||ne(S,f,l,4),r.write(S,f,l,x,23,4),l+4}c.prototype.writeFloatLE=function(f,l,x){return V(this,f,l,!0,x)},c.prototype.writeFloatBE=function(f,l,x){return V(this,f,l,!1,x)};function J(S,f,l,x,O){return f=+f,l=l>>>0,O||ne(S,f,l,8),r.write(S,f,l,x,52,8),l+8}c.prototype.writeDoubleLE=function(f,l,x){return J(this,f,l,!0,x)},c.prototype.writeDoubleBE=function(f,l,x){return J(this,f,l,!1,x)},c.prototype.copy=function(f,l,x,O){if(!c.isBuffer(f))throw new TypeError("argument should be a Buffer");if(x||(x=0),!O&&O!==0&&(O=this.length),l>=f.length&&(l=f.length),l||(l=0),O>0&&O<x&&(O=x),O===x||f.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),f.length-l<O-x&&(O=f.length-l+x);const N=O-x;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,x,O):Uint8Array.prototype.set.call(f,this.subarray(x,O),l),N},c.prototype.fill=function(f,l,x,O){if(typeof f=="string"){if(typeof l=="string"?(O=l,l=0,x=this.length):typeof x=="string"&&(O=x,x=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!c.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(f.length===1){const K=f.charCodeAt(0);(O==="utf8"&&K<128||O==="latin1")&&(f=K)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(l<0||this.length<l||this.length<x)throw new RangeError("Out of range index");if(x<=l)return this;l=l>>>0,x=x===void 0?this.length:x>>>0,f||(f=0);let N;if(typeof f=="number")for(N=l;N<x;++N)this[N]=f;else{const K=c.isBuffer(f)?f:c.from(f,O),fe=K.length;if(fe===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(N=0;N<x-l;++N)this[N+l]=K[N%fe]}return this};const be={};function re(S,f,l){be[S]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(S,f){return`The "${S}" argument must be of type number. Received type ${typeof f}`},TypeError),re("ERR_OUT_OF_RANGE",function(S,f,l){let x=`The value of "${S}" is out of range.`,O=l;return Number.isInteger(l)&&Math.abs(l)>2**32?O=le(String(l)):typeof l=="bigint"&&(O=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(O=le(O)),O+="n"),x+=` It must be ${f}. Received ${O}`,x},RangeError);function le(S){let f="",l=S.length;const x=S[0]==="-"?1:0;for(;l>=x+4;l-=3)f=`_${S.slice(l-3,l)}${f}`;return`${S.slice(0,l)}${f}`}function Q(S,f,l){G(f,"offset"),(S[f]===void 0||S[f+l]===void 0)&&ce(f,S.length-(l+1))}function D(S,f,l,x,O,N){if(S>l||S<f){const K=typeof f=="bigint"?"n":"";let fe;throw f===0||f===BigInt(0)?fe=`>= 0${K} and < 2${K} ** ${(N+1)*8}${K}`:fe=`>= -(2${K} ** ${(N+1)*8-1}${K}) and < 2 ** ${(N+1)*8-1}${K}`,new be.ERR_OUT_OF_RANGE("value",fe,S)}Q(x,O,N)}function G(S,f){if(typeof S!="number")throw new be.ERR_INVALID_ARG_TYPE(f,"number",S)}function ce(S,f,l){throw Math.floor(S)!==S?(G(S,l),new be.ERR_OUT_OF_RANGE("offset","an integer",S)):f<0?new be.ERR_BUFFER_OUT_OF_BOUNDS:new be.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,S)}const ae=/[^+/0-9A-Za-z-_]/g;function Y(S){if(S=S.split("=")[0],S=S.trim().replace(ae,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function te(S,f){f=f||1/0;let l;const x=S.length;let O=null;const N=[];for(let K=0;K<x;++K){if(l=S.charCodeAt(K),l>55295&&l<57344){if(!O){if(l>56319){(f-=3)>-1&&N.push(239,191,189);continue}else if(K+1===x){(f-=3)>-1&&N.push(239,191,189);continue}O=l;continue}if(l<56320){(f-=3)>-1&&N.push(239,191,189),O=l;continue}l=(O-55296<<10|l-56320)+65536}else O&&(f-=3)>-1&&N.push(239,191,189);if(O=null,l<128){if((f-=1)<0)break;N.push(l)}else if(l<2048){if((f-=2)<0)break;N.push(l>>6|192,l&63|128)}else if(l<65536){if((f-=3)<0)break;N.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((f-=4)<0)break;N.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return N}function se(S){const f=[];for(let l=0;l<S.length;++l)f.push(S.charCodeAt(l)&255);return f}function de(S,f){let l,x,O;const N=[];for(let K=0;K<S.length&&!((f-=2)<0);++K)l=S.charCodeAt(K),x=l>>8,O=l%256,N.push(O),N.push(x);return N}function ue(S){return e.toByteArray(Y(S))}function ie(S,f,l,x){let O;for(O=0;O<x&&!(O+l>=f.length||O>=S.length);++O)f[O+l]=S[O];return O}function oe(S,f){return S instanceof f||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===f.name}function Pe(S){return S!==S}const _e=function(){const S="0123456789abcdef",f=new Array(256);for(let l=0;l<16;++l){const x=l*16;for(let O=0;O<16;++O)f[x+O]=S[l]+S[O]}return f}();function ge(S){return typeof BigInt>"u"?Re:S}function Re(){throw new Error("BigInt not supported")}})(Ro);var mo={},Us={},Fs={},Rr={},yi={},Kt={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.KeySize=rr.KeyType=void 0;var Fc;(function(t){t[t.ED25519=0]="ED25519",t[t.SECP256K1=1]="SECP256K1"})(Fc||(rr.KeyType=Fc={}));rr.KeySize={SECRET_KEY:32,ED25519_PUBLIC_KEY:32,SECP256k1_PUBLIC_KEY:64};var vi={},sn={};Object.defineProperty(sn,"__esModule",{value:!0});sn.KeyPairBase=void 0;class Dd{}sn.KeyPairBase=Dd;var kn={},Qe={},gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.DEFAULT_FUNCTION_CALL_GAS=void 0;gi.DEFAULT_FUNCTION_CALL_GAS=30000000000000n;var $o={},Nn={};const jd="Exceeded the maximum amount of gas allowed to burn per contract",Ud="Method name is empty",Fd="Wasmer compilation error: {{msg}}",qd="Smart contract panicked: {{panic_msg}}",zd="Error creating Wasm memory",Hd="Exceeded the prepaid gas",Gd="Method name is not valid UTF8 string",Vd="String encoding is bad UTF-16 sequence",Jd="WebAssembly trap: {{msg}}",Wd="Gas instrumentation failed or contract has denied instructions.",Zd="{{promise_idx}} does not correspond to existing promises",Xd="Accessed invalid promise result index: {{result_idx}}",Yd="Error happened while deserializing the module",Qd="Contract method is not found",e0="Accessed invalid register id: {{register_id}}",t0="VM Logic returned an invalid receipt index: {{receipt_index}}",r0="Method name is empty in contract call",n0="Returning joint promise is currently prohibited",i0="Stack instrumentation failed",a0="Cannot find contract code for account {{account_id}}",o0="Invalid method signature",c0="Integer overflow happened during contract execution",s0="MemoryAccessViolation",u0="Iterator index {{iterator_index}} does not exist",f0="Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie",d0="VM Logic returned an invalid account id",l0="Error happened while serializing the module",h0="Actions can only be appended to non-joint promise.",b0="Internal memory declaration has been found in the module",p0="Error happened during instantiation",y0="{{method_name}} is not allowed in view calls",v0="VM Logic returned an invalid method name",g0="String encoding is bad UTF-8 sequence",m0="Exceeded the account balance",_0="Wasm contract link error: {{msg}}",w0="VM Logic provided an invalid public key",S0="Actor {{actor_id}} doesn't have permission to account {{account_id}} to complete the action",A0="The account {{account_id}} wouldn't have enough balance to cover storage, required to have {{amount}} yoctoNEAR more",E0="Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.",x0="Transaction gas or balance cost is too high",I0="Transaction is not signed with the given public key",M0=`Signer "{{account_id}}" doesn't have access key with the given public_key {{public_key}}`,P0="Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}",B0="Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}",O0="Transaction has expired",T0="Account {{account_id}} is staking and can not be deleted",C0="Signer {{signer_id}} does not exist",k0="Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}",N0="The public key {{public_key}} is already used for an existing access key",L0="Invalid signer account ID {{signer_id}} according to requirements",R0="The new account_id {{account_id}} can't be created by {{predecessor_id}}",K0="The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key",$0="Account {{account_id}} is not yet staked, but tried to unstake",D0="Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}",j0="Can't create a new account {{account_id}}, because it already exists",U0="Transaction parent block hash doesn't belong to the current chain",F0="Can't complete the action because account {{account_id}} doesn't exist",q0="Can't complete the action because access key {{public_key}} doesn't exist",z0="Transaction method name {{method_name}} isn't allowed by the access key",H0="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent",G0="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it's storage",V0="Invalid receiver account ID {{receiver_id}} according to requirements",J0="Account {{account_id}} tries to remove an access key that doesn't exist",W0="Timeout exceeded",Z0="Connection closed",X0="Shard {{shard_id}} rejected the transaction due to congestion level {{congestion_level}}, try again later",Y0="Shard {{shard_id}} rejected the transaction because it missed {{missed_chunks}} chunks and needs to recover before accepting new transactions, try again later",Q0={GasLimitExceeded:jd,MethodEmptyName:Ud,WasmerCompileError:Fd,GuestPanic:qd,Memory:zd,GasExceeded:Hd,MethodUTF8Error:Gd,BadUTF16:Vd,WasmTrap:Jd,GasInstrumentation:Wd,InvalidPromiseIndex:Zd,InvalidPromiseResultIndex:Xd,Deserialization:Yd,MethodNotFound:Qd,InvalidRegisterId:e0,InvalidReceiptIndex:t0,EmptyMethodName:r0,CannotReturnJointPromise:n0,StackHeightInstrumentation:i0,CodeDoesNotExist:a0,MethodInvalidSignature:o0,IntegerOverflow:c0,MemoryAccessViolation:s0,InvalidIteratorIndex:u0,IteratorWasInvalidated:f0,InvalidAccountId:d0,Serialization:l0,CannotAppendActionToJointPromise:h0,InternalMemoryDeclared:b0,Instantiate:p0,ProhibitedInView:y0,InvalidMethodName:v0,BadUTF8:g0,BalanceExceeded:m0,LinkError:_0,InvalidPublicKey:w0,ActorNoPermission:S0,LackBalanceForState:A0,ReceiverMismatch:E0,CostOverflow:x0,InvalidSignature:I0,AccessKeyNotFound:M0,NotEnoughBalance:P0,NotEnoughAllowance:B0,Expired:O0,DeleteAccountStaking:T0,SignerDoesNotExist:C0,TriesToStake:k0,AddKeyAlreadyExists:N0,InvalidSigner:L0,CreateAccountNotAllowed:R0,RequiresFullAccess:K0,TriesToUnstake:$0,InvalidNonce:D0,AccountAlreadyExists:j0,InvalidChain:U0,AccountDoesNotExist:F0,AccessKeyDoesNotExist:q0,MethodNameMismatch:z0,DeleteAccountHasRent:H0,DeleteAccountHasEnoughBalance:G0,InvalidReceiver:V0,DeleteKeyDoesNotExist:J0,Timeout:W0,Closed:Z0,ShardCongested:X0,ShardStuck:Y0};var el=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.ErrorMessages=void 0;const tl=el(Q0);Nn.ErrorMessages=tl.default;var St={},bt={},mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.Assignable=void 0;class rl{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}}mi.Assignable=rl;var _i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.Enum=void 0;let nl=class{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this[r]=e[r]})}};_i.Enum=nl;var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.ErrorContext=Ft.TypedError=Ft.ArgumentTypeError=Ft.PositionalArgsError=void 0;class il extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}Ft.PositionalArgsError=il;class al extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}Ft.ArgumentTypeError=al;class ol extends Error{type;context;constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}}Ft.TypedError=ol;class cl{transactionHash;constructor(e){this.transactionHash=e}}Ft.ErrorContext=cl;var qs={},wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.IdType=void 0;var qc;(function(t){t.Transaction="transaction",t.Receipt="receipt"})(qc||(wi.IdType=qc={}));var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.FinalExecutionStatusBasic=Zr.ExecutionStatusBasic=void 0;var zc;(function(t){t.Unknown="Unknown",t.Pending="Pending",t.Failure="Failure"})(zc||(Zr.ExecutionStatusBasic=zc={}));var Hc;(function(t){t.NotStarted="NotStarted",t.Started="Started",t.Failure="Failure"})(Hc||(Zr.FinalExecutionStatusBasic=Hc={}));(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=void 0;var e=wi;Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return e.IdType}});var r=Zr;Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return r.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}})})(qs);(function(t){var e=X&&X.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var c=Object.getOwnPropertyDescriptor(i,a);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,c)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=X&&X.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(mi,t),r(_i,t),r(Ft,t),r(qs,t)})(bt);var zs={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(X,function(){/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var r=Object.prototype.toString,n=Array.isArray||function(d){return r.call(d)==="[object Array]"};function i(s){return typeof s=="function"}function a(s){return n(s)?"array":typeof s}function o(s){return s.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function c(s,d){return s!=null&&typeof s=="object"&&d in s}function b(s,d){return s!=null&&typeof s!="object"&&s.hasOwnProperty&&s.hasOwnProperty(d)}var g=RegExp.prototype.test;function p(s,d){return g.call(s,d)}var v=/\S/;function A(s){return!p(v,s)}var E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function B(s){return String(s).replace(/[&<>"'`=\/]/g,function(h){return E[h]})}var T=/\s*/,L=/\s+/,R=/\s*=/,z=/\s*\}/,F=/#|\^|\/|>|\{|&|=|!/;function Z(s,d){if(!s)return[];var h=!1,y=[],_=[],P=[],I=!1,m=!1,u="",w=0;function j(){if(I&&!m)for(;P.length;)delete _[P.pop()];else P=[];I=!1,m=!1}var H,U,ne;function V(Y){if(typeof Y=="string"&&(Y=Y.split(L,2)),!n(Y)||Y.length!==2)throw new Error("Invalid tags: "+Y);H=new RegExp(o(Y[0])+"\\s*"),U=new RegExp("\\s*"+o(Y[1])),ne=new RegExp("\\s*"+o("}"+Y[1]))}V(d||ee.tags);for(var J=new W(s),be,re,le,Q,D,G;!J.eos();){if(be=J.pos,le=J.scanUntil(H),le)for(var ce=0,ae=le.length;ce<ae;++ce)Q=le.charAt(ce),A(Q)?(P.push(_.length),u+=Q):(m=!0,h=!0,u+=" "),_.push(["text",Q,be,be+1]),be+=1,Q===`
`&&(j(),u="",w=0,h=!1);if(!J.scan(H))break;if(I=!0,re=J.scan(F)||"name",J.scan(T),re==="="?(le=J.scanUntil(R),J.scan(R),J.scanUntil(U)):re==="{"?(le=J.scanUntil(ne),J.scan(z),J.scanUntil(U),re="&"):le=J.scanUntil(U),!J.scan(U))throw new Error("Unclosed tag at "+J.pos);if(re==">"?D=[re,le,be,J.pos,u,w,h]:D=[re,le,be,J.pos],w++,_.push(D),re==="#"||re==="^")y.push(D);else if(re==="/"){if(G=y.pop(),!G)throw new Error('Unopened section "'+le+'" at '+be);if(G[1]!==le)throw new Error('Unclosed section "'+G[1]+'" at '+be)}else re==="name"||re==="{"||re==="&"?m=!0:re==="="&&V(le)}if(j(),G=y.pop(),G)throw new Error('Unclosed section "'+G[1]+'" at '+J.pos);return q(C(_))}function C(s){for(var d=[],h,y,_=0,P=s.length;_<P;++_)h=s[_],h&&(h[0]==="text"&&y&&y[0]==="text"?(y[1]+=h[1],y[3]=h[3]):(d.push(h),y=h));return d}function q(s){for(var d=[],h=d,y=[],_,P,I=0,m=s.length;I<m;++I)switch(_=s[I],_[0]){case"#":case"^":h.push(_),y.push(_),h=_[4]=[];break;case"/":P=y.pop(),P[5]=_[2],h=y.length>0?y[y.length-1][4]:d;break;default:h.push(_)}return d}function W(s){this.string=s,this.tail=s,this.pos=0}W.prototype.eos=function(){return this.tail===""},W.prototype.scan=function(d){var h=this.tail.match(d);if(!h||h.index!==0)return"";var y=h[0];return this.tail=this.tail.substring(y.length),this.pos+=y.length,y},W.prototype.scanUntil=function(d){var h=this.tail.search(d),y;switch(h){case-1:y=this.tail,this.tail="";break;case 0:y="";break;default:y=this.tail.substring(0,h),this.tail=this.tail.substring(h)}return this.pos+=y.length,y};function k(s,d){this.view=s,this.cache={".":this.view},this.parent=d}k.prototype.push=function(d){return new k(d,this)},k.prototype.lookup=function(d){var h=this.cache,y;if(h.hasOwnProperty(d))y=h[d];else{for(var _=this,P,I,m,u=!1;_;){if(d.indexOf(".")>0)for(P=_.view,I=d.split("."),m=0;P!=null&&m<I.length;)m===I.length-1&&(u=c(P,I[m])||b(P,I[m])),P=P[I[m++]];else P=_.view[d],u=c(_.view,d);if(u){y=P;break}_=_.parent}h[d]=y}return i(y)&&(y=y.call(this.view)),y};function $(){this.templateCache={_cache:{},set:function(d,h){this._cache[d]=h},get:function(d){return this._cache[d]},clear:function(){this._cache={}}}}$.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},$.prototype.parse=function(d,h){var y=this.templateCache,_=d+":"+(h||ee.tags).join(":"),P=typeof y<"u",I=P?y.get(_):void 0;return I==null&&(I=Z(d,h),P&&y.set(_,I)),I},$.prototype.render=function(d,h,y,_){var P=this.parse(d,_),I=h instanceof k?h:new k(h,void 0);return this.renderTokens(P,I,y,d,_)},$.prototype.renderTokens=function(d,h,y,_,P){for(var I="",m,u,w,j=0,H=d.length;j<H;++j)w=void 0,m=d[j],u=m[0],u==="#"?w=this.renderSection(m,h,y,_):u==="^"?w=this.renderInverted(m,h,y,_):u===">"?w=this.renderPartial(m,h,y,P):u==="&"?w=this.unescapedValue(m,h):u==="name"?w=this.escapedValue(m,h):u==="text"&&(w=this.rawValue(m)),w!==void 0&&(I+=w);return I},$.prototype.renderSection=function(d,h,y,_){var P=this,I="",m=h.lookup(d[1]);function u(H){return P.render(H,h,y)}if(m){if(n(m))for(var w=0,j=m.length;w<j;++w)I+=this.renderTokens(d[4],h.push(m[w]),y,_);else if(typeof m=="object"||typeof m=="string"||typeof m=="number")I+=this.renderTokens(d[4],h.push(m),y,_);else if(i(m)){if(typeof _!="string")throw new Error("Cannot use higher-order sections without the original template");m=m.call(h.view,_.slice(d[3],d[5]),u),m!=null&&(I+=m)}else I+=this.renderTokens(d[4],h,y,_);return I}},$.prototype.renderInverted=function(d,h,y,_){var P=h.lookup(d[1]);if(!P||n(P)&&P.length===0)return this.renderTokens(d[4],h,y,_)},$.prototype.indentPartial=function(d,h,y){for(var _=h.replace(/[^ \t]/g,""),P=d.split(`
`),I=0;I<P.length;I++)P[I].length&&(I>0||!y)&&(P[I]=_+P[I]);return P.join(`
`)},$.prototype.renderPartial=function(d,h,y,_){if(y){var P=i(y)?y(d[1]):y[d[1]];if(P!=null){var I=d[6],m=d[5],u=d[4],w=P;return m==0&&u&&(w=this.indentPartial(P,u,I)),this.renderTokens(this.parse(w,_),h,y,w)}}},$.prototype.unescapedValue=function(d,h){var y=h.lookup(d[1]);if(y!=null)return y},$.prototype.escapedValue=function(d,h){var y=h.lookup(d[1]);if(y!=null)return ee.escape(y)},$.prototype.rawValue=function(d){return d[1]};var ee={name:"mustache.js",version:"4.0.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(s){M.templateCache=s},get templateCache(){return M.templateCache}},M=new $;return ee.clearCache=function(){return M.clearCache()},ee.parse=function(d,h){return M.parse(d,h)},ee.render=function(d,h,y,_){if(typeof d!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+a(d)+'" was given as the first argument for mustache#render(template, view, partials)');return M.render(d,h,y,_)},ee.escape=B,ee.Scanner=W,ee.Context=k,ee.Writer=$,ee})})(zs);var sl=zs.exports,Do={},_o={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var r=Ro,n=r.Buffer;function i(o,c){for(var b in o)c[b]=o[b]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a);function a(o,c,b){return n(o,c,b)}a.prototype=Object.create(n.prototype),i(n,a),a.from=function(o,c,b){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,c,b)},a.alloc=function(o,c,b){if(typeof o!="number")throw new TypeError("Argument must be a number");var g=n(o);return c!==void 0?typeof b=="string"?g.fill(c,b):g.fill(c):g.fill(0),g},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(_o,_o.exports);var Hs=_o.exports,Gc=Hs.Buffer,ul=function(e){for(var r={},n=e.length,i=e.charAt(0),a=0;a<e.length;a++){var o=e.charAt(a);if(r[o]!==void 0)throw new TypeError(o+" is ambiguous");r[o]=a}function c(p){if(p.length===0)return"";for(var v=[0],A=0;A<p.length;++A){for(var E=0,B=p[A];E<v.length;++E)B+=v[E]<<8,v[E]=B%n,B=B/n|0;for(;B>0;)v.push(B%n),B=B/n|0}for(var T="",L=0;p[L]===0&&L<p.length-1;++L)T+=e[0];for(var R=v.length-1;R>=0;--R)T+=e[v[R]];return T}function b(p){if(p.length===0)return Gc.allocUnsafe(0);for(var v=[0],A=0;A<p.length;A++){var E=r[p[A]];if(E===void 0)return;for(var B=0,T=E;B<v.length;++B)T+=v[B]*n,v[B]=T&255,T>>=8;for(;T>0;)v.push(T&255),T>>=8}for(var L=0;p[L]===i&&L<p.length-1;++L)v.push(0);return Gc.from(v.reverse())}function g(p){var v=b(p);if(v)return v;throw new Error("Non-base"+n+" character")}return{encode:c,decodeUnsafe:b,decode:g}},fl=ul,dl="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ll=fl(dl);(function(t){var e=X&&X.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(t,"__esModule",{value:!0}),t.baseDecode=t.baseEncode=t.parseNearAmount=t.formatNearAmount=t.NEAR_NOMINATION=t.NEAR_NOMINATION_EXP=void 0;const r=e(ll);t.NEAR_NOMINATION_EXP=24,t.NEAR_NOMINATION=10n**BigInt(t.NEAR_NOMINATION_EXP);const n=[],i=10n;for(let E=0,B=5n;E<t.NEAR_NOMINATION_EXP;E++,B=B*i)n[E]=B;function a(E,B=t.NEAR_NOMINATION_EXP){let T=BigInt(E);if(B!==t.NEAR_NOMINATION_EXP){const z=t.NEAR_NOMINATION_EXP-B-1;z>0&&(T+=n[z])}E=T.toString();const L=E.substring(0,E.length-t.NEAR_NOMINATION_EXP)||"0",R=E.substring(E.length-t.NEAR_NOMINATION_EXP).padStart(t.NEAR_NOMINATION_EXP,"0").substring(0,B);return b(`${p(L)}.${R}`)}t.formatNearAmount=a;function o(E){if(!E)return null;E=c(E);const B=E.split("."),T=B[0],L=B[1]||"";if(B.length>2||L.length>t.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${E}' as NEAR amount`);return g(T+L.padEnd(t.NEAR_NOMINATION_EXP,"0"))}t.parseNearAmount=o;function c(E){return E.replace(/,/g,"").trim()}function b(E){return E.replace(/\.?0*$/,"")}function g(E){return E=E.replace(/^0+/,""),E===""?"0":E}function p(E){const B=/(-?\d+)(\d{3})/;for(;B.test(E);)E=E.replace(B,"$1,$2");return E}function v(E){if(typeof E=="string"){const B=[];for(let T=0;T<E.length;T++)B.push(E.charCodeAt(T));E=new Uint8Array(B)}return r.default.encode(E)}t.baseEncode=v;function A(E){return new Uint8Array(r.default.decode(E))}t.baseDecode=A})(Do);const hl={AccessKeyNotFound:{name:"AccessKeyNotFound",subtypes:[],props:{account_id:"",public_key:""}},AccountAlreadyExists:{name:"AccountAlreadyExists",subtypes:[],props:{account_id:""}},AccountDoesNotExist:{name:"AccountDoesNotExist",subtypes:[],props:{account_id:""}},ActionError:{name:"ActionError",subtypes:["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed","DeleteAccountWithLargeState","DelegateActionInvalidSignature","DelegateActionSenderDoesNotMatchTxReceiver","DelegateActionExpired","DelegateActionAccessKeyError","DelegateActionInvalidNonce","DelegateActionNonceTooLarge"],props:{index:""}},ActionsValidationError:{name:"ActionsValidationError",subtypes:["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas","DelegateActionMustBeOnlyOne","UnsupportedProtocolFeature"],props:{}},ActorNoPermission:{name:"ActorNoPermission",subtypes:[],props:{account_id:"",actor_id:""}},AddKeyAlreadyExists:{name:"AddKeyAlreadyExists",subtypes:[],props:{account_id:"",public_key:""}},AddKeyMethodNameLengthExceeded:{name:"AddKeyMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},AddKeyMethodNamesNumberOfBytesExceeded:{name:"AddKeyMethodNamesNumberOfBytesExceeded",subtypes:[],props:{limit:"",total_number_of_bytes:""}},AltBn128InvalidInput:{name:"AltBn128InvalidInput",subtypes:[],props:{msg:""}},BadUTF16:{name:"BadUTF16",subtypes:[],props:{}},BadUTF8:{name:"BadUTF8",subtypes:[],props:{}},BalanceExceeded:{name:"BalanceExceeded",subtypes:[],props:{}},BalanceMismatchError:{name:"BalanceMismatchError",subtypes:[],props:{final_accounts_balance:"",final_postponed_receipts_balance:"",forwarded_buffered_receipts_balance:"",incoming_receipts_balance:"",incoming_validator_rewards:"",initial_accounts_balance:"",initial_postponed_receipts_balance:"",new_buffered_receipts_balance:"",new_delayed_receipts_balance:"",other_burnt_amount:"",outgoing_receipts_balance:"",processed_delayed_receipts_balance:"",slashed_burnt_amount:"",tx_burnt_amount:""}},CallIndirectOOB:{name:"CallIndirectOOB",subtypes:[],props:{}},CannotAppendActionToJointPromise:{name:"CannotAppendActionToJointPromise",subtypes:[],props:{}},CannotReturnJointPromise:{name:"CannotReturnJointPromise",subtypes:[],props:{}},CodeDoesNotExist:{name:"CodeDoesNotExist",subtypes:[],props:{account_id:""}},CompilationError:{name:"CompilationError",subtypes:["CodeDoesNotExist","PrepareError","WasmerCompileError"],props:{}},ContractSizeExceeded:{name:"ContractSizeExceeded",subtypes:[],props:{limit:"",size:""}},CostOverflow:{name:"CostOverflow",subtypes:[],props:{}},CreateAccountNotAllowed:{name:"CreateAccountNotAllowed",subtypes:[],props:{account_id:"",predecessor_id:""}},CreateAccountOnlyByRegistrar:{name:"CreateAccountOnlyByRegistrar",subtypes:[],props:{account_id:"",predecessor_id:"",registrar_account_id:""}},DelegateActionExpired:{name:"DelegateActionExpired",subtypes:[],props:{}},DelegateActionInvalidNonce:{name:"DelegateActionInvalidNonce",subtypes:[],props:{ak_nonce:"",delegate_nonce:""}},DelegateActionInvalidSignature:{name:"DelegateActionInvalidSignature",subtypes:[],props:{}},DelegateActionMustBeOnlyOne:{name:"DelegateActionMustBeOnlyOne",subtypes:[],props:{}},DelegateActionNonceTooLarge:{name:"DelegateActionNonceTooLarge",subtypes:[],props:{delegate_nonce:"",upper_bound:""}},DelegateActionSenderDoesNotMatchTxReceiver:{name:"DelegateActionSenderDoesNotMatchTxReceiver",subtypes:[],props:{receiver_id:"",sender_id:""}},DeleteAccountStaking:{name:"DeleteAccountStaking",subtypes:[],props:{account_id:""}},DeleteAccountWithLargeState:{name:"DeleteAccountWithLargeState",subtypes:[],props:{account_id:""}},DeleteActionMustBeFinal:{name:"DeleteActionMustBeFinal",subtypes:[],props:{}},DeleteKeyDoesNotExist:{name:"DeleteKeyDoesNotExist",subtypes:[],props:{account_id:"",public_key:""}},DepositWithFunctionCall:{name:"DepositWithFunctionCall",subtypes:[],props:{}},Deprecated:{name:"Deprecated",subtypes:[],props:{method_name:""}},Deserialization:{name:"Deserialization",subtypes:[],props:{}},ECRecoverError:{name:"ECRecoverError",subtypes:[],props:{msg:""}},Ed25519VerifyInvalidInput:{name:"Ed25519VerifyInvalidInput",subtypes:[],props:{msg:""}},EmptyMethodName:{name:"EmptyMethodName",subtypes:[],props:{}},Expired:{name:"Expired",subtypes:[],props:{}},FunctionCallArgumentsLengthExceeded:{name:"FunctionCallArgumentsLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallMethodNameLengthExceeded:{name:"FunctionCallMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallZeroAttachedGas:{name:"FunctionCallZeroAttachedGas",subtypes:[],props:{}},GasExceeded:{name:"GasExceeded",subtypes:[],props:{}},GasInstrumentation:{name:"GasInstrumentation",subtypes:[],props:{}},GasLimitExceeded:{name:"GasLimitExceeded",subtypes:[],props:{}},GenericTrap:{name:"GenericTrap",subtypes:[],props:{}},GuestPanic:{name:"GuestPanic",subtypes:[],props:{panic_msg:""}},HostError:{name:"HostError",subtypes:["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated","ECRecoverError","AltBn128InvalidInput","Ed25519VerifyInvalidInput"],props:{}},IllegalArithmetic:{name:"IllegalArithmetic",subtypes:[],props:{}},IncorrectCallIndirectSignature:{name:"IncorrectCallIndirectSignature",subtypes:[],props:{}},IndirectCallToNull:{name:"IndirectCallToNull",subtypes:[],props:{}},Instantiate:{name:"Instantiate",subtypes:[],props:{}},InsufficientStake:{name:"InsufficientStake",subtypes:[],props:{account_id:"",minimum_stake:"",stake:""}},IntegerOverflow:{name:"IntegerOverflow",subtypes:[],props:{}},InternalMemoryDeclared:{name:"InternalMemoryDeclared",subtypes:[],props:{}},InvalidAccessKeyError:{name:"InvalidAccessKeyError",subtypes:["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],props:{}},InvalidAccountId:{name:"InvalidAccountId",subtypes:[],props:{}},InvalidChain:{name:"InvalidChain",subtypes:[],props:{}},InvalidDataReceiverId:{name:"InvalidDataReceiverId",subtypes:[],props:{account_id:""}},InvalidIteratorIndex:{name:"InvalidIteratorIndex",subtypes:[],props:{iterator_index:""}},InvalidMethodName:{name:"InvalidMethodName",subtypes:[],props:{}},InvalidNonce:{name:"InvalidNonce",subtypes:[],props:{ak_nonce:"",tx_nonce:""}},InvalidPredecessorId:{name:"InvalidPredecessorId",subtypes:[],props:{account_id:""}},InvalidPromiseIndex:{name:"InvalidPromiseIndex",subtypes:[],props:{promise_idx:""}},InvalidPromiseResultIndex:{name:"InvalidPromiseResultIndex",subtypes:[],props:{result_idx:""}},InvalidPublicKey:{name:"InvalidPublicKey",subtypes:[],props:{}},InvalidReceiptIndex:{name:"InvalidReceiptIndex",subtypes:[],props:{receipt_index:""}},InvalidReceiverId:{name:"InvalidReceiverId",subtypes:[],props:{account_id:""}},InvalidRegisterId:{name:"InvalidRegisterId",subtypes:[],props:{register_id:""}},InvalidSignature:{name:"InvalidSignature",subtypes:[],props:{}},InvalidSignerId:{name:"InvalidSignerId",subtypes:[],props:{account_id:""}},InvalidTxError:{name:"InvalidTxError",subtypes:["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","NonceTooLarge","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation","TransactionSizeExceeded","StorageError","ShardCongested","ShardStuck"],props:{}},IteratorWasInvalidated:{name:"IteratorWasInvalidated",subtypes:[],props:{iterator_index:""}},KeyLengthExceeded:{name:"KeyLengthExceeded",subtypes:[],props:{length:"",limit:""}},LackBalanceForState:{name:"LackBalanceForState",subtypes:[],props:{account_id:"",amount:""}},Memory:{name:"Memory",subtypes:[],props:{}},MemoryAccessViolation:{name:"MemoryAccessViolation",subtypes:[],props:{}},MemoryOutOfBounds:{name:"MemoryOutOfBounds",subtypes:[],props:{}},MethodEmptyName:{name:"MethodEmptyName",subtypes:[],props:{}},MethodInvalidSignature:{name:"MethodInvalidSignature",subtypes:[],props:{}},MethodNameMismatch:{name:"MethodNameMismatch",subtypes:[],props:{method_name:""}},MethodNotFound:{name:"MethodNotFound",subtypes:[],props:{}},MethodResolveError:{name:"MethodResolveError",subtypes:["MethodEmptyName","MethodNotFound","MethodInvalidSignature"],props:{}},MisalignedAtomicAccess:{name:"MisalignedAtomicAccess",subtypes:[],props:{}},NonceTooLarge:{name:"NonceTooLarge",subtypes:[],props:{tx_nonce:"",upper_bound:""}},NotEnoughAllowance:{name:"NotEnoughAllowance",subtypes:[],props:{account_id:"",allowance:"",cost:"",public_key:""}},NotEnoughBalance:{name:"NotEnoughBalance",subtypes:[],props:{balance:"",cost:"",signer_id:""}},NumberInputDataDependenciesExceeded:{name:"NumberInputDataDependenciesExceeded",subtypes:[],props:{limit:"",number_of_input_data_dependencies:""}},NumberOfLogsExceeded:{name:"NumberOfLogsExceeded",subtypes:[],props:{limit:""}},NumberPromisesExceeded:{name:"NumberPromisesExceeded",subtypes:[],props:{limit:"",number_of_promises:""}},OnlyImplicitAccountCreationAllowed:{name:"OnlyImplicitAccountCreationAllowed",subtypes:[],props:{account_id:""}},PrepareError:{name:"PrepareError",subtypes:["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory","TooManyFunctions","TooManyLocals"],props:{}},ProhibitedInView:{name:"ProhibitedInView",subtypes:[],props:{method_name:""}},ReceiptSizeExceeded:{name:"ReceiptSizeExceeded",subtypes:[],props:{limit:"",size:""}},ReceiptValidationError:{name:"ReceiptValidationError",subtypes:["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation","ReceiptSizeExceeded"],props:{}},ReceiverMismatch:{name:"ReceiverMismatch",subtypes:[],props:{ak_receiver:"",tx_receiver:""}},RequiresFullAccess:{name:"RequiresFullAccess",subtypes:[],props:{}},ReturnedValueLengthExceeded:{name:"ReturnedValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},Serialization:{name:"Serialization",subtypes:[],props:{}},ShardCongested:{name:"ShardCongested",subtypes:[],props:{congestion_level:"",shard_id:""}},ShardStuck:{name:"ShardStuck",subtypes:[],props:{missed_chunks:"",shard_id:""}},SignerDoesNotExist:{name:"SignerDoesNotExist",subtypes:[],props:{signer_id:""}},StackHeightInstrumentation:{name:"StackHeightInstrumentation",subtypes:[],props:{}},StackOverflow:{name:"StackOverflow",subtypes:[],props:{}},TooManyFunctions:{name:"TooManyFunctions",subtypes:[],props:{}},TooManyLocals:{name:"TooManyLocals",subtypes:[],props:{}},TotalLogLengthExceeded:{name:"TotalLogLengthExceeded",subtypes:[],props:{length:"",limit:""}},TotalNumberOfActionsExceeded:{name:"TotalNumberOfActionsExceeded",subtypes:[],props:{limit:"",total_number_of_actions:""}},TotalPrepaidGasExceeded:{name:"TotalPrepaidGasExceeded",subtypes:[],props:{limit:"",total_prepaid_gas:""}},TransactionSizeExceeded:{name:"TransactionSizeExceeded",subtypes:[],props:{limit:"",size:""}},TriesToStake:{name:"TriesToStake",subtypes:[],props:{account_id:"",balance:"",locked:"",stake:""}},TriesToUnstake:{name:"TriesToUnstake",subtypes:[],props:{account_id:""}},TxExecutionError:{name:"TxExecutionError",subtypes:["ActionError","InvalidTxError"],props:{}},Unreachable:{name:"Unreachable",subtypes:[],props:{}},UnsuitableStakingKey:{name:"UnsuitableStakingKey",subtypes:[],props:{public_key:""}},UnsupportedProtocolFeature:{name:"UnsupportedProtocolFeature",subtypes:[],props:{protocol_feature:"",version:""}},ValueLengthExceeded:{name:"ValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},WasmTrap:{name:"WasmTrap",subtypes:["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","IndirectCallToNull","StackOverflow","GenericTrap"],props:{}},WasmerCompileError:{name:"WasmerCompileError",subtypes:[],props:{msg:""}},Closed:{name:"Closed",subtypes:[],props:{}},ServerError:{name:"ServerError",subtypes:["TxExecutionError","Timeout","Closed"],props:{}},Timeout:{name:"Timeout",subtypes:[],props:{}}},bl={schema:hl};var Gs=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(St,"__esModule",{value:!0});St.getErrorTypeFromErrorMessage=St.formatError=St.parseResultError=St.parseRpcError=St.ServerError=void 0;const pl=bt,yl=Gs(sl),vl=Do,Vc=Nn,gl=Gs(bl),ml={formatNear:()=>(t,e)=>(0,vl.formatNearAmount)(e(t))};class jo extends pl.TypedError{}St.ServerError=jo;class _l extends jo{transaction_outcome}function Vs(t){const e={},r=Ws(t,gl.default.schema,e,""),n=new jo(Js(r,e),r);return Object.assign(n,e),n}St.parseRpcError=Vs;function wl(t){const e=Vs(t.status.Failure),r=new _l;return Object.assign(r,e),r.type=e.type,r.message=e.message,r.transaction_outcome=t.transaction_outcome,r}St.parseResultError=wl;function Js(t,e){return typeof Vc.ErrorMessages[t]=="string"?yl.default.render(Vc.ErrorMessages[t],{...e,...ml}):JSON.stringify(e)}St.formatError=Js;function Ws(t,e,r,n){let i,a,o;for(const c in e){if(Al(t[c]))return t[c];if(Ra(t[c]))i=t[c],a=e[c],o=c;else if(Ra(t.kind)&&Ra(t.kind[c]))i=t.kind[c],a=e[c],o=c;else continue}if(i&&a){for(const c of Object.keys(a.props))r[c]=i[c];return Ws(i,e,r,o)}else return r.kind=t,n}function Sl(t,e){switch(!0){case/^account .*? does not exist while viewing$/.test(t):return"AccountDoesNotExist";case/^Account .*? doesn't exist$/.test(t):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(t):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(t):return"CodeDoesNotExist";case/wasm execution failed with error: CompilationError\(CodeDoesNotExist/.test(t):return"CodeDoesNotExist";case/wasm execution failed with error: FunctionCallError\(MethodResolveError\(MethodNotFound/.test(t):return"MethodNotFound";case/wasm execution failed with error: MethodResolveError\(MethodNotFound/.test(t):return"MethodNotFound";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(t):return"InvalidNonce";default:return e}}St.getErrorTypeFromErrorMessage=Sl;function Ra(t){return Object.prototype.toString.call(t)==="[object Object]"}function Al(t){return Object.prototype.toString.call(t)==="[object String]"}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseRpcError=t.parseResultError=t.getErrorTypeFromErrorMessage=t.formatError=t.ServerError=t.ErrorMessages=void 0;var e=Nn;Object.defineProperty(t,"ErrorMessages",{enumerable:!0,get:function(){return e.ErrorMessages}});var r=St;Object.defineProperty(t,"ServerError",{enumerable:!0,get:function(){return r.ServerError}}),Object.defineProperty(t,"formatError",{enumerable:!0,get:function(){return r.formatError}}),Object.defineProperty(t,"getErrorTypeFromErrorMessage",{enumerable:!0,get:function(){return r.getErrorTypeFromErrorMessage}}),Object.defineProperty(t,"parseResultError",{enumerable:!0,get:function(){return r.parseResultError}}),Object.defineProperty(t,"parseRpcError",{enumerable:!0,get:function(){return r.parseRpcError}})})($o);var Xr={},Uo={},Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.ConsoleLogger=void 0;class El{logLevels;constructor(e){this.logLevels=e}isLevelEnabled=e=>this.logLevels.includes(e);print(e,r,...n){switch(e){case"error":case"fatal":return console.error(r,...n);case"warn":return console.warn(r,...n);case"log":return console.log(r,...n);case"debug":case"verbose":return console.debug(r,...n)}}verbose(e,...r){this.isLevelEnabled("verbose")&&this.print("verbose",e,...r)}debug(e,...r){this.isLevelEnabled("debug")&&this.print("debug",e,...r)}log(e,...r){this.isLevelEnabled("log")&&this.print("log",e,...r)}warn(e,...r){this.isLevelEnabled("warn")&&this.print("warn",e,...r)}error(e,...r){this.isLevelEnabled("error")&&this.print("error",e,...r)}fatal(e,...r){this.isLevelEnabled("fatal")&&this.print("fatal",e,...r)}}Ln.ConsoleLogger=El;var Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.Logger=void 0;const xl=Ln,Il=["verbose","debug","log","warn","error","fatal"],Ml=new xl.ConsoleLogger(Il);class Pl{static instanceRef=Ml;static overrideLogger=e=>{this.instanceRef=e};static error(e,...r){this.instanceRef?.error(e,...r)}static log(e,...r){this.instanceRef?.log(e,...r)}static warn(e,...r){this.instanceRef?.warn(e,...r)}static debug(e,...r){this.instanceRef?.debug?.(e,...r)}static verbose(e,...r){this.instanceRef?.verbose?.(e,...r)}static fatal(e,...r){this.instanceRef?.fatal?.(e,...r)}}Si.Logger=Pl;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.ConsoleLogger=void 0;var e=Ln;Object.defineProperty(t,"ConsoleLogger",{enumerable:!0,get:function(){return e.ConsoleLogger}});var r=Si;Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return r.Logger}})})(Uo);Object.defineProperty(Xr,"__esModule",{value:!0});Xr.printTxOutcomeLogs=Xr.printTxOutcomeLogsAndFailures=void 0;const Bl=$o,wo=Uo;function Ol({contractId:t,outcome:e}){const r=[e.transaction_outcome,...e.receipts_outcome].reduce((n,i)=>{const a=typeof i.outcome.status=="object"&&typeof i.outcome.status.Failure=="object";return i.outcome.logs.length||a?n.concat({receiptIds:i.outcome.receipt_ids,logs:i.outcome.logs,failure:typeof i.outcome.status=="object"&&i.outcome.status.Failure!==void 0?(0,Bl.parseRpcError)(i.outcome.status.Failure):null}):n},[]);for(const n of r)wo.Logger.log(`Receipt${n.receiptIds.length>1?"s":""}: ${n.receiptIds.join(", ")}`),Zs({contractId:t,logs:n.logs,prefix:"	"}),n.failure&&wo.Logger.warn(`	Failure [${t}]: ${n.failure}`)}Xr.printTxOutcomeLogsAndFailures=Ol;function Zs({contractId:t,logs:e,prefix:r=""}){for(const n of e)wo.Logger.log(`${r}Log [${t}]: ${n}`)}Xr.printTxOutcomeLogs=Zs;var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.getTransactionLastResult=void 0;function Tl(t){if(typeof t.status=="object"&&typeof t.status.SuccessValue=="string"){const e=Buffer.from(t.status.SuccessValue,"base64").toString();try{return JSON.parse(e)}catch{return e}}return null}Ai.getTransactionLastResult=Tl;var Yr={};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Xs=Cl;function Cl(t){if(!t)throw new TypeError("argument namespace is required");function e(r){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=kl,e.property=Nl,e}function kl(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function Nl(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.sortBigIntAsc=void 0;function Ll(t,e){return t<e?-1:t>e?1:0}Rn.sortBigIntAsc=Ll;var Rl=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.diffEpochValidators=Yr.findSeatPrice=void 0;const Kl=Rl(Xs),Ys=Rn;function $l(t,e,r,n){return n&&n<49?Dl(t,e):(r||((0,Kl.default)("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]),jl(t,e,r))}Yr.findSeatPrice=$l;function Dl(t,e){const r=t.map(c=>BigInt(c.stake)).sort(Ys.sortBigIntAsc),n=BigInt(e),i=r.reduce((c,b)=>c+b);if(i<n)throw new Error("Stakes are below seats");let a=1n,o=i+1n;for(;a!==o-1n;){const c=(a+o)/2n;let b=!1,g=0n;for(let p=0;p<r.length;++p)if(g=g+r[p]/c,g>=n){a=c,b=!0;break}b||(o=c)}return a}function jl(t,e,r){if(r.length!=2)throw Error("minimumStakeRatio should have 2 elements");const n=t.map(a=>BigInt(a.stake)).sort(Ys.sortBigIntAsc),i=n.reduce((a,o)=>a+o);return t.length<e?i*BigInt(r[0])/BigInt(r[1]):n[0]+1n}function Ul(t,e){const r=new Map;t.forEach(i=>r.set(i.account_id,i));const n=new Set(e.map(i=>i.account_id));return{newValidators:e.filter(i=>!r.has(i.account_id)),removedValidators:t.filter(i=>!n.has(i.account_id)),changedValidators:e.filter(i=>r.has(i.account_id)&&r.get(i.account_id).stake!=i.stake).map(i=>({current:r.get(i.account_id),next:i}))}}Yr.diffEpochValidators=Ul;(function(t){var e=X&&X.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var c=Object.getOwnPropertyDescriptor(i,a);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,c)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=X&&X.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(gi,t),r($o,t),r(Do,t),r(Xr,t),r(Ai,t),r(Yr,t),r(Uo,t),r(Rn,t)})(Qe);var Fo={},At={},Ei={},ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.output=ut.exists=ut.hash=ut.bytes=ut.bool=ut.number=void 0;function ri(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}ut.number=ri;function Qs(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}ut.bool=Qs;function qo(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}ut.bytes=qo;function eu(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ri(t.outputLen),ri(t.blockLen)}ut.hash=eu;function tu(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}ut.exists=tu;function ru(t,e){qo(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}ut.output=ru;const Fl={number:ri,bool:Qs,bytes:qo,hash:eu,exists:tu,output:ru};ut.default=Fl;var xi={},Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.crypto=void 0;Ii.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const e=Ii,r=q=>q instanceof Uint8Array,n=q=>new Uint8Array(q.buffer,q.byteOffset,q.byteLength);t.u8=n;const i=q=>new Uint32Array(q.buffer,q.byteOffset,Math.floor(q.byteLength/4));t.u32=i;const a=q=>new DataView(q.buffer,q.byteOffset,q.byteLength);t.createView=a;const o=(q,W)=>q<<32-W|q>>>W;if(t.rotr=o,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const c=Array.from({length:256},(q,W)=>W.toString(16).padStart(2,"0"));function b(q){if(!r(q))throw new Error("Uint8Array expected");let W="";for(let k=0;k<q.length;k++)W+=c[q[k]];return W}t.bytesToHex=b;function g(q){if(typeof q!="string")throw new Error("hex string expected, got "+typeof q);const W=q.length;if(W%2)throw new Error("padded hex string expected, got unpadded hex of length "+W);const k=new Uint8Array(W/2);for(let $=0;$<k.length;$++){const ee=$*2,M=q.slice(ee,ee+2),s=Number.parseInt(M,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");k[$]=s}return k}t.hexToBytes=g;const p=async()=>{};t.nextTick=p;async function v(q,W,k){let $=Date.now();for(let ee=0;ee<q;ee++){k(ee);const M=Date.now()-$;M>=0&&M<W||(await(0,t.nextTick)(),$+=M)}}t.asyncLoop=v;function A(q){if(typeof q!="string")throw new Error(`utf8ToBytes expected string, got ${typeof q}`);return new Uint8Array(new TextEncoder().encode(q))}t.utf8ToBytes=A;function E(q){if(typeof q=="string"&&(q=A(q)),!r(q))throw new Error(`expected Uint8Array, got ${typeof q}`);return q}t.toBytes=E;function B(...q){const W=new Uint8Array(q.reduce(($,ee)=>$+ee.length,0));let k=0;return q.forEach($=>{if(!r($))throw new Error("Uint8Array expected");W.set($,k),k+=$.length}),W}t.concatBytes=B;class T{clone(){return this._cloneInto()}}t.Hash=T;const L={}.toString;function R(q,W){if(W!==void 0&&L.call(W)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(q,W)}t.checkOpts=R;function z(q){const W=$=>q().update(E($)).digest(),k=q();return W.outputLen=k.outputLen,W.blockLen=k.blockLen,W.create=()=>q(),W}t.wrapConstructor=z;function F(q){const W=($,ee)=>q(ee).update(E($)).digest(),k=q({});return W.outputLen=k.outputLen,W.blockLen=k.blockLen,W.create=$=>q($),W}t.wrapConstructorWithOpts=F;function Z(q){const W=($,ee)=>q(ee).update(E($)).digest(),k=q({});return W.outputLen=k.outputLen,W.blockLen=k.blockLen,W.create=$=>q($),W}t.wrapXOFConstructorWithOpts=Z;function C(q=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(q));throw new Error("crypto.getRandomValues must be defined")}t.randomBytes=C})(xi);Object.defineProperty(Ei,"__esModule",{value:!0});Ei.SHA2=void 0;const Ka=ut,wn=xi;function ql(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),o=Number(r>>i&a),c=Number(r&a),b=n?4:0,g=n?0:4;t.setUint32(e+b,o,n),t.setUint32(e+g,c,n)}let zl=class extends wn.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,wn.createView)(this.buffer)}update(e){(0,Ka.exists)(this);const{view:r,buffer:n,blockLen:i}=this;e=(0,wn.toBytes)(e);const a=e.length;for(let o=0;o<a;){const c=Math.min(i-this.pos,a-o);if(c===i){const b=(0,wn.createView)(e);for(;i<=a-o;o+=i)this.process(b,o);continue}n.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,Ka.exists)(this),(0,Ka.output)(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:a}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let v=o;v<i;v++)r[v]=0;ql(n,i-8,BigInt(this.length*8),a),this.process(n,0);const c=(0,wn.createView)(e),b=this.outputLen;if(b%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=b/4,p=this.get();if(g>p.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<g;v++)c.setUint32(4*v,p[v],a)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:a,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=a,e.destroyed=o,i%r&&e.buffer.set(n),e}};Ei.SHA2=zl;var he={};Object.defineProperty(he,"__esModule",{value:!0});he.add5L=he.add5H=he.add4H=he.add4L=he.add3H=he.add3L=he.add=he.rotlBL=he.rotlBH=he.rotlSL=he.rotlSH=he.rotr32L=he.rotr32H=he.rotrBL=he.rotrBH=he.rotrSL=he.rotrSH=he.shrSL=he.shrSH=he.toBig=he.split=he.fromBig=void 0;const Gn=BigInt(2**32-1),So=BigInt(32);function zo(t,e=!1){return e?{h:Number(t&Gn),l:Number(t>>So&Gn)}:{h:Number(t>>So&Gn)|0,l:Number(t&Gn)|0}}he.fromBig=zo;function nu(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:a,l:o}=zo(t[i],e);[r[i],n[i]]=[a,o]}return[r,n]}he.split=nu;const iu=(t,e)=>BigInt(t>>>0)<<So|BigInt(e>>>0);he.toBig=iu;const au=(t,e,r)=>t>>>r;he.shrSH=au;const ou=(t,e,r)=>t<<32-r|e>>>r;he.shrSL=ou;const cu=(t,e,r)=>t>>>r|e<<32-r;he.rotrSH=cu;const su=(t,e,r)=>t<<32-r|e>>>r;he.rotrSL=su;const uu=(t,e,r)=>t<<64-r|e>>>r-32;he.rotrBH=uu;const fu=(t,e,r)=>t>>>r-32|e<<64-r;he.rotrBL=fu;const du=(t,e)=>e;he.rotr32H=du;const lu=(t,e)=>t;he.rotr32L=lu;const hu=(t,e,r)=>t<<r|e>>>32-r;he.rotlSH=hu;const bu=(t,e,r)=>e<<r|t>>>32-r;he.rotlSL=bu;const pu=(t,e,r)=>e<<r-32|t>>>64-r;he.rotlBH=pu;const yu=(t,e,r)=>t<<r-32|e>>>64-r;he.rotlBL=yu;function vu(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}he.add=vu;const gu=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);he.add3L=gu;const mu=(t,e,r,n)=>e+r+n+(t/2**32|0)|0;he.add3H=mu;const _u=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0);he.add4L=_u;const wu=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0;he.add4H=wu;const Su=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0);he.add5L=Su;const Au=(t,e,r,n,i,a)=>e+r+n+i+a+(t/2**32|0)|0;he.add5H=Au;const Hl={fromBig:zo,split:nu,toBig:iu,shrSH:au,shrSL:ou,rotrSH:cu,rotrSL:su,rotrBH:uu,rotrBL:fu,rotr32H:du,rotr32L:lu,rotlSH:hu,rotlSL:bu,rotlBH:pu,rotlBL:yu,add:vu,add3L:gu,add3H:mu,add4L:_u,add4H:wu,add5H:Au,add5L:Su};he.default=Hl;Object.defineProperty(At,"__esModule",{value:!0});At.sha384=At.sha512_256=At.sha512_224=At.sha512=At.SHA512=void 0;const Gl=Ei,we=he,Mi=xi,[Vl,Jl]=we.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),or=new Uint32Array(80),cr=new Uint32Array(80);let Kn=class extends Gl.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:a,Cl:o,Dh:c,Dl:b,Eh:g,El:p,Fh:v,Fl:A,Gh:E,Gl:B,Hh:T,Hl:L}=this;return[e,r,n,i,a,o,c,b,g,p,v,A,E,B,T,L]}set(e,r,n,i,a,o,c,b,g,p,v,A,E,B,T,L){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=a|0,this.Cl=o|0,this.Dh=c|0,this.Dl=b|0,this.Eh=g|0,this.El=p|0,this.Fh=v|0,this.Fl=A|0,this.Gh=E|0,this.Gl=B|0,this.Hh=T|0,this.Hl=L|0}process(e,r){for(let F=0;F<16;F++,r+=4)or[F]=e.getUint32(r),cr[F]=e.getUint32(r+=4);for(let F=16;F<80;F++){const Z=or[F-15]|0,C=cr[F-15]|0,q=we.default.rotrSH(Z,C,1)^we.default.rotrSH(Z,C,8)^we.default.shrSH(Z,C,7),W=we.default.rotrSL(Z,C,1)^we.default.rotrSL(Z,C,8)^we.default.shrSL(Z,C,7),k=or[F-2]|0,$=cr[F-2]|0,ee=we.default.rotrSH(k,$,19)^we.default.rotrBH(k,$,61)^we.default.shrSH(k,$,6),M=we.default.rotrSL(k,$,19)^we.default.rotrBL(k,$,61)^we.default.shrSL(k,$,6),s=we.default.add4L(W,M,cr[F-7],cr[F-16]),d=we.default.add4H(s,q,ee,or[F-7],or[F-16]);or[F]=d|0,cr[F]=s|0}let{Ah:n,Al:i,Bh:a,Bl:o,Ch:c,Cl:b,Dh:g,Dl:p,Eh:v,El:A,Fh:E,Fl:B,Gh:T,Gl:L,Hh:R,Hl:z}=this;for(let F=0;F<80;F++){const Z=we.default.rotrSH(v,A,14)^we.default.rotrSH(v,A,18)^we.default.rotrBH(v,A,41),C=we.default.rotrSL(v,A,14)^we.default.rotrSL(v,A,18)^we.default.rotrBL(v,A,41),q=v&E^~v&T,W=A&B^~A&L,k=we.default.add5L(z,C,W,Jl[F],cr[F]),$=we.default.add5H(k,R,Z,q,Vl[F],or[F]),ee=k|0,M=we.default.rotrSH(n,i,28)^we.default.rotrBH(n,i,34)^we.default.rotrBH(n,i,39),s=we.default.rotrSL(n,i,28)^we.default.rotrBL(n,i,34)^we.default.rotrBL(n,i,39),d=n&a^n&c^a&c,h=i&o^i&b^o&b;R=T|0,z=L|0,T=E|0,L=B|0,E=v|0,B=A|0,{h:v,l:A}=we.default.add(g|0,p|0,$|0,ee|0),g=c|0,p=b|0,c=a|0,b=o|0,a=n|0,o=i|0;const y=we.default.add3L(ee,s,h);n=we.default.add3H(y,$,M,d),i=y|0}({h:n,l:i}=we.default.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:a,l:o}=we.default.add(this.Bh|0,this.Bl|0,a|0,o|0),{h:c,l:b}=we.default.add(this.Ch|0,this.Cl|0,c|0,b|0),{h:g,l:p}=we.default.add(this.Dh|0,this.Dl|0,g|0,p|0),{h:v,l:A}=we.default.add(this.Eh|0,this.El|0,v|0,A|0),{h:E,l:B}=we.default.add(this.Fh|0,this.Fl|0,E|0,B|0),{h:T,l:L}=we.default.add(this.Gh|0,this.Gl|0,T|0,L|0),{h:R,l:z}=we.default.add(this.Hh|0,this.Hl|0,R|0,z|0),this.set(n,i,a,o,c,b,g,p,v,A,E,B,T,L,R,z)}roundClean(){or.fill(0),cr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};At.SHA512=Kn;class Wl extends Kn{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class Zl extends Kn{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}let Xl=class extends Kn{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};At.sha512=(0,Mi.wrapConstructor)(()=>new Kn);At.sha512_224=(0,Mi.wrapConstructor)(()=>new Wl);At.sha512_256=(0,Mi.wrapConstructor)(()=>new Zl);At.sha384=(0,Mi.wrapConstructor)(()=>new Xl);var Pi={},pe={},ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.validateObject=ye.createHmacDrbg=ye.bitMask=ye.bitSet=ye.bitGet=ye.bitLen=ye.utf8ToBytes=ye.equalBytes=ye.concatBytes=ye.ensureBytes=ye.numberToVarBytesBE=ye.numberToBytesLE=ye.numberToBytesBE=ye.bytesToNumberLE=ye.bytesToNumberBE=ye.hexToBytes=ye.hexToNumber=ye.numberToHexUnpadded=ye.bytesToHex=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Eu=BigInt(0),Bi=BigInt(1),Yl=BigInt(2),Oi=t=>t instanceof Uint8Array,Ql=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ho(t){if(!Oi(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Ql[t[r]];return e}ye.bytesToHex=Ho;function xu(t){const e=t.toString(16);return e.length&1?`0${e}`:e}ye.numberToHexUnpadded=xu;function Go(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}ye.hexToNumber=Go;function Ti(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let n=0;n<r.length;n++){const i=n*2,a=t.slice(i,i+2),o=Number.parseInt(a,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[n]=o}return r}ye.hexToBytes=Ti;function eh(t){return Go(Ho(t))}ye.bytesToNumberBE=eh;function th(t){if(!Oi(t))throw new Error("Uint8Array expected");return Go(Ho(Uint8Array.from(t).reverse()))}ye.bytesToNumberLE=th;function Iu(t,e){return Ti(t.toString(16).padStart(e*2,"0"))}ye.numberToBytesBE=Iu;function rh(t,e){return Iu(t,e).reverse()}ye.numberToBytesLE=rh;function nh(t){return Ti(xu(t))}ye.numberToVarBytesBE=nh;function ih(t,e,r){let n;if(typeof e=="string")try{n=Ti(e)}catch(a){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${a}`)}else if(Oi(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}ye.ensureBytes=ih;function Mu(...t){const e=new Uint8Array(t.reduce((n,i)=>n+i.length,0));let r=0;return t.forEach(n=>{if(!Oi(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}ye.concatBytes=Mu;function ah(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}ye.equalBytes=ah;function oh(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}ye.utf8ToBytes=oh;function ch(t){let e;for(e=0;t>Eu;t>>=Bi,e+=1);return e}ye.bitLen=ch;function sh(t,e){return t>>BigInt(e)&Bi}ye.bitGet=sh;const uh=(t,e,r)=>t|(r?Bi:Eu)<<BigInt(e);ye.bitSet=uh;const fh=t=>(Yl<<BigInt(t-1))-Bi;ye.bitMask=fh;const $a=t=>new Uint8Array(t),Jc=t=>Uint8Array.from(t);function dh(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=$a(t),i=$a(t),a=0;const o=()=>{n.fill(1),i.fill(0),a=0},c=(...v)=>r(i,n,...v),b=(v=$a())=>{i=c(Jc([0]),v),n=c(),v.length!==0&&(i=c(Jc([1]),v),n=c())},g=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let v=0;const A=[];for(;v<e;){n=c();const E=n.slice();A.push(E),v+=n.length}return Mu(...A)};return(v,A)=>{o(),b(v);let E;for(;!(E=A(g()));)b();return o(),E}}ye.createHmacDrbg=dh;const lh={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function hh(t,e,r={}){const n=(i,a,o)=>{const c=lh[a];if(typeof c!="function")throw new Error(`Invalid validator "${a}", expected function`);const b=t[i];if(!(o&&b===void 0)&&!c(b,t))throw new Error(`Invalid param ${String(i)}=${b} (${typeof b}), expected ${a}`)};for(const[i,a]of Object.entries(e))n(i,a,!1);for(const[i,a]of Object.entries(r))n(i,a,!0);return t}ye.validateObject=hh;Object.defineProperty(pe,"__esModule",{value:!0});pe.mapHashToField=pe.getMinHashLength=pe.getFieldBytesLength=pe.hashToPrivateScalar=pe.FpSqrtEven=pe.FpSqrtOdd=pe.Field=pe.nLength=pe.FpIsSquare=pe.FpDiv=pe.FpInvertBatch=pe.FpPow=pe.validateField=pe.isNegativeLE=pe.FpSqrt=pe.tonelliShanks=pe.invert=pe.pow2=pe.pow=pe.mod=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vt=ye,et=BigInt(0),Te=BigInt(1),br=BigInt(2),bh=BigInt(3),Ao=BigInt(4),Wc=BigInt(5),Zc=BigInt(8);BigInt(9);BigInt(16);function yt(t,e){const r=t%e;return r>=et?r:e+r}pe.mod=yt;function Pu(t,e,r){if(r<=et||e<et)throw new Error("Expected power/modulo > 0");if(r===Te)return et;let n=Te;for(;e>et;)e&Te&&(n=n*t%r),t=t*t%r,e>>=Te;return n}pe.pow=Pu;function ph(t,e,r){let n=t;for(;e-- >et;)n*=n,n%=r;return n}pe.pow2=ph;function ni(t,e){if(t===et||e<=et)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=yt(t,e),n=e,i=et,a=Te;for(;r!==et;){const c=n/r,b=n%r,g=i-a*c;n=r,r=b,i=a,a=g}if(n!==Te)throw new Error("invert: does not exist");return yt(i,e)}pe.invert=ni;function Bu(t){const e=(t-Te)/br;let r,n,i;for(r=t-Te,n=0;r%br===et;r/=br,n++);for(i=br;i<t&&Pu(i,e,t)!==t-Te;i++);if(n===1){const o=(t+Te)/Ao;return function(b,g){const p=b.pow(g,o);if(!b.eql(b.sqr(p),g))throw new Error("Cannot find square root");return p}}const a=(r+Te)/br;return function(c,b){if(c.pow(b,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let g=n,p=c.pow(c.mul(c.ONE,i),r),v=c.pow(b,a),A=c.pow(b,r);for(;!c.eql(A,c.ONE);){if(c.eql(A,c.ZERO))return c.ZERO;let E=1;for(let T=c.sqr(A);E<g&&!c.eql(T,c.ONE);E++)T=c.sqr(T);const B=c.pow(p,Te<<BigInt(g-E-1));p=c.sqr(B),v=c.mul(v,B),A=c.mul(A,p),g=E}return v}}pe.tonelliShanks=Bu;function Ou(t){if(t%Ao===bh){const e=(t+Te)/Ao;return function(n,i){const a=n.pow(i,e);if(!n.eql(n.sqr(a),i))throw new Error("Cannot find square root");return a}}if(t%Zc===Wc){const e=(t-Wc)/Zc;return function(n,i){const a=n.mul(i,br),o=n.pow(a,e),c=n.mul(i,o),b=n.mul(n.mul(c,br),o),g=n.mul(c,n.sub(b,n.ONE));if(!n.eql(n.sqr(g),i))throw new Error("Cannot find square root");return g}}return Bu(t)}pe.FpSqrt=Ou;const yh=(t,e)=>(yt(t,e)&Te)===Te;pe.isNegativeLE=yh;const vh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gh(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=vh.reduce((n,i)=>(n[i]="function",n),e);return(0,vt.validateObject)(t,r)}pe.validateField=gh;function Tu(t,e,r){if(r<et)throw new Error("Expected power > 0");if(r===et)return t.ONE;if(r===Te)return e;let n=t.ONE,i=e;for(;r>et;)r&Te&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Te;return n}pe.FpPow=Tu;function Cu(t,e){const r=new Array(e.length),n=e.reduce((a,o,c)=>t.is0(o)?a:(r[c]=a,t.mul(a,o)),t.ONE),i=t.inv(n);return e.reduceRight((a,o,c)=>t.is0(o)?a:(r[c]=t.mul(a,r[c]),t.mul(a,o)),i),r}pe.FpInvertBatch=Cu;function mh(t,e,r){return t.mul(e,typeof r=="bigint"?ni(r,t.ORDER):t.inv(r))}pe.FpDiv=mh;function _h(t){const e=(t.ORDER-Te)/br;return r=>{const n=t.pow(r,e);return t.eql(n,t.ZERO)||t.eql(n,t.ONE)}}pe.FpIsSquare=_h;function Vo(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}pe.nLength=Vo;function wh(t,e,r=!1,n={}){if(t<=et)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:i,nByteLength:a}=Vo(t,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Ou(t),c=Object.freeze({ORDER:t,BITS:i,BYTES:a,MASK:(0,vt.bitMask)(i),ZERO:et,ONE:Te,create:b=>yt(b,t),isValid:b=>{if(typeof b!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof b}`);return et<=b&&b<t},is0:b=>b===et,isOdd:b=>(b&Te)===Te,neg:b=>yt(-b,t),eql:(b,g)=>b===g,sqr:b=>yt(b*b,t),add:(b,g)=>yt(b+g,t),sub:(b,g)=>yt(b-g,t),mul:(b,g)=>yt(b*g,t),pow:(b,g)=>Tu(c,b,g),div:(b,g)=>yt(b*ni(g,t),t),sqrN:b=>b*b,addN:(b,g)=>b+g,subN:(b,g)=>b-g,mulN:(b,g)=>b*g,inv:b=>ni(b,t),sqrt:n.sqrt||(b=>o(c,b)),invertBatch:b=>Cu(c,b),cmov:(b,g,p)=>p?g:b,toBytes:b=>r?(0,vt.numberToBytesLE)(b,a):(0,vt.numberToBytesBE)(b,a),fromBytes:b=>{if(b.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${b.length}`);return r?(0,vt.bytesToNumberLE)(b):(0,vt.bytesToNumberBE)(b)}});return Object.freeze(c)}pe.Field=wh;function Sh(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);return t.isOdd(r)?r:t.neg(r)}pe.FpSqrtOdd=Sh;function Ah(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}pe.FpSqrtEven=Ah;function Eh(t,e,r=!1){t=(0,vt.ensureBytes)("privateHash",t);const n=t.length,i=Vo(e).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);const a=r?(0,vt.bytesToNumberLE)(t):(0,vt.bytesToNumberBE)(t);return yt(a,e-Te)+Te}pe.hashToPrivateScalar=Eh;function Jo(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}pe.getFieldBytesLength=Jo;function ku(t){const e=Jo(t);return e+Math.ceil(e/2)}pe.getMinHashLength=ku;function xh(t,e,r=!1){const n=t.length,i=Jo(e),a=ku(e);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);const o=r?(0,vt.bytesToNumberBE)(t):(0,vt.bytesToNumberLE)(t),c=yt(o,e-Te)+Te;return r?(0,vt.numberToBytesLE)(c,i):(0,vt.numberToBytesBE)(c,i)}pe.mapHashToField=xh;var Qr={};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.validateBasic=Qr.wNAF=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xc=pe,Ih=ye,Mh=BigInt(0),Da=BigInt(1);function Ph(t,e){const r=(i,a)=>{const o=a.negate();return i?o:a},n=i=>{const a=Math.ceil(e/i)+1,o=2**(i-1);return{windows:a,windowSize:o}};return{constTimeNegate:r,unsafeLadder(i,a){let o=t.ZERO,c=i;for(;a>Mh;)a&Da&&(o=o.add(c)),c=c.double(),a>>=Da;return o},precomputeWindow(i,a){const{windows:o,windowSize:c}=n(a),b=[];let g=i,p=g;for(let v=0;v<o;v++){p=g,b.push(p);for(let A=1;A<c;A++)p=p.add(g),b.push(p);g=p.double()}return b},wNAF(i,a,o){const{windows:c,windowSize:b}=n(i);let g=t.ZERO,p=t.BASE;const v=BigInt(2**i-1),A=2**i,E=BigInt(i);for(let B=0;B<c;B++){const T=B*b;let L=Number(o&v);o>>=E,L>b&&(L-=A,o+=Da);const R=T,z=T+Math.abs(L)-1,F=B%2!==0,Z=L<0;L===0?p=p.add(r(F,a[R])):g=g.add(r(Z,a[z]))}return{p:g,f:p}},wNAFCached(i,a,o,c){const b=i._WINDOW_SIZE||1;let g=a.get(i);return g||(g=this.precomputeWindow(i,b),b!==1&&a.set(i,c(g))),this.wNAF(b,g,o)}}}Qr.wNAF=Ph;function Bh(t){return(0,Xc.validateField)(t.Fp),(0,Ih.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,Xc.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}Qr.validateBasic=Bh;Object.defineProperty(Pi,"__esModule",{value:!0});Pi.twistedEdwards=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oh=pe,Yt=ye,sr=ye,Nu=Qr,Bt=BigInt(0),pt=BigInt(1),Vn=BigInt(2),Th=BigInt(8),Ch={zip215:!0};function kh(t){const e=(0,Nu.validateBasic)(t);return Yt.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Nh(t){const e=kh(t),{Fp:r,n,prehash:i,hash:a,randomBytes:o,nByteLength:c,h:b}=e,g=Vn<<BigInt(c*8)-pt,p=r.create,v=e.uvRatio||((I,m)=>{try{return{isValid:!0,value:r.sqrt(I*r.inv(m))}}catch{return{isValid:!1,value:Bt}}}),A=e.adjustScalarBytes||(I=>I),E=e.domain||((I,m,u)=>{if(m.length||u)throw new Error("Contexts/pre-hash are not supported");return I}),B=I=>typeof I=="bigint"&&Bt<I,T=(I,m)=>B(I)&&B(m)&&I<m,L=I=>I===Bt||T(I,g);function R(I,m){if(T(I,m))return I;throw new Error(`Expected valid scalar < ${m}, got ${typeof I} ${I}`)}function z(I){return I===Bt?I:R(I,n)}const F=new Map;function Z(I){if(!(I instanceof C))throw new Error("ExtendedPoint expected")}class C{constructor(m,u,w,j){if(this.ex=m,this.ey=u,this.ez=w,this.et=j,!L(m))throw new Error("x required");if(!L(u))throw new Error("y required");if(!L(w))throw new Error("z required");if(!L(j))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof C)throw new Error("extended point not allowed");const{x:u,y:w}=m||{};if(!L(u)||!L(w))throw new Error("invalid affine point");return new C(u,w,pt,p(u*w))}static normalizeZ(m){const u=r.invertBatch(m.map(w=>w.ez));return m.map((w,j)=>w.toAffine(u[j])).map(C.fromAffine)}_setWindowSize(m){this._WINDOW_SIZE=m,F.delete(this)}assertValidity(){const{a:m,d:u}=e;if(this.is0())throw new Error("bad point: ZERO");const{ex:w,ey:j,ez:H,et:U}=this,ne=p(w*w),V=p(j*j),J=p(H*H),be=p(J*J),re=p(ne*m),le=p(J*p(re+V)),Q=p(be+p(u*p(ne*V)));if(le!==Q)throw new Error("bad point: equation left != right (1)");const D=p(w*j),G=p(H*U);if(D!==G)throw new Error("bad point: equation left != right (2)")}equals(m){Z(m);const{ex:u,ey:w,ez:j}=this,{ex:H,ey:U,ez:ne}=m,V=p(u*ne),J=p(H*j),be=p(w*ne),re=p(U*j);return V===J&&be===re}is0(){return this.equals(C.ZERO)}negate(){return new C(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:m}=e,{ex:u,ey:w,ez:j}=this,H=p(u*u),U=p(w*w),ne=p(Vn*p(j*j)),V=p(m*H),J=u+w,be=p(p(J*J)-H-U),re=V+U,le=re-ne,Q=V-U,D=p(be*le),G=p(re*Q),ce=p(be*Q),ae=p(le*re);return new C(D,G,ae,ce)}add(m){Z(m);const{a:u,d:w}=e,{ex:j,ey:H,ez:U,et:ne}=this,{ex:V,ey:J,ez:be,et:re}=m;if(u===BigInt(-1)){const oe=p((H-j)*(J+V)),Pe=p((H+j)*(J-V)),_e=p(Pe-oe);if(_e===Bt)return this.double();const ge=p(U*Vn*re),Re=p(ne*Vn*be),S=Re+ge,f=Pe+oe,l=Re-ge,x=p(S*_e),O=p(f*l),N=p(S*l),K=p(_e*f);return new C(x,O,K,N)}const le=p(j*V),Q=p(H*J),D=p(ne*w*re),G=p(U*be),ce=p((j+H)*(V+J)-le-Q),ae=G-D,Y=G+D,te=p(Q-u*le),se=p(ce*ae),de=p(Y*te),ue=p(ce*te),ie=p(ae*Y);return new C(se,de,ie,ue)}subtract(m){return this.add(m.negate())}wNAF(m){return k.wNAFCached(this,F,m,C.normalizeZ)}multiply(m){const{p:u,f:w}=this.wNAF(R(m,n));return C.normalizeZ([u,w])[0]}multiplyUnsafe(m){let u=z(m);return u===Bt?W:this.equals(W)||u===pt?this:this.equals(q)?this.wNAF(u).p:k.unsafeLadder(this,u)}isSmallOrder(){return this.multiplyUnsafe(b).is0()}isTorsionFree(){return k.unsafeLadder(this,n).is0()}toAffine(m){const{ex:u,ey:w,ez:j}=this,H=this.is0();m==null&&(m=H?Th:r.inv(j));const U=p(u*m),ne=p(w*m),V=p(j*m);if(H)return{x:Bt,y:pt};if(V!==pt)throw new Error("invZ was invalid");return{x:U,y:ne}}clearCofactor(){const{h:m}=e;return m===pt?this:this.multiplyUnsafe(m)}static fromHex(m,u=!1){const{d:w,a:j}=e,H=r.BYTES;m=(0,sr.ensureBytes)("pointHex",m,H);const U=m.slice(),ne=m[H-1];U[H-1]=ne&-129;const V=Yt.bytesToNumberLE(U);V===Bt||(u?R(V,g):R(V,r.ORDER));const J=p(V*V),be=p(J-pt),re=p(w*J-j);let{isValid:le,value:Q}=v(be,re);if(!le)throw new Error("Point.fromHex: invalid y coordinate");const D=(Q&pt)===pt,G=(ne&128)!==0;if(!u&&Q===Bt&&G)throw new Error("Point.fromHex: x=0 and x_0=1");return G!==D&&(Q=p(-Q)),C.fromAffine({x:Q,y:V})}static fromPrivateKey(m){return M(m).point}toRawBytes(){const{x:m,y:u}=this.toAffine(),w=Yt.numberToBytesLE(u,r.BYTES);return w[w.length-1]|=m&pt?128:0,w}toHex(){return Yt.bytesToHex(this.toRawBytes())}}C.BASE=new C(e.Gx,e.Gy,pt,p(e.Gx*e.Gy)),C.ZERO=new C(Bt,pt,pt,Bt);const{BASE:q,ZERO:W}=C,k=(0,Nu.wNAF)(C,c*8);function $(I){return(0,Oh.mod)(I,n)}function ee(I){return $(Yt.bytesToNumberLE(I))}function M(I){const m=c;I=(0,sr.ensureBytes)("private key",I,m);const u=(0,sr.ensureBytes)("hashed private key",a(I),2*m),w=A(u.slice(0,m)),j=u.slice(m,2*m),H=ee(w),U=q.multiply(H),ne=U.toRawBytes();return{head:w,prefix:j,scalar:H,point:U,pointBytes:ne}}function s(I){return M(I).pointBytes}function d(I=new Uint8Array,...m){const u=Yt.concatBytes(...m);return ee(a(E(u,(0,sr.ensureBytes)("context",I),!!i)))}function h(I,m,u={}){I=(0,sr.ensureBytes)("message",I),i&&(I=i(I));const{prefix:w,scalar:j,pointBytes:H}=M(m),U=d(u.context,w,I),ne=q.multiply(U).toRawBytes(),V=d(u.context,ne,H,I),J=$(U+V*j);z(J);const be=Yt.concatBytes(ne,Yt.numberToBytesLE(J,r.BYTES));return(0,sr.ensureBytes)("result",be,c*2)}const y=Ch;function _(I,m,u,w=y){const{context:j,zip215:H}=w,U=r.BYTES;I=(0,sr.ensureBytes)("signature",I,2*U),m=(0,sr.ensureBytes)("message",m),i&&(m=i(m));const ne=Yt.bytesToNumberLE(I.slice(U,2*U));let V,J,be;try{V=C.fromHex(u,H),J=C.fromHex(I.slice(0,U),H),be=q.multiplyUnsafe(ne)}catch{return!1}if(!H&&V.isSmallOrder())return!1;const re=d(j,J.toRawBytes(),V.toRawBytes(),m);return J.add(V.multiplyUnsafe(re)).subtract(be).clearCofactor().equals(C.ZERO)}return q._setWindowSize(8),{CURVE:e,getPublicKey:s,sign:h,verify:_,ExtendedPoint:C,utils:{getExtendedPublicKey:M,randomPrivateKey:()=>o(r.BYTES),precompute(I=8,m=C.BASE){return m._setWindowSize(I),m.multiply(BigInt(3)),m}}}}Pi.twistedEdwards=Nh;var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.montgomery=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yc=pe,qr=ye,Sn=BigInt(0),ja=BigInt(1);function Lh(t){return(0,qr.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function Rh(t){const e=Lh(t),{P:r}=e,n=F=>(0,Yc.mod)(F,r),i=e.montgomeryBits,a=Math.ceil(i/8),o=e.nByteLength,c=e.adjustScalarBytes||(F=>F),b=e.powPminus2||(F=>(0,Yc.pow)(F,r-BigInt(2),r));function g(F,Z,C){const q=n(F*(Z-C));return Z=n(Z-q),C=n(C+q),[Z,C]}function p(F){if(typeof F=="bigint"&&Sn<=F&&F<r)return F;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const v=(e.a-BigInt(2))/BigInt(4);function A(F,Z){const C=p(F),q=p(Z),W=C;let k=ja,$=Sn,ee=C,M=ja,s=Sn,d;for(let y=BigInt(i-1);y>=Sn;y--){const _=q>>y&ja;s^=_,d=g(s,k,ee),k=d[0],ee=d[1],d=g(s,$,M),$=d[0],M=d[1],s=_;const P=k+$,I=n(P*P),m=k-$,u=n(m*m),w=I-u,j=ee+M,H=ee-M,U=n(H*P),ne=n(j*m),V=U+ne,J=U-ne;ee=n(V*V),M=n(W*n(J*J)),k=n(I*u),$=n(w*(I+n(v*w)))}d=g(s,k,ee),k=d[0],ee=d[1],d=g(s,$,M),$=d[0],M=d[1];const h=b($);return n(k*h)}function E(F){return(0,qr.numberToBytesLE)(n(F),a)}function B(F){const Z=(0,qr.ensureBytes)("u coordinate",F,a);return o===a&&(Z[o-1]&=127),(0,qr.bytesToNumberLE)(Z)}function T(F){const Z=(0,qr.ensureBytes)("scalar",F);if(Z.length!==a&&Z.length!==o)throw new Error(`Expected ${a} or ${o} bytes, got ${Z.length}`);return(0,qr.bytesToNumberLE)(c(Z))}function L(F,Z){const C=B(Z),q=T(F),W=A(C,q);if(W===Sn)throw new Error("Invalid private or public key received");return E(W)}const R=E(e.Gu);function z(F){return L(F,R)}return{scalarMult:L,scalarMultBase:z,getSharedSecret:(F,Z)=>L(F,Z),getPublicKey:F=>z(F),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:R}}Ci.montgomery=Rh;var Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.createHasher=Et.isogenyMap=Et.hash_to_field=Et.expand_message_xof=Et.expand_message_xmd=void 0;const Kh=pe,Nt=ye;function $h(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")return(0,Nt.utf8ToBytes)(t);throw new Error("DST must be Uint8Array or string")}const Dh=Nt.bytesToNumberBE;function hr(t,e){if(t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function jh(t,e){const r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function Cn(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected")}function Wo(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Lu(t,e,r,n){Cn(t),Cn(e),Wo(r),e.length>255&&(e=n((0,Nt.concatBytes)((0,Nt.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:a}=n,o=Math.ceil(r/i);if(o>255)throw new Error("Invalid xmd length");const c=(0,Nt.concatBytes)(e,hr(e.length,1)),b=hr(0,a),g=hr(r,2),p=new Array(o),v=n((0,Nt.concatBytes)(b,t,g,hr(0,1),c));p[0]=n((0,Nt.concatBytes)(v,hr(1,1),c));for(let E=1;E<=o;E++){const B=[jh(v,p[E-1]),hr(E+1,1),c];p[E]=n((0,Nt.concatBytes)(...B))}return(0,Nt.concatBytes)(...p).slice(0,r)}Et.expand_message_xmd=Lu;function Ru(t,e,r,n,i){if(Cn(t),Cn(e),Wo(r),e.length>255){const a=Math.ceil(2*n/8);e=i.create({dkLen:a}).update((0,Nt.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(hr(r,2)).update(e).update(hr(e.length,1)).digest()}Et.expand_message_xof=Ru;function Eo(t,e,r){(0,Nt.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:a,hash:o,expand:c,DST:b}=r;Cn(t),Wo(e);const g=$h(b),p=n.toString(2).length,v=Math.ceil((p+i)/8),A=e*a*v;let E;if(c==="xmd")E=Lu(t,g,A,o);else if(c==="xof")E=Ru(t,g,A,i,o);else if(c==="_internal_pass")E=t;else throw new Error('expand must be "xmd" or "xof"');const B=new Array(e);for(let T=0;T<e;T++){const L=new Array(a);for(let R=0;R<a;R++){const z=v*(R+T*a),F=E.subarray(z,z+v);L[R]=(0,Kh.mod)(Dh(F),n)}B[T]=L}return B}Et.hash_to_field=Eo;function Uh(t,e){const r=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[a,o,c,b]=r.map(g=>g.reduce((p,v)=>t.add(t.mul(p,n),v)));return n=t.div(a,o),i=t.mul(i,t.div(c,b)),{x:n,y:i}}}Et.isogenyMap=Uh;function Fh(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const a=Eo(n,2,{...r,DST:r.DST,...i}),o=t.fromAffine(e(a[0])),c=t.fromAffine(e(a[1])),b=o.add(c).clearCofactor();return b.assertValidity(),b},encodeToCurve(n,i){const a=Eo(n,1,{...r,DST:r.encodeDST,...i}),o=t.fromAffine(e(a[0])).clearCofactor();return o.assertValidity(),o}}}Et.createHasher=Fh;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomeryPriv=t.edwardsToMontgomery=t.edwardsToMontgomeryPub=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=At,r=xi,n=Pi,i=Ci,a=pe,o=ye,c=Et,b=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),g=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),p=BigInt(0),v=BigInt(1),A=BigInt(2),E=BigInt(5),B=BigInt(10),T=BigInt(20),L=BigInt(40),R=BigInt(80);function z(Q){const D=b,ce=Q*Q%D*Q%D,ae=(0,a.pow2)(ce,A,D)*ce%D,Y=(0,a.pow2)(ae,v,D)*Q%D,te=(0,a.pow2)(Y,E,D)*Y%D,se=(0,a.pow2)(te,B,D)*te%D,de=(0,a.pow2)(se,T,D)*se%D,ue=(0,a.pow2)(de,L,D)*de%D,ie=(0,a.pow2)(ue,R,D)*ue%D,oe=(0,a.pow2)(ie,R,D)*ue%D,Pe=(0,a.pow2)(oe,B,D)*te%D;return{pow_p_5_8:(0,a.pow2)(Pe,A,D)*Q%D,b2:ce}}function F(Q){return Q[0]&=248,Q[31]&=127,Q[31]|=64,Q}function Z(Q,D){const G=b,ce=(0,a.mod)(D*D*D,G),ae=(0,a.mod)(ce*ce*D,G),Y=z(Q*ae).pow_p_5_8;let te=(0,a.mod)(Q*ce*Y,G);const se=(0,a.mod)(D*te*te,G),de=te,ue=(0,a.mod)(te*g,G),ie=se===Q,oe=se===(0,a.mod)(-Q,G),Pe=se===(0,a.mod)(-Q*g,G);return ie&&(te=de),(oe||Pe)&&(te=ue),(0,a.isNegativeLE)(te,G)&&(te=(0,a.mod)(-te,G)),{isValid:ie||oe,value:te}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const C=(0,a.Field)(b,void 0,!0),q={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:C,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:r.randomBytes,adjustScalarBytes:F,uvRatio:Z};t.ed25519=(0,n.twistedEdwards)(q);function W(Q,D,G){if(D.length>255)throw new Error("Context is too big");return(0,r.concatBytes)((0,r.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([G?1:0,D.length]),D,Q)}t.ed25519ctx=(0,n.twistedEdwards)({...q,domain:W}),t.ed25519ph=(0,n.twistedEdwards)({...q,domain:W,prehash:e.sha512}),t.x25519=(0,i.montgomery)({P:b,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:Q=>{const D=b,{pow_p_5_8:G,b2:ce}=z(Q);return(0,a.mod)((0,a.pow2)(G,BigInt(3),D)*ce,D)},adjustScalarBytes:F,randomBytes:r.randomBytes});function k(Q){const{y:D}=t.ed25519.ExtendedPoint.fromHex(Q),G=BigInt(1);return C.toBytes(C.create((G+D)*C.inv(G-D)))}t.edwardsToMontgomeryPub=k,t.edwardsToMontgomery=k;function $(Q){const D=q.hash(Q.subarray(0,32));return q.adjustScalarBytes(D).subarray(0,32)}t.edwardsToMontgomeryPriv=$;const ee=(C.ORDER+BigInt(3))/BigInt(8),M=C.pow(A,ee),s=C.sqrt(C.neg(C.ONE)),d=(C.ORDER-BigInt(5))/BigInt(8),h=BigInt(486662);function y(Q){let D=C.sqr(Q);D=C.mul(D,A);let G=C.add(D,C.ONE),ce=C.neg(h),ae=C.sqr(G),Y=C.mul(ae,G),te=C.mul(D,h);te=C.mul(te,ce),te=C.add(te,ae),te=C.mul(te,ce);let se=C.sqr(Y);ae=C.sqr(se),se=C.mul(se,Y),se=C.mul(se,te),ae=C.mul(ae,se);let de=C.pow(ae,d);de=C.mul(de,se);let ue=C.mul(de,s);ae=C.sqr(de),ae=C.mul(ae,Y);let ie=C.eql(ae,te),oe=C.cmov(ue,de,ie),Pe=C.mul(ce,D),_e=C.mul(de,Q);_e=C.mul(_e,M);let ge=C.mul(_e,s),Re=C.mul(te,D);ae=C.sqr(_e),ae=C.mul(ae,Y);let S=C.eql(ae,Re),f=C.cmov(ge,_e,S);ae=C.sqr(oe),ae=C.mul(ae,Y);let l=C.eql(ae,te),x=C.cmov(Pe,ce,l),O=C.cmov(f,oe,l),N=C.isOdd(O);return O=C.cmov(O,C.neg(O),l!==N),{xMn:x,xMd:G,yMn:O,yMd:v}}const _=(0,a.FpSqrtEven)(C,C.neg(BigInt(486664)));function P(Q){const{xMn:D,xMd:G,yMn:ce,yMd:ae}=y(Q);let Y=C.mul(D,ae);Y=C.mul(Y,_);let te=C.mul(G,ce),se=C.sub(D,G),de=C.add(D,G),ue=C.mul(te,de),ie=C.eql(ue,C.ZERO);Y=C.cmov(Y,C.ZERO,ie),te=C.cmov(te,C.ONE,ie),se=C.cmov(se,C.ONE,ie),de=C.cmov(de,C.ONE,ie);const oe=C.invertBatch([te,de]);return{x:C.mul(Y,oe[0]),y:C.mul(se,oe[1])}}const I=(0,c.createHasher)(t.ed25519.ExtendedPoint,Q=>P(Q[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:C.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512});t.hashToCurve=I.hashToCurve,t.encodeToCurve=I.encodeToCurve;function m(Q){if(!(Q instanceof re))throw new Error("RistrettoPoint expected")}const u=g,w=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),j=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),H=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),U=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),ne=Q=>Z(v,Q),V=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),J=Q=>t.ed25519.CURVE.Fp.create((0,o.bytesToNumberLE)(Q)&V);function be(Q){const{d:D}=t.ed25519.CURVE,G=t.ed25519.CURVE.Fp.ORDER,ce=t.ed25519.CURVE.Fp.create,ae=ce(u*Q*Q),Y=ce((ae+v)*H);let te=BigInt(-1);const se=ce((te-D*ae)*ce(ae+D));let{isValid:de,value:ue}=Z(Y,se),ie=ce(ue*Q);(0,a.isNegativeLE)(ie,G)||(ie=ce(-ie)),de||(ue=ie),de||(te=ae);const oe=ce(te*(ae-v)*U-se),Pe=ue*ue,_e=ce((ue+ue)*se),ge=ce(oe*w),Re=ce(v-Pe),S=ce(v+Pe);return new t.ed25519.ExtendedPoint(ce(_e*S),ce(Re*ge),ce(ge*S),ce(_e*Re))}class re{constructor(D){this.ep=D}static fromAffine(D){return new re(t.ed25519.ExtendedPoint.fromAffine(D))}static hashToCurve(D){D=(0,o.ensureBytes)("ristrettoHash",D,64);const G=J(D.slice(0,32)),ce=be(G),ae=J(D.slice(32,64)),Y=be(ae);return new re(ce.add(Y))}static fromHex(D){D=(0,o.ensureBytes)("ristrettoHex",D,32);const{a:G,d:ce}=t.ed25519.CURVE,ae=t.ed25519.CURVE.Fp.ORDER,Y=t.ed25519.CURVE.Fp.create,te="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",se=J(D);if(!(0,o.equalBytes)((0,o.numberToBytesLE)(se,32),D)||(0,a.isNegativeLE)(se,ae))throw new Error(te);const de=Y(se*se),ue=Y(v+G*de),ie=Y(v-G*de),oe=Y(ue*ue),Pe=Y(ie*ie),_e=Y(G*ce*oe-Pe),{isValid:ge,value:Re}=ne(Y(_e*Pe)),S=Y(Re*ie),f=Y(Re*S*_e);let l=Y((se+se)*S);(0,a.isNegativeLE)(l,ae)&&(l=Y(-l));const x=Y(ue*f),O=Y(l*x);if(!ge||(0,a.isNegativeLE)(O,ae)||x===p)throw new Error(te);return new re(new t.ed25519.ExtendedPoint(l,x,v,O))}toRawBytes(){let{ex:D,ey:G,ez:ce,et:ae}=this.ep;const Y=t.ed25519.CURVE.Fp.ORDER,te=t.ed25519.CURVE.Fp.create,se=te(te(ce+G)*te(ce-G)),de=te(D*G),ue=te(de*de),{value:ie}=ne(te(se*ue)),oe=te(ie*se),Pe=te(ie*de),_e=te(oe*Pe*ae);let ge;if((0,a.isNegativeLE)(ae*_e,Y)){let S=te(G*u),f=te(D*u);D=S,G=f,ge=te(oe*j)}else ge=Pe;(0,a.isNegativeLE)(D*_e,Y)&&(G=te(-G));let Re=te((ce-G)*ge);return(0,a.isNegativeLE)(Re,Y)&&(Re=te(-Re)),(0,o.numberToBytesLE)(Re,32)}toHex(){return(0,o.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(D){m(D);const{ex:G,ey:ce}=this.ep,{ex:ae,ey:Y}=D.ep,te=t.ed25519.CURVE.Fp.create,se=te(G*Y)===te(ce*ae),de=te(ce*Y)===te(G*ae);return se||de}add(D){return m(D),new re(this.ep.add(D.ep))}subtract(D){return m(D),new re(this.ep.subtract(D.ep))}multiply(D){return new re(this.ep.multiply(D))}multiplyUnsafe(D){return new re(this.ep.multiplyUnsafe(D))}}t.RistrettoPoint=(re.BASE||(re.BASE=new re(t.ed25519.ExtendedPoint.BASE)),re.ZERO||(re.ZERO=new re(t.ed25519.ExtendedPoint.ZERO)),re);const le=(Q,D)=>{const G=D.DST,ce=typeof G=="string"?(0,r.utf8ToBytes)(G):G,ae=(0,c.expand_message_xmd)(Q,ce,64,e.sha512);return re.hashToCurve(ae)};t.hashToRistretto255=le,t.hash_to_ristretto255=t.hashToRistretto255})(Fo);var xo={exports:{}},Ua=65536,qh=4294967295;function zh(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Hh=Hs.Buffer,ii=window.crypto||window.msCrypto;ii&&ii.getRandomValues?xo.exports=Gh:xo.exports=zh;function Gh(t,e){if(t>qh)throw new RangeError("requested too many random bytes");var r=Hh.allocUnsafe(t);if(t>0)if(t>Ua)for(var n=0;n<t;n+=Ua)ii.getRandomValues(r.slice(n,n+Ua));else ii.getRandomValues(r);return typeof e=="function"?process.nextTick(function(){e(null,r)}):r}var Ku=xo.exports,un={};const xe={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function wt(t,e){if(!t)throw new Error(e)}function Ee(t,e,r){if(wt(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){const n=r.join(", "),i=`Expected ${t} to be an Uint8Array with length [${n}]`;wt(r.includes(e.length),i)}else{const n=`Expected ${t} to be an Uint8Array with length ${r}`;wt(e.length===r,n)}}function xr(t){wt(zr(t)==="Boolean","Expected compressed to be a Boolean")}function Ot(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),Ee("output",t,e),t}function zr(t){return Object.prototype.toString.call(t).slice(8,-1)}var Vh=t=>({contextRandomize(e){switch(wt(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&Ee("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(xe.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return Ee("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(Ee("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(xe.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(Ee("private key",e,32),Ee("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(xe.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(Ee("private key",e,32),Ee("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(xe.TWEAK_MUL)}},publicKeyVerify(e){return Ee("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,n){switch(Ee("private key",e,32),xr(r),n=Ot(n,r?33:65),t.publicKeyCreate(n,e)){case 0:return n;case 1:throw new Error(xe.SECKEY_INVALID);case 2:throw new Error(xe.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,n){switch(Ee("public key",e,[33,65]),xr(r),n=Ot(n,r?33:65),t.publicKeyConvert(n,e)){case 0:return n;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,n){switch(Ee("public key",e,[33,65]),xr(r),n=Ot(n,r?33:65),t.publicKeyNegate(n,e)){case 0:return n;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.IMPOSSIBLE_CASE);case 3:throw new Error(xe.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,n){wt(Array.isArray(e),"Expected public keys to be an Array"),wt(e.length>0,"Expected public keys array will have more than zero items");for(const i of e)Ee("public key",i,[33,65]);switch(xr(r),n=Ot(n,r?33:65),t.publicKeyCombine(n,e)){case 0:return n;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.PUBKEY_COMBINE);case 3:throw new Error(xe.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,n=!0,i){switch(Ee("public key",e,[33,65]),Ee("tweak",r,32),xr(n),i=Ot(i,n?33:65),t.publicKeyTweakAdd(i,e,r)){case 0:return i;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.TWEAK_ADD)}},publicKeyTweakMul(e,r,n=!0,i){switch(Ee("public key",e,[33,65]),Ee("tweak",r,32),xr(n),i=Ot(i,n?33:65),t.publicKeyTweakMul(i,e,r)){case 0:return i;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.TWEAK_MUL)}},signatureNormalize(e){switch(Ee("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(xe.SIG_PARSE)}},signatureExport(e,r){Ee("signature",e,64),r=Ot(r,72);const n={output:r,outputlen:72};switch(t.signatureExport(n,e)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(xe.SIG_PARSE);case 2:throw new Error(xe.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(Ee("signature",e),r=Ot(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(xe.SIG_PARSE);case 2:throw new Error(xe.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,n={},i){Ee("message",e,32),Ee("private key",r,32),wt(zr(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Ee("options.data",n.data),n.noncefn!==void 0&&wt(zr(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=Ot(i,64);const a={signature:i,recid:null};switch(t.ecdsaSign(a,e,r,n.data,n.noncefn)){case 0:return a;case 1:throw new Error(xe.SIGN);case 2:throw new Error(xe.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,n){switch(Ee("signature",e,64),Ee("message",r,32),Ee("public key",n,[33,65]),t.ecdsaVerify(e,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(xe.SIG_PARSE);case 2:throw new Error(xe.PUBKEY_PARSE)}},ecdsaRecover(e,r,n,i=!0,a){switch(Ee("signature",e,64),wt(zr(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),Ee("message",n,32),xr(i),a=Ot(a,i?33:65),t.ecdsaRecover(a,e,r,n)){case 0:return a;case 1:throw new Error(xe.SIG_PARSE);case 2:throw new Error(xe.RECOVER);case 3:throw new Error(xe.IMPOSSIBLE_CASE)}},ecdh(e,r,n={},i){switch(Ee("public key",e,[33,65]),Ee("private key",r,32),wt(zr(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Ee("options.data",n.data),n.hashfn!==void 0?(wt(zr(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&Ee("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&Ee("options.ybuf",n.ybuf,32),Ee("output",i)):i=Ot(i,32),t.ecdh(i,e,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.ECDH)}}}),$u={};const Jh="elliptic",Wh="6.5.7",Zh="EC cryptography",Xh="lib/elliptic.js",Yh=["lib"],Qh={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},e1={type:"git",url:"git@github.com:indutny/elliptic"},t1=["EC","Elliptic","curve","Cryptography"],r1="Fedor Indutny <fedor@indutny.com>",n1="MIT",i1={url:"https://github.com/indutny/elliptic/issues"},a1="https://github.com/indutny/elliptic",o1={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},c1={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},s1={name:Jh,version:Wh,description:Zh,main:Xh,files:Yh,scripts:Qh,repository:e1,keywords:t1,author:r1,license:n1,bugs:i1,homepage:a1,devDependencies:o1,dependencies:c1};var gt={},Zo={exports:{}};const u1={},f1=Object.freeze(Object.defineProperty({__proto__:null,default:u1},Symbol.toStringTag,{value:"Module"})),Xo=Ds(f1);Zo.exports;(function(t){(function(e,r){function n(M,s){if(!M)throw new Error(s||"Assertion failed")}function i(M,s){M.super_=s;var d=function(){};d.prototype=s.prototype,M.prototype=new d,M.prototype.constructor=M}function a(M,s,d){if(a.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((s==="le"||s==="be")&&(d=s,s=10),this._init(M||0,s||10,d||"be"))}typeof e=="object"?e.exports=a:r.BN=a,a.BN=a,a.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Xo.Buffer}catch{}a.isBN=function(s){return s instanceof a?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===a.wordSize&&Array.isArray(s.words)},a.max=function(s,d){return s.cmp(d)>0?s:d},a.min=function(s,d){return s.cmp(d)<0?s:d},a.prototype._init=function(s,d,h){if(typeof s=="number")return this._initNumber(s,d,h);if(typeof s=="object")return this._initArray(s,d,h);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),s=s.toString().replace(/\s+/g,"");var y=0;s[0]==="-"&&(y++,this.negative=1),y<s.length&&(d===16?this._parseHex(s,y,h):(this._parseBase(s,d,y),h==="le"&&this._initArray(this.toArray(),d,h)))},a.prototype._initNumber=function(s,d,h){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(n(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),d,h)},a.prototype._initArray=function(s,d,h){if(n(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var _,P,I=0;if(h==="be")for(y=s.length-1,_=0;y>=0;y-=3)P=s[y]|s[y-1]<<8|s[y-2]<<16,this.words[_]|=P<<I&67108863,this.words[_+1]=P>>>26-I&67108863,I+=24,I>=26&&(I-=26,_++);else if(h==="le")for(y=0,_=0;y<s.length;y+=3)P=s[y]|s[y+1]<<8|s[y+2]<<16,this.words[_]|=P<<I&67108863,this.words[_+1]=P>>>26-I&67108863,I+=24,I>=26&&(I-=26,_++);return this.strip()};function c(M,s){var d=M.charCodeAt(s);return d>=65&&d<=70?d-55:d>=97&&d<=102?d-87:d-48&15}function b(M,s,d){var h=c(M,d);return d-1>=s&&(h|=c(M,d-1)<<4),h}a.prototype._parseHex=function(s,d,h){this.length=Math.ceil((s.length-d)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var _=0,P=0,I;if(h==="be")for(y=s.length-1;y>=d;y-=2)I=b(s,d,y)<<_,this.words[P]|=I&67108863,_>=18?(_-=18,P+=1,this.words[P]|=I>>>26):_+=8;else{var m=s.length-d;for(y=m%2===0?d+1:d;y<s.length;y+=2)I=b(s,d,y)<<_,this.words[P]|=I&67108863,_>=18?(_-=18,P+=1,this.words[P]|=I>>>26):_+=8}this.strip()};function g(M,s,d,h){for(var y=0,_=Math.min(M.length,d),P=s;P<_;P++){var I=M.charCodeAt(P)-48;y*=h,I>=49?y+=I-49+10:I>=17?y+=I-17+10:y+=I}return y}a.prototype._parseBase=function(s,d,h){this.words=[0],this.length=1;for(var y=0,_=1;_<=67108863;_*=d)y++;y--,_=_/d|0;for(var P=s.length-h,I=P%y,m=Math.min(P,P-I)+h,u=0,w=h;w<m;w+=y)u=g(s,w,w+y,d),this.imuln(_),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(I!==0){var j=1;for(u=g(s,w,s.length,d),w=0;w<I;w++)j*=d;this.imuln(j),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},a.prototype.copy=function(s){s.words=new Array(this.length);for(var d=0;d<this.length;d++)s.words[d]=this.words[d];s.length=this.length,s.negative=this.negative,s.red=this.red},a.prototype.clone=function(){var s=new a(null);return this.copy(s),s},a.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(s,d){s=s||10,d=d|0||1;var h;if(s===16||s==="hex"){h="";for(var y=0,_=0,P=0;P<this.length;P++){var I=this.words[P],m=((I<<y|_)&16777215).toString(16);_=I>>>24-y&16777215,_!==0||P!==this.length-1?h=p[6-m.length]+m+h:h=m+h,y+=2,y>=26&&(y-=26,P--)}for(_!==0&&(h=_.toString(16)+h);h.length%d!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(s===(s|0)&&s>=2&&s<=36){var u=v[s],w=A[s];h="";var j=this.clone();for(j.negative=0;!j.isZero();){var H=j.modn(w).toString(s);j=j.idivn(w),j.isZero()?h=H+h:h=p[u-H.length]+H+h}for(this.isZero()&&(h="0"+h);h.length%d!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(s,d){return n(typeof o<"u"),this.toArrayLike(o,s,d)},a.prototype.toArray=function(s,d){return this.toArrayLike(Array,s,d)},a.prototype.toArrayLike=function(s,d,h){var y=this.byteLength(),_=h||Math.max(1,y);n(y<=_,"byte array longer than desired length"),n(_>0,"Requested array length <= 0"),this.strip();var P=d==="le",I=new s(_),m,u,w=this.clone();if(P){for(u=0;!w.isZero();u++)m=w.andln(255),w.iushrn(8),I[u]=m;for(;u<_;u++)I[u]=0}else{for(u=0;u<_-y;u++)I[u]=0;for(u=0;!w.isZero();u++)m=w.andln(255),w.iushrn(8),I[_-u-1]=m}return I},Math.clz32?a.prototype._countBits=function(s){return 32-Math.clz32(s)}:a.prototype._countBits=function(s){var d=s,h=0;return d>=4096&&(h+=13,d>>>=13),d>=64&&(h+=7,d>>>=7),d>=8&&(h+=4,d>>>=4),d>=2&&(h+=2,d>>>=2),h+d},a.prototype._zeroBits=function(s){if(s===0)return 26;var d=s,h=0;return d&8191||(h+=13,d>>>=13),d&127||(h+=7,d>>>=7),d&15||(h+=4,d>>>=4),d&3||(h+=2,d>>>=2),d&1||h++,h},a.prototype.bitLength=function(){var s=this.words[this.length-1],d=this._countBits(s);return(this.length-1)*26+d};function E(M){for(var s=new Array(M.bitLength()),d=0;d<s.length;d++){var h=d/26|0,y=d%26;s[d]=(M.words[h]&1<<y)>>>y}return s}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,d=0;d<this.length;d++){var h=this._zeroBits(this.words[d]);if(s+=h,h!==26)break}return s},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},a.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var d=0;d<s.length;d++)this.words[d]=this.words[d]|s.words[d];return this.strip()},a.prototype.ior=function(s){return n((this.negative|s.negative)===0),this.iuor(s)},a.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},a.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},a.prototype.iuand=function(s){var d;this.length>s.length?d=s:d=this;for(var h=0;h<d.length;h++)this.words[h]=this.words[h]&s.words[h];return this.length=d.length,this.strip()},a.prototype.iand=function(s){return n((this.negative|s.negative)===0),this.iuand(s)},a.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},a.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},a.prototype.iuxor=function(s){var d,h;this.length>s.length?(d=this,h=s):(d=s,h=this);for(var y=0;y<h.length;y++)this.words[y]=d.words[y]^h.words[y];if(this!==d)for(;y<d.length;y++)this.words[y]=d.words[y];return this.length=d.length,this.strip()},a.prototype.ixor=function(s){return n((this.negative|s.negative)===0),this.iuxor(s)},a.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},a.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},a.prototype.inotn=function(s){n(typeof s=="number"&&s>=0);var d=Math.ceil(s/26)|0,h=s%26;this._expand(d),h>0&&d--;for(var y=0;y<d;y++)this.words[y]=~this.words[y]&67108863;return h>0&&(this.words[y]=~this.words[y]&67108863>>26-h),this.strip()},a.prototype.notn=function(s){return this.clone().inotn(s)},a.prototype.setn=function(s,d){n(typeof s=="number"&&s>=0);var h=s/26|0,y=s%26;return this._expand(h+1),d?this.words[h]=this.words[h]|1<<y:this.words[h]=this.words[h]&~(1<<y),this.strip()},a.prototype.iadd=function(s){var d;if(this.negative!==0&&s.negative===0)return this.negative=0,d=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,d=this.isub(s),s.negative=1,d._normSign();var h,y;this.length>s.length?(h=this,y=s):(h=s,y=this);for(var _=0,P=0;P<y.length;P++)d=(h.words[P]|0)+(y.words[P]|0)+_,this.words[P]=d&67108863,_=d>>>26;for(;_!==0&&P<h.length;P++)d=(h.words[P]|0)+_,this.words[P]=d&67108863,_=d>>>26;if(this.length=h.length,_!==0)this.words[this.length]=_,this.length++;else if(h!==this)for(;P<h.length;P++)this.words[P]=h.words[P];return this},a.prototype.add=function(s){var d;return s.negative!==0&&this.negative===0?(s.negative=0,d=this.sub(s),s.negative^=1,d):s.negative===0&&this.negative!==0?(this.negative=0,d=s.sub(this),this.negative=1,d):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},a.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var d=this.iadd(s);return s.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var h=this.cmp(s);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,_;h>0?(y=this,_=s):(y=s,_=this);for(var P=0,I=0;I<_.length;I++)d=(y.words[I]|0)-(_.words[I]|0)+P,P=d>>26,this.words[I]=d&67108863;for(;P!==0&&I<y.length;I++)d=(y.words[I]|0)+P,P=d>>26,this.words[I]=d&67108863;if(P===0&&I<y.length&&y!==this)for(;I<y.length;I++)this.words[I]=y.words[I];return this.length=Math.max(this.length,I),y!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(s){return this.clone().isub(s)};function B(M,s,d){d.negative=s.negative^M.negative;var h=M.length+s.length|0;d.length=h,h=h-1|0;var y=M.words[0]|0,_=s.words[0]|0,P=y*_,I=P&67108863,m=P/67108864|0;d.words[0]=I;for(var u=1;u<h;u++){for(var w=m>>>26,j=m&67108863,H=Math.min(u,s.length-1),U=Math.max(0,u-M.length+1);U<=H;U++){var ne=u-U|0;y=M.words[ne]|0,_=s.words[U]|0,P=y*_+j,w+=P/67108864|0,j=P&67108863}d.words[u]=j|0,m=w|0}return m!==0?d.words[u]=m|0:d.length--,d.strip()}var T=function(s,d,h){var y=s.words,_=d.words,P=h.words,I=0,m,u,w,j=y[0]|0,H=j&8191,U=j>>>13,ne=y[1]|0,V=ne&8191,J=ne>>>13,be=y[2]|0,re=be&8191,le=be>>>13,Q=y[3]|0,D=Q&8191,G=Q>>>13,ce=y[4]|0,ae=ce&8191,Y=ce>>>13,te=y[5]|0,se=te&8191,de=te>>>13,ue=y[6]|0,ie=ue&8191,oe=ue>>>13,Pe=y[7]|0,_e=Pe&8191,ge=Pe>>>13,Re=y[8]|0,S=Re&8191,f=Re>>>13,l=y[9]|0,x=l&8191,O=l>>>13,N=_[0]|0,K=N&8191,fe=N>>>13,Ne=_[1]|0,ve=Ne&8191,me=Ne>>>13,Me=_[2]|0,Ke=Me&8191,$e=Me>>>13,Oc=_[3]|0,De=Oc&8191,je=Oc>>>13,Tc=_[4]|0,Ue=Tc&8191,Fe=Tc>>>13,Cc=_[5]|0,qe=Cc&8191,ze=Cc>>>13,kc=_[6]|0,He=kc&8191,Ge=kc>>>13,Nc=_[7]|0,Ve=Nc&8191,Je=Nc>>>13,Lc=_[8]|0,We=Lc&8191,Ze=Lc>>>13,Rc=_[9]|0,Xe=Rc&8191,Ye=Rc>>>13;h.negative=s.negative^d.negative,h.length=19,m=Math.imul(H,K),u=Math.imul(H,fe),u=u+Math.imul(U,K)|0,w=Math.imul(U,fe);var pa=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(pa>>>26)|0,pa&=67108863,m=Math.imul(V,K),u=Math.imul(V,fe),u=u+Math.imul(J,K)|0,w=Math.imul(J,fe),m=m+Math.imul(H,ve)|0,u=u+Math.imul(H,me)|0,u=u+Math.imul(U,ve)|0,w=w+Math.imul(U,me)|0;var ya=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(ya>>>26)|0,ya&=67108863,m=Math.imul(re,K),u=Math.imul(re,fe),u=u+Math.imul(le,K)|0,w=Math.imul(le,fe),m=m+Math.imul(V,ve)|0,u=u+Math.imul(V,me)|0,u=u+Math.imul(J,ve)|0,w=w+Math.imul(J,me)|0,m=m+Math.imul(H,Ke)|0,u=u+Math.imul(H,$e)|0,u=u+Math.imul(U,Ke)|0,w=w+Math.imul(U,$e)|0;var va=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(va>>>26)|0,va&=67108863,m=Math.imul(D,K),u=Math.imul(D,fe),u=u+Math.imul(G,K)|0,w=Math.imul(G,fe),m=m+Math.imul(re,ve)|0,u=u+Math.imul(re,me)|0,u=u+Math.imul(le,ve)|0,w=w+Math.imul(le,me)|0,m=m+Math.imul(V,Ke)|0,u=u+Math.imul(V,$e)|0,u=u+Math.imul(J,Ke)|0,w=w+Math.imul(J,$e)|0,m=m+Math.imul(H,De)|0,u=u+Math.imul(H,je)|0,u=u+Math.imul(U,De)|0,w=w+Math.imul(U,je)|0;var ga=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(ga>>>26)|0,ga&=67108863,m=Math.imul(ae,K),u=Math.imul(ae,fe),u=u+Math.imul(Y,K)|0,w=Math.imul(Y,fe),m=m+Math.imul(D,ve)|0,u=u+Math.imul(D,me)|0,u=u+Math.imul(G,ve)|0,w=w+Math.imul(G,me)|0,m=m+Math.imul(re,Ke)|0,u=u+Math.imul(re,$e)|0,u=u+Math.imul(le,Ke)|0,w=w+Math.imul(le,$e)|0,m=m+Math.imul(V,De)|0,u=u+Math.imul(V,je)|0,u=u+Math.imul(J,De)|0,w=w+Math.imul(J,je)|0,m=m+Math.imul(H,Ue)|0,u=u+Math.imul(H,Fe)|0,u=u+Math.imul(U,Ue)|0,w=w+Math.imul(U,Fe)|0;var ma=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(ma>>>26)|0,ma&=67108863,m=Math.imul(se,K),u=Math.imul(se,fe),u=u+Math.imul(de,K)|0,w=Math.imul(de,fe),m=m+Math.imul(ae,ve)|0,u=u+Math.imul(ae,me)|0,u=u+Math.imul(Y,ve)|0,w=w+Math.imul(Y,me)|0,m=m+Math.imul(D,Ke)|0,u=u+Math.imul(D,$e)|0,u=u+Math.imul(G,Ke)|0,w=w+Math.imul(G,$e)|0,m=m+Math.imul(re,De)|0,u=u+Math.imul(re,je)|0,u=u+Math.imul(le,De)|0,w=w+Math.imul(le,je)|0,m=m+Math.imul(V,Ue)|0,u=u+Math.imul(V,Fe)|0,u=u+Math.imul(J,Ue)|0,w=w+Math.imul(J,Fe)|0,m=m+Math.imul(H,qe)|0,u=u+Math.imul(H,ze)|0,u=u+Math.imul(U,qe)|0,w=w+Math.imul(U,ze)|0;var _a=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(_a>>>26)|0,_a&=67108863,m=Math.imul(ie,K),u=Math.imul(ie,fe),u=u+Math.imul(oe,K)|0,w=Math.imul(oe,fe),m=m+Math.imul(se,ve)|0,u=u+Math.imul(se,me)|0,u=u+Math.imul(de,ve)|0,w=w+Math.imul(de,me)|0,m=m+Math.imul(ae,Ke)|0,u=u+Math.imul(ae,$e)|0,u=u+Math.imul(Y,Ke)|0,w=w+Math.imul(Y,$e)|0,m=m+Math.imul(D,De)|0,u=u+Math.imul(D,je)|0,u=u+Math.imul(G,De)|0,w=w+Math.imul(G,je)|0,m=m+Math.imul(re,Ue)|0,u=u+Math.imul(re,Fe)|0,u=u+Math.imul(le,Ue)|0,w=w+Math.imul(le,Fe)|0,m=m+Math.imul(V,qe)|0,u=u+Math.imul(V,ze)|0,u=u+Math.imul(J,qe)|0,w=w+Math.imul(J,ze)|0,m=m+Math.imul(H,He)|0,u=u+Math.imul(H,Ge)|0,u=u+Math.imul(U,He)|0,w=w+Math.imul(U,Ge)|0;var wa=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(wa>>>26)|0,wa&=67108863,m=Math.imul(_e,K),u=Math.imul(_e,fe),u=u+Math.imul(ge,K)|0,w=Math.imul(ge,fe),m=m+Math.imul(ie,ve)|0,u=u+Math.imul(ie,me)|0,u=u+Math.imul(oe,ve)|0,w=w+Math.imul(oe,me)|0,m=m+Math.imul(se,Ke)|0,u=u+Math.imul(se,$e)|0,u=u+Math.imul(de,Ke)|0,w=w+Math.imul(de,$e)|0,m=m+Math.imul(ae,De)|0,u=u+Math.imul(ae,je)|0,u=u+Math.imul(Y,De)|0,w=w+Math.imul(Y,je)|0,m=m+Math.imul(D,Ue)|0,u=u+Math.imul(D,Fe)|0,u=u+Math.imul(G,Ue)|0,w=w+Math.imul(G,Fe)|0,m=m+Math.imul(re,qe)|0,u=u+Math.imul(re,ze)|0,u=u+Math.imul(le,qe)|0,w=w+Math.imul(le,ze)|0,m=m+Math.imul(V,He)|0,u=u+Math.imul(V,Ge)|0,u=u+Math.imul(J,He)|0,w=w+Math.imul(J,Ge)|0,m=m+Math.imul(H,Ve)|0,u=u+Math.imul(H,Je)|0,u=u+Math.imul(U,Ve)|0,w=w+Math.imul(U,Je)|0;var Sa=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(Sa>>>26)|0,Sa&=67108863,m=Math.imul(S,K),u=Math.imul(S,fe),u=u+Math.imul(f,K)|0,w=Math.imul(f,fe),m=m+Math.imul(_e,ve)|0,u=u+Math.imul(_e,me)|0,u=u+Math.imul(ge,ve)|0,w=w+Math.imul(ge,me)|0,m=m+Math.imul(ie,Ke)|0,u=u+Math.imul(ie,$e)|0,u=u+Math.imul(oe,Ke)|0,w=w+Math.imul(oe,$e)|0,m=m+Math.imul(se,De)|0,u=u+Math.imul(se,je)|0,u=u+Math.imul(de,De)|0,w=w+Math.imul(de,je)|0,m=m+Math.imul(ae,Ue)|0,u=u+Math.imul(ae,Fe)|0,u=u+Math.imul(Y,Ue)|0,w=w+Math.imul(Y,Fe)|0,m=m+Math.imul(D,qe)|0,u=u+Math.imul(D,ze)|0,u=u+Math.imul(G,qe)|0,w=w+Math.imul(G,ze)|0,m=m+Math.imul(re,He)|0,u=u+Math.imul(re,Ge)|0,u=u+Math.imul(le,He)|0,w=w+Math.imul(le,Ge)|0,m=m+Math.imul(V,Ve)|0,u=u+Math.imul(V,Je)|0,u=u+Math.imul(J,Ve)|0,w=w+Math.imul(J,Je)|0,m=m+Math.imul(H,We)|0,u=u+Math.imul(H,Ze)|0,u=u+Math.imul(U,We)|0,w=w+Math.imul(U,Ze)|0;var Aa=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(Aa>>>26)|0,Aa&=67108863,m=Math.imul(x,K),u=Math.imul(x,fe),u=u+Math.imul(O,K)|0,w=Math.imul(O,fe),m=m+Math.imul(S,ve)|0,u=u+Math.imul(S,me)|0,u=u+Math.imul(f,ve)|0,w=w+Math.imul(f,me)|0,m=m+Math.imul(_e,Ke)|0,u=u+Math.imul(_e,$e)|0,u=u+Math.imul(ge,Ke)|0,w=w+Math.imul(ge,$e)|0,m=m+Math.imul(ie,De)|0,u=u+Math.imul(ie,je)|0,u=u+Math.imul(oe,De)|0,w=w+Math.imul(oe,je)|0,m=m+Math.imul(se,Ue)|0,u=u+Math.imul(se,Fe)|0,u=u+Math.imul(de,Ue)|0,w=w+Math.imul(de,Fe)|0,m=m+Math.imul(ae,qe)|0,u=u+Math.imul(ae,ze)|0,u=u+Math.imul(Y,qe)|0,w=w+Math.imul(Y,ze)|0,m=m+Math.imul(D,He)|0,u=u+Math.imul(D,Ge)|0,u=u+Math.imul(G,He)|0,w=w+Math.imul(G,Ge)|0,m=m+Math.imul(re,Ve)|0,u=u+Math.imul(re,Je)|0,u=u+Math.imul(le,Ve)|0,w=w+Math.imul(le,Je)|0,m=m+Math.imul(V,We)|0,u=u+Math.imul(V,Ze)|0,u=u+Math.imul(J,We)|0,w=w+Math.imul(J,Ze)|0,m=m+Math.imul(H,Xe)|0,u=u+Math.imul(H,Ye)|0,u=u+Math.imul(U,Xe)|0,w=w+Math.imul(U,Ye)|0;var Ea=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(Ea>>>26)|0,Ea&=67108863,m=Math.imul(x,ve),u=Math.imul(x,me),u=u+Math.imul(O,ve)|0,w=Math.imul(O,me),m=m+Math.imul(S,Ke)|0,u=u+Math.imul(S,$e)|0,u=u+Math.imul(f,Ke)|0,w=w+Math.imul(f,$e)|0,m=m+Math.imul(_e,De)|0,u=u+Math.imul(_e,je)|0,u=u+Math.imul(ge,De)|0,w=w+Math.imul(ge,je)|0,m=m+Math.imul(ie,Ue)|0,u=u+Math.imul(ie,Fe)|0,u=u+Math.imul(oe,Ue)|0,w=w+Math.imul(oe,Fe)|0,m=m+Math.imul(se,qe)|0,u=u+Math.imul(se,ze)|0,u=u+Math.imul(de,qe)|0,w=w+Math.imul(de,ze)|0,m=m+Math.imul(ae,He)|0,u=u+Math.imul(ae,Ge)|0,u=u+Math.imul(Y,He)|0,w=w+Math.imul(Y,Ge)|0,m=m+Math.imul(D,Ve)|0,u=u+Math.imul(D,Je)|0,u=u+Math.imul(G,Ve)|0,w=w+Math.imul(G,Je)|0,m=m+Math.imul(re,We)|0,u=u+Math.imul(re,Ze)|0,u=u+Math.imul(le,We)|0,w=w+Math.imul(le,Ze)|0,m=m+Math.imul(V,Xe)|0,u=u+Math.imul(V,Ye)|0,u=u+Math.imul(J,Xe)|0,w=w+Math.imul(J,Ye)|0;var xa=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(xa>>>26)|0,xa&=67108863,m=Math.imul(x,Ke),u=Math.imul(x,$e),u=u+Math.imul(O,Ke)|0,w=Math.imul(O,$e),m=m+Math.imul(S,De)|0,u=u+Math.imul(S,je)|0,u=u+Math.imul(f,De)|0,w=w+Math.imul(f,je)|0,m=m+Math.imul(_e,Ue)|0,u=u+Math.imul(_e,Fe)|0,u=u+Math.imul(ge,Ue)|0,w=w+Math.imul(ge,Fe)|0,m=m+Math.imul(ie,qe)|0,u=u+Math.imul(ie,ze)|0,u=u+Math.imul(oe,qe)|0,w=w+Math.imul(oe,ze)|0,m=m+Math.imul(se,He)|0,u=u+Math.imul(se,Ge)|0,u=u+Math.imul(de,He)|0,w=w+Math.imul(de,Ge)|0,m=m+Math.imul(ae,Ve)|0,u=u+Math.imul(ae,Je)|0,u=u+Math.imul(Y,Ve)|0,w=w+Math.imul(Y,Je)|0,m=m+Math.imul(D,We)|0,u=u+Math.imul(D,Ze)|0,u=u+Math.imul(G,We)|0,w=w+Math.imul(G,Ze)|0,m=m+Math.imul(re,Xe)|0,u=u+Math.imul(re,Ye)|0,u=u+Math.imul(le,Xe)|0,w=w+Math.imul(le,Ye)|0;var Ia=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(Ia>>>26)|0,Ia&=67108863,m=Math.imul(x,De),u=Math.imul(x,je),u=u+Math.imul(O,De)|0,w=Math.imul(O,je),m=m+Math.imul(S,Ue)|0,u=u+Math.imul(S,Fe)|0,u=u+Math.imul(f,Ue)|0,w=w+Math.imul(f,Fe)|0,m=m+Math.imul(_e,qe)|0,u=u+Math.imul(_e,ze)|0,u=u+Math.imul(ge,qe)|0,w=w+Math.imul(ge,ze)|0,m=m+Math.imul(ie,He)|0,u=u+Math.imul(ie,Ge)|0,u=u+Math.imul(oe,He)|0,w=w+Math.imul(oe,Ge)|0,m=m+Math.imul(se,Ve)|0,u=u+Math.imul(se,Je)|0,u=u+Math.imul(de,Ve)|0,w=w+Math.imul(de,Je)|0,m=m+Math.imul(ae,We)|0,u=u+Math.imul(ae,Ze)|0,u=u+Math.imul(Y,We)|0,w=w+Math.imul(Y,Ze)|0,m=m+Math.imul(D,Xe)|0,u=u+Math.imul(D,Ye)|0,u=u+Math.imul(G,Xe)|0,w=w+Math.imul(G,Ye)|0;var Ma=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(Ma>>>26)|0,Ma&=67108863,m=Math.imul(x,Ue),u=Math.imul(x,Fe),u=u+Math.imul(O,Ue)|0,w=Math.imul(O,Fe),m=m+Math.imul(S,qe)|0,u=u+Math.imul(S,ze)|0,u=u+Math.imul(f,qe)|0,w=w+Math.imul(f,ze)|0,m=m+Math.imul(_e,He)|0,u=u+Math.imul(_e,Ge)|0,u=u+Math.imul(ge,He)|0,w=w+Math.imul(ge,Ge)|0,m=m+Math.imul(ie,Ve)|0,u=u+Math.imul(ie,Je)|0,u=u+Math.imul(oe,Ve)|0,w=w+Math.imul(oe,Je)|0,m=m+Math.imul(se,We)|0,u=u+Math.imul(se,Ze)|0,u=u+Math.imul(de,We)|0,w=w+Math.imul(de,Ze)|0,m=m+Math.imul(ae,Xe)|0,u=u+Math.imul(ae,Ye)|0,u=u+Math.imul(Y,Xe)|0,w=w+Math.imul(Y,Ye)|0;var Pa=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(Pa>>>26)|0,Pa&=67108863,m=Math.imul(x,qe),u=Math.imul(x,ze),u=u+Math.imul(O,qe)|0,w=Math.imul(O,ze),m=m+Math.imul(S,He)|0,u=u+Math.imul(S,Ge)|0,u=u+Math.imul(f,He)|0,w=w+Math.imul(f,Ge)|0,m=m+Math.imul(_e,Ve)|0,u=u+Math.imul(_e,Je)|0,u=u+Math.imul(ge,Ve)|0,w=w+Math.imul(ge,Je)|0,m=m+Math.imul(ie,We)|0,u=u+Math.imul(ie,Ze)|0,u=u+Math.imul(oe,We)|0,w=w+Math.imul(oe,Ze)|0,m=m+Math.imul(se,Xe)|0,u=u+Math.imul(se,Ye)|0,u=u+Math.imul(de,Xe)|0,w=w+Math.imul(de,Ye)|0;var Ba=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(Ba>>>26)|0,Ba&=67108863,m=Math.imul(x,He),u=Math.imul(x,Ge),u=u+Math.imul(O,He)|0,w=Math.imul(O,Ge),m=m+Math.imul(S,Ve)|0,u=u+Math.imul(S,Je)|0,u=u+Math.imul(f,Ve)|0,w=w+Math.imul(f,Je)|0,m=m+Math.imul(_e,We)|0,u=u+Math.imul(_e,Ze)|0,u=u+Math.imul(ge,We)|0,w=w+Math.imul(ge,Ze)|0,m=m+Math.imul(ie,Xe)|0,u=u+Math.imul(ie,Ye)|0,u=u+Math.imul(oe,Xe)|0,w=w+Math.imul(oe,Ye)|0;var Oa=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(Oa>>>26)|0,Oa&=67108863,m=Math.imul(x,Ve),u=Math.imul(x,Je),u=u+Math.imul(O,Ve)|0,w=Math.imul(O,Je),m=m+Math.imul(S,We)|0,u=u+Math.imul(S,Ze)|0,u=u+Math.imul(f,We)|0,w=w+Math.imul(f,Ze)|0,m=m+Math.imul(_e,Xe)|0,u=u+Math.imul(_e,Ye)|0,u=u+Math.imul(ge,Xe)|0,w=w+Math.imul(ge,Ye)|0;var Ta=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(Ta>>>26)|0,Ta&=67108863,m=Math.imul(x,We),u=Math.imul(x,Ze),u=u+Math.imul(O,We)|0,w=Math.imul(O,Ze),m=m+Math.imul(S,Xe)|0,u=u+Math.imul(S,Ye)|0,u=u+Math.imul(f,Xe)|0,w=w+Math.imul(f,Ye)|0;var Ca=(I+m|0)+((u&8191)<<13)|0;I=(w+(u>>>13)|0)+(Ca>>>26)|0,Ca&=67108863,m=Math.imul(x,Xe),u=Math.imul(x,Ye),u=u+Math.imul(O,Xe)|0,w=Math.imul(O,Ye);var ka=(I+m|0)+((u&8191)<<13)|0;return I=(w+(u>>>13)|0)+(ka>>>26)|0,ka&=67108863,P[0]=pa,P[1]=ya,P[2]=va,P[3]=ga,P[4]=ma,P[5]=_a,P[6]=wa,P[7]=Sa,P[8]=Aa,P[9]=Ea,P[10]=xa,P[11]=Ia,P[12]=Ma,P[13]=Pa,P[14]=Ba,P[15]=Oa,P[16]=Ta,P[17]=Ca,P[18]=ka,I!==0&&(P[19]=I,h.length++),h};Math.imul||(T=B);function L(M,s,d){d.negative=s.negative^M.negative,d.length=M.length+s.length;for(var h=0,y=0,_=0;_<d.length-1;_++){var P=y;y=0;for(var I=h&67108863,m=Math.min(_,s.length-1),u=Math.max(0,_-M.length+1);u<=m;u++){var w=_-u,j=M.words[w]|0,H=s.words[u]|0,U=j*H,ne=U&67108863;P=P+(U/67108864|0)|0,ne=ne+I|0,I=ne&67108863,P=P+(ne>>>26)|0,y+=P>>>26,P&=67108863}d.words[_]=I,h=P,P=y}return h!==0?d.words[_]=h:d.length--,d.strip()}function R(M,s,d){var h=new z;return h.mulp(M,s,d)}a.prototype.mulTo=function(s,d){var h,y=this.length+s.length;return this.length===10&&s.length===10?h=T(this,s,d):y<63?h=B(this,s,d):y<1024?h=L(this,s,d):h=R(this,s,d),h};function z(M,s){this.x=M,this.y=s}z.prototype.makeRBT=function(s){for(var d=new Array(s),h=a.prototype._countBits(s)-1,y=0;y<s;y++)d[y]=this.revBin(y,h,s);return d},z.prototype.revBin=function(s,d,h){if(s===0||s===h-1)return s;for(var y=0,_=0;_<d;_++)y|=(s&1)<<d-_-1,s>>=1;return y},z.prototype.permute=function(s,d,h,y,_,P){for(var I=0;I<P;I++)y[I]=d[s[I]],_[I]=h[s[I]]},z.prototype.transform=function(s,d,h,y,_,P){this.permute(P,s,d,h,y,_);for(var I=1;I<_;I<<=1)for(var m=I<<1,u=Math.cos(2*Math.PI/m),w=Math.sin(2*Math.PI/m),j=0;j<_;j+=m)for(var H=u,U=w,ne=0;ne<I;ne++){var V=h[j+ne],J=y[j+ne],be=h[j+ne+I],re=y[j+ne+I],le=H*be-U*re;re=H*re+U*be,be=le,h[j+ne]=V+be,y[j+ne]=J+re,h[j+ne+I]=V-be,y[j+ne+I]=J-re,ne!==m&&(le=u*H-w*U,U=u*U+w*H,H=le)}},z.prototype.guessLen13b=function(s,d){var h=Math.max(d,s)|1,y=h&1,_=0;for(h=h/2|0;h;h=h>>>1)_++;return 1<<_+1+y},z.prototype.conjugate=function(s,d,h){if(!(h<=1))for(var y=0;y<h/2;y++){var _=s[y];s[y]=s[h-y-1],s[h-y-1]=_,_=d[y],d[y]=-d[h-y-1],d[h-y-1]=-_}},z.prototype.normalize13b=function(s,d){for(var h=0,y=0;y<d/2;y++){var _=Math.round(s[2*y+1]/d)*8192+Math.round(s[2*y]/d)+h;s[y]=_&67108863,_<67108864?h=0:h=_/67108864|0}return s},z.prototype.convert13b=function(s,d,h,y){for(var _=0,P=0;P<d;P++)_=_+(s[P]|0),h[2*P]=_&8191,_=_>>>13,h[2*P+1]=_&8191,_=_>>>13;for(P=2*d;P<y;++P)h[P]=0;n(_===0),n((_&-8192)===0)},z.prototype.stub=function(s){for(var d=new Array(s),h=0;h<s;h++)d[h]=0;return d},z.prototype.mulp=function(s,d,h){var y=2*this.guessLen13b(s.length,d.length),_=this.makeRBT(y),P=this.stub(y),I=new Array(y),m=new Array(y),u=new Array(y),w=new Array(y),j=new Array(y),H=new Array(y),U=h.words;U.length=y,this.convert13b(s.words,s.length,I,y),this.convert13b(d.words,d.length,w,y),this.transform(I,P,m,u,y,_),this.transform(w,P,j,H,y,_);for(var ne=0;ne<y;ne++){var V=m[ne]*j[ne]-u[ne]*H[ne];u[ne]=m[ne]*H[ne]+u[ne]*j[ne],m[ne]=V}return this.conjugate(m,u,y),this.transform(m,u,U,P,y,_),this.conjugate(U,P,y),this.normalize13b(U,y),h.negative=s.negative^d.negative,h.length=s.length+d.length,h.strip()},a.prototype.mul=function(s){var d=new a(null);return d.words=new Array(this.length+s.length),this.mulTo(s,d)},a.prototype.mulf=function(s){var d=new a(null);return d.words=new Array(this.length+s.length),R(this,s,d)},a.prototype.imul=function(s){return this.clone().mulTo(s,this)},a.prototype.imuln=function(s){n(typeof s=="number"),n(s<67108864);for(var d=0,h=0;h<this.length;h++){var y=(this.words[h]|0)*s,_=(y&67108863)+(d&67108863);d>>=26,d+=y/67108864|0,d+=_>>>26,this.words[h]=_&67108863}return d!==0&&(this.words[h]=d,this.length++),this},a.prototype.muln=function(s){return this.clone().imuln(s)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(s){var d=E(s);if(d.length===0)return new a(1);for(var h=this,y=0;y<d.length&&d[y]===0;y++,h=h.sqr());if(++y<d.length)for(var _=h.sqr();y<d.length;y++,_=_.sqr())d[y]!==0&&(h=h.mul(_));return h},a.prototype.iushln=function(s){n(typeof s=="number"&&s>=0);var d=s%26,h=(s-d)/26,y=67108863>>>26-d<<26-d,_;if(d!==0){var P=0;for(_=0;_<this.length;_++){var I=this.words[_]&y,m=(this.words[_]|0)-I<<d;this.words[_]=m|P,P=I>>>26-d}P&&(this.words[_]=P,this.length++)}if(h!==0){for(_=this.length-1;_>=0;_--)this.words[_+h]=this.words[_];for(_=0;_<h;_++)this.words[_]=0;this.length+=h}return this.strip()},a.prototype.ishln=function(s){return n(this.negative===0),this.iushln(s)},a.prototype.iushrn=function(s,d,h){n(typeof s=="number"&&s>=0);var y;d?y=(d-d%26)/26:y=0;var _=s%26,P=Math.min((s-_)/26,this.length),I=67108863^67108863>>>_<<_,m=h;if(y-=P,y=Math.max(0,y),m){for(var u=0;u<P;u++)m.words[u]=this.words[u];m.length=P}if(P!==0)if(this.length>P)for(this.length-=P,u=0;u<this.length;u++)this.words[u]=this.words[u+P];else this.words[0]=0,this.length=1;var w=0;for(u=this.length-1;u>=0&&(w!==0||u>=y);u--){var j=this.words[u]|0;this.words[u]=w<<26-_|j>>>_,w=j&I}return m&&w!==0&&(m.words[m.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(s,d,h){return n(this.negative===0),this.iushrn(s,d,h)},a.prototype.shln=function(s){return this.clone().ishln(s)},a.prototype.ushln=function(s){return this.clone().iushln(s)},a.prototype.shrn=function(s){return this.clone().ishrn(s)},a.prototype.ushrn=function(s){return this.clone().iushrn(s)},a.prototype.testn=function(s){n(typeof s=="number"&&s>=0);var d=s%26,h=(s-d)/26,y=1<<d;if(this.length<=h)return!1;var _=this.words[h];return!!(_&y)},a.prototype.imaskn=function(s){n(typeof s=="number"&&s>=0);var d=s%26,h=(s-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(d!==0&&h++,this.length=Math.min(h,this.length),d!==0){var y=67108863^67108863>>>d<<d;this.words[this.length-1]&=y}return this.strip()},a.prototype.maskn=function(s){return this.clone().imaskn(s)},a.prototype.iaddn=function(s){return n(typeof s=="number"),n(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},a.prototype._iaddn=function(s){this.words[0]+=s;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},a.prototype.isubn=function(s){if(n(typeof s=="number"),n(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this.strip()},a.prototype.addn=function(s){return this.clone().iaddn(s)},a.prototype.subn=function(s){return this.clone().isubn(s)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(s,d,h){var y=s.length+h,_;this._expand(y);var P,I=0;for(_=0;_<s.length;_++){P=(this.words[_+h]|0)+I;var m=(s.words[_]|0)*d;P-=m&67108863,I=(P>>26)-(m/67108864|0),this.words[_+h]=P&67108863}for(;_<this.length-h;_++)P=(this.words[_+h]|0)+I,I=P>>26,this.words[_+h]=P&67108863;if(I===0)return this.strip();for(n(I===-1),I=0,_=0;_<this.length;_++)P=-(this.words[_]|0)+I,I=P>>26,this.words[_]=P&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(s,d){var h=this.length-s.length,y=this.clone(),_=s,P=_.words[_.length-1]|0,I=this._countBits(P);h=26-I,h!==0&&(_=_.ushln(h),y.iushln(h),P=_.words[_.length-1]|0);var m=y.length-_.length,u;if(d!=="mod"){u=new a(null),u.length=m+1,u.words=new Array(u.length);for(var w=0;w<u.length;w++)u.words[w]=0}var j=y.clone()._ishlnsubmul(_,1,m);j.negative===0&&(y=j,u&&(u.words[m]=1));for(var H=m-1;H>=0;H--){var U=(y.words[_.length+H]|0)*67108864+(y.words[_.length+H-1]|0);for(U=Math.min(U/P|0,67108863),y._ishlnsubmul(_,U,H);y.negative!==0;)U--,y.negative=0,y._ishlnsubmul(_,1,H),y.isZero()||(y.negative^=1);u&&(u.words[H]=U)}return u&&u.strip(),y.strip(),d!=="div"&&h!==0&&y.iushrn(h),{div:u||null,mod:y}},a.prototype.divmod=function(s,d,h){if(n(!s.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var y,_,P;return this.negative!==0&&s.negative===0?(P=this.neg().divmod(s,d),d!=="mod"&&(y=P.div.neg()),d!=="div"&&(_=P.mod.neg(),h&&_.negative!==0&&_.iadd(s)),{div:y,mod:_}):this.negative===0&&s.negative!==0?(P=this.divmod(s.neg(),d),d!=="mod"&&(y=P.div.neg()),{div:y,mod:P.mod}):this.negative&s.negative?(P=this.neg().divmod(s.neg(),d),d!=="div"&&(_=P.mod.neg(),h&&_.negative!==0&&_.isub(s)),{div:P.div,mod:_}):s.length>this.length||this.cmp(s)<0?{div:new a(0),mod:this}:s.length===1?d==="div"?{div:this.divn(s.words[0]),mod:null}:d==="mod"?{div:null,mod:new a(this.modn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new a(this.modn(s.words[0]))}:this._wordDiv(s,d)},a.prototype.div=function(s){return this.divmod(s,"div",!1).div},a.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},a.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},a.prototype.divRound=function(s){var d=this.divmod(s);if(d.mod.isZero())return d.div;var h=d.div.negative!==0?d.mod.isub(s):d.mod,y=s.ushrn(1),_=s.andln(1),P=h.cmp(y);return P<0||_===1&&P===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},a.prototype.modn=function(s){n(s<=67108863);for(var d=(1<<26)%s,h=0,y=this.length-1;y>=0;y--)h=(d*h+(this.words[y]|0))%s;return h},a.prototype.idivn=function(s){n(s<=67108863);for(var d=0,h=this.length-1;h>=0;h--){var y=(this.words[h]|0)+d*67108864;this.words[h]=y/s|0,d=y%s}return this.strip()},a.prototype.divn=function(s){return this.clone().idivn(s)},a.prototype.egcd=function(s){n(s.negative===0),n(!s.isZero());var d=this,h=s.clone();d.negative!==0?d=d.umod(s):d=d.clone();for(var y=new a(1),_=new a(0),P=new a(0),I=new a(1),m=0;d.isEven()&&h.isEven();)d.iushrn(1),h.iushrn(1),++m;for(var u=h.clone(),w=d.clone();!d.isZero();){for(var j=0,H=1;!(d.words[0]&H)&&j<26;++j,H<<=1);if(j>0)for(d.iushrn(j);j-- >0;)(y.isOdd()||_.isOdd())&&(y.iadd(u),_.isub(w)),y.iushrn(1),_.iushrn(1);for(var U=0,ne=1;!(h.words[0]&ne)&&U<26;++U,ne<<=1);if(U>0)for(h.iushrn(U);U-- >0;)(P.isOdd()||I.isOdd())&&(P.iadd(u),I.isub(w)),P.iushrn(1),I.iushrn(1);d.cmp(h)>=0?(d.isub(h),y.isub(P),_.isub(I)):(h.isub(d),P.isub(y),I.isub(_))}return{a:P,b:I,gcd:h.iushln(m)}},a.prototype._invmp=function(s){n(s.negative===0),n(!s.isZero());var d=this,h=s.clone();d.negative!==0?d=d.umod(s):d=d.clone();for(var y=new a(1),_=new a(0),P=h.clone();d.cmpn(1)>0&&h.cmpn(1)>0;){for(var I=0,m=1;!(d.words[0]&m)&&I<26;++I,m<<=1);if(I>0)for(d.iushrn(I);I-- >0;)y.isOdd()&&y.iadd(P),y.iushrn(1);for(var u=0,w=1;!(h.words[0]&w)&&u<26;++u,w<<=1);if(u>0)for(h.iushrn(u);u-- >0;)_.isOdd()&&_.iadd(P),_.iushrn(1);d.cmp(h)>=0?(d.isub(h),y.isub(_)):(h.isub(d),_.isub(y))}var j;return d.cmpn(1)===0?j=y:j=_,j.cmpn(0)<0&&j.iadd(s),j},a.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var d=this.clone(),h=s.clone();d.negative=0,h.negative=0;for(var y=0;d.isEven()&&h.isEven();y++)d.iushrn(1),h.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;h.isEven();)h.iushrn(1);var _=d.cmp(h);if(_<0){var P=d;d=h,h=P}else if(_===0||h.cmpn(1)===0)break;d.isub(h)}while(!0);return h.iushln(y)},a.prototype.invm=function(s){return this.egcd(s).a.umod(s)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(s){return this.words[0]&s},a.prototype.bincn=function(s){n(typeof s=="number");var d=s%26,h=(s-d)/26,y=1<<d;if(this.length<=h)return this._expand(h+1),this.words[h]|=y,this;for(var _=y,P=h;_!==0&&P<this.length;P++){var I=this.words[P]|0;I+=_,_=I>>>26,I&=67108863,this.words[P]=I}return _!==0&&(this.words[P]=_,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(s){var d=s<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this.strip();var h;if(this.length>1)h=1;else{d&&(s=-s),n(s<=67108863,"Number is too big");var y=this.words[0]|0;h=y===s?0:y<s?-1:1}return this.negative!==0?-h|0:h},a.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var d=this.ucmp(s);return this.negative!==0?-d|0:d},a.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var d=0,h=this.length-1;h>=0;h--){var y=this.words[h]|0,_=s.words[h]|0;if(y!==_){y<_?d=-1:y>_&&(d=1);break}}return d},a.prototype.gtn=function(s){return this.cmpn(s)===1},a.prototype.gt=function(s){return this.cmp(s)===1},a.prototype.gten=function(s){return this.cmpn(s)>=0},a.prototype.gte=function(s){return this.cmp(s)>=0},a.prototype.ltn=function(s){return this.cmpn(s)===-1},a.prototype.lt=function(s){return this.cmp(s)===-1},a.prototype.lten=function(s){return this.cmpn(s)<=0},a.prototype.lte=function(s){return this.cmp(s)<=0},a.prototype.eqn=function(s){return this.cmpn(s)===0},a.prototype.eq=function(s){return this.cmp(s)===0},a.red=function(s){return new $(s)},a.prototype.toRed=function(s){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(s){return this.red=s,this},a.prototype.forceRed=function(s){return n(!this.red,"Already a number in reduction context"),this._forceRed(s)},a.prototype.redAdd=function(s){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},a.prototype.redIAdd=function(s){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},a.prototype.redSub=function(s){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},a.prototype.redISub=function(s){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},a.prototype.redShl=function(s){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},a.prototype.redMul=function(s){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},a.prototype.redIMul=function(s){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(s){return n(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var F={k256:null,p224:null,p192:null,p25519:null};function Z(M,s){this.name=M,this.p=new a(s,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Z.prototype._tmp=function(){var s=new a(null);return s.words=new Array(Math.ceil(this.n/13)),s},Z.prototype.ireduce=function(s){var d=s,h;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),h=d.bitLength();while(h>this.n);var y=h<this.n?-1:d.ucmp(this.p);return y===0?(d.words[0]=0,d.length=1):y>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},Z.prototype.split=function(s,d){s.iushrn(this.n,0,d)},Z.prototype.imulK=function(s){return s.imul(this.k)};function C(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(C,Z),C.prototype.split=function(s,d){for(var h=4194303,y=Math.min(s.length,9),_=0;_<y;_++)d.words[_]=s.words[_];if(d.length=y,s.length<=9){s.words[0]=0,s.length=1;return}var P=s.words[9];for(d.words[d.length++]=P&h,_=10;_<s.length;_++){var I=s.words[_]|0;s.words[_-10]=(I&h)<<4|P>>>22,P=I}P>>>=22,s.words[_-10]=P,P===0&&s.length>10?s.length-=10:s.length-=9},C.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var d=0,h=0;h<s.length;h++){var y=s.words[h]|0;d+=y*977,s.words[h]=d&67108863,d=y*64+(d/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function q(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(q,Z);function W(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(W,Z);function k(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(k,Z),k.prototype.imulK=function(s){for(var d=0,h=0;h<s.length;h++){var y=(s.words[h]|0)*19+d,_=y&67108863;y>>>=26,s.words[h]=_,d=y}return d!==0&&(s.words[s.length++]=d),s},a._prime=function(s){if(F[s])return F[s];var d;if(s==="k256")d=new C;else if(s==="p224")d=new q;else if(s==="p192")d=new W;else if(s==="p25519")d=new k;else throw new Error("Unknown prime "+s);return F[s]=d,d};function $(M){if(typeof M=="string"){var s=a._prime(M);this.m=s.p,this.prime=s}else n(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}$.prototype._verify1=function(s){n(s.negative===0,"red works only with positives"),n(s.red,"red works only with red numbers")},$.prototype._verify2=function(s,d){n((s.negative|d.negative)===0,"red works only with positives"),n(s.red&&s.red===d.red,"red works only with red numbers")},$.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):s.umod(this.m)._forceRed(this)},$.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},$.prototype.add=function(s,d){this._verify2(s,d);var h=s.add(d);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},$.prototype.iadd=function(s,d){this._verify2(s,d);var h=s.iadd(d);return h.cmp(this.m)>=0&&h.isub(this.m),h},$.prototype.sub=function(s,d){this._verify2(s,d);var h=s.sub(d);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},$.prototype.isub=function(s,d){this._verify2(s,d);var h=s.isub(d);return h.cmpn(0)<0&&h.iadd(this.m),h},$.prototype.shl=function(s,d){return this._verify1(s),this.imod(s.ushln(d))},$.prototype.imul=function(s,d){return this._verify2(s,d),this.imod(s.imul(d))},$.prototype.mul=function(s,d){return this._verify2(s,d),this.imod(s.mul(d))},$.prototype.isqr=function(s){return this.imul(s,s.clone())},$.prototype.sqr=function(s){return this.mul(s,s)},$.prototype.sqrt=function(s){if(s.isZero())return s.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var h=this.m.add(new a(1)).iushrn(2);return this.pow(s,h)}for(var y=this.m.subn(1),_=0;!y.isZero()&&y.andln(1)===0;)_++,y.iushrn(1);n(!y.isZero());var P=new a(1).toRed(this),I=P.redNeg(),m=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new a(2*u*u).toRed(this);this.pow(u,m).cmp(I)!==0;)u.redIAdd(I);for(var w=this.pow(u,y),j=this.pow(s,y.addn(1).iushrn(1)),H=this.pow(s,y),U=_;H.cmp(P)!==0;){for(var ne=H,V=0;ne.cmp(P)!==0;V++)ne=ne.redSqr();n(V<U);var J=this.pow(w,new a(1).iushln(U-V-1));j=j.redMul(J),w=J.redSqr(),H=H.redMul(w),U=V}return j},$.prototype.invm=function(s){var d=s._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},$.prototype.pow=function(s,d){if(d.isZero())return new a(1).toRed(this);if(d.cmpn(1)===0)return s.clone();var h=4,y=new Array(1<<h);y[0]=new a(1).toRed(this),y[1]=s;for(var _=2;_<y.length;_++)y[_]=this.mul(y[_-1],s);var P=y[0],I=0,m=0,u=d.bitLength()%26;for(u===0&&(u=26),_=d.length-1;_>=0;_--){for(var w=d.words[_],j=u-1;j>=0;j--){var H=w>>j&1;if(P!==y[0]&&(P=this.sqr(P)),H===0&&I===0){m=0;continue}I<<=1,I|=H,m++,!(m!==h&&(_!==0||j!==0))&&(P=this.mul(P,y[I]),m=0,I=0)}u=26}return P},$.prototype.convertTo=function(s){var d=s.umod(this.m);return d===s?d.clone():d},$.prototype.convertFrom=function(s){var d=s.clone();return d.red=null,d},a.mont=function(s){return new ee(s)};function ee(M){$.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(ee,$),ee.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},ee.prototype.convertFrom=function(s){var d=this.imod(s.mul(this.rinv));return d.red=null,d},ee.prototype.imul=function(s,d){if(s.isZero()||d.isZero())return s.words[0]=0,s.length=1,s;var h=s.imul(d),y=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=h.isub(y).iushrn(this.shift),P=_;return _.cmp(this.m)>=0?P=_.isub(this.m):_.cmpn(0)<0&&(P=_.iadd(this.m)),P._forceRed(this)},ee.prototype.mul=function(s,d){if(s.isZero()||d.isZero())return new a(0)._forceRed(this);var h=s.mul(d),y=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=h.isub(y).iushrn(this.shift),P=_;return _.cmp(this.m)>=0?P=_.isub(this.m):_.cmpn(0)<0&&(P=_.iadd(this.m)),P._forceRed(this)},ee.prototype.invm=function(s){var d=this.imod(s._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(t,X)})(Zo);var ar=Zo.exports,Kr=Du;function Du(t,e){if(!t)throw new Error(e||"Assertion failed")}Du.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Yo={};(function(t){var e=t;function r(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if(typeof a!="string"){for(var b=0;b<a.length;b++)c[b]=a[b]|0;return c}if(o==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var b=0;b<a.length;b+=2)c.push(parseInt(a[b]+a[b+1],16))}else for(var b=0;b<a.length;b++){var g=a.charCodeAt(b),p=g>>8,v=g&255;p?c.push(p,v):c.push(v)}return c}e.toArray=r;function n(a){return a.length===1?"0"+a:a}e.zero2=n;function i(a){for(var o="",c=0;c<a.length;c++)o+=n(a[c].toString(16));return o}e.toHex=i,e.encode=function(o,c){return c==="hex"?i(o):o}})(Yo);(function(t){var e=t,r=ar,n=Kr,i=Yo;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function a(p,v,A){var E=new Array(Math.max(p.bitLength(),A)+1),B;for(B=0;B<E.length;B+=1)E[B]=0;var T=1<<v+1,L=p.clone();for(B=0;B<E.length;B++){var R,z=L.andln(T-1);L.isOdd()?(z>(T>>1)-1?R=(T>>1)-z:R=z,L.isubn(R)):R=0,E[B]=R,L.iushrn(1)}return E}e.getNAF=a;function o(p,v){var A=[[],[]];p=p.clone(),v=v.clone();for(var E=0,B=0,T;p.cmpn(-E)>0||v.cmpn(-B)>0;){var L=p.andln(3)+E&3,R=v.andln(3)+B&3;L===3&&(L=-1),R===3&&(R=-1);var z;L&1?(T=p.andln(7)+E&7,(T===3||T===5)&&R===2?z=-L:z=L):z=0,A[0].push(z);var F;R&1?(T=v.andln(7)+B&7,(T===3||T===5)&&L===2?F=-R:F=R):F=0,A[1].push(F),2*E===z+1&&(E=1-E),2*B===F+1&&(B=1-B),p.iushrn(1),v.iushrn(1)}return A}e.getJSF=o;function c(p,v,A){var E="_"+v;p.prototype[v]=function(){return this[E]!==void 0?this[E]:this[E]=A.call(this)}}e.cachedProperty=c;function b(p){return typeof p=="string"?e.toArray(p,"hex"):p}e.parseBytes=b;function g(p){return new r(p,"hex","le")}e.intFromLE=g})(gt);var Qo={exports:{}},Fa;Qo.exports=function(e){return Fa||(Fa=new pr(null)),Fa.generate(e)};function pr(t){this.rand=t}Qo.exports.Rand=pr;pr.prototype.generate=function(e){return this._rand(e)};pr.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?pr.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?pr.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(pr.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Qc=Xo;if(typeof Qc.randomBytes!="function")throw new Error("Not supported");pr.prototype._rand=function(e){return Qc.randomBytes(e)}}catch{}var ju=Qo.exports,ec={},Ir=ar,$n=gt,ai=$n.getNAF,d1=$n.getJSF,oi=$n.assert;function Ar(t,e){this.type=t,this.p=new Ir(e.p,16),this.red=e.prime?Ir.red(e.prime):Ir.mont(this.p),this.zero=new Ir(0).toRed(this.red),this.one=new Ir(1).toRed(this.red),this.two=new Ir(2).toRed(this.red),this.n=e.n&&new Ir(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ki=Ar;Ar.prototype.point=function(){throw new Error("Not implemented")};Ar.prototype.validate=function(){throw new Error("Not implemented")};Ar.prototype._fixedNafMul=function(e,r){oi(e.precomputed);var n=e._getDoubles(),i=ai(r,1,this._bitLength),a=(1<<n.step+1)-(n.step%2===0?2:1);a/=3;var o=[],c,b;for(c=0;c<i.length;c+=n.step){b=0;for(var g=c+n.step-1;g>=c;g--)b=(b<<1)+i[g];o.push(b)}for(var p=this.jpoint(null,null,null),v=this.jpoint(null,null,null),A=a;A>0;A--){for(c=0;c<o.length;c++)b=o[c],b===A?v=v.mixedAdd(n.points[c]):b===-A&&(v=v.mixedAdd(n.points[c].neg()));p=p.add(v)}return p.toP()};Ar.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var a=i.points,o=ai(r,n,this._bitLength),c=this.jpoint(null,null,null),b=o.length-1;b>=0;b--){for(var g=0;b>=0&&o[b]===0;b--)g++;if(b>=0&&g++,c=c.dblp(g),b<0)break;var p=o[b];oi(p!==0),e.type==="affine"?p>0?c=c.mixedAdd(a[p-1>>1]):c=c.mixedAdd(a[-p-1>>1].neg()):p>0?c=c.add(a[p-1>>1]):c=c.add(a[-p-1>>1].neg())}return e.type==="affine"?c.toP():c};Ar.prototype._wnafMulAdd=function(e,r,n,i,a){var o=this._wnafT1,c=this._wnafT2,b=this._wnafT3,g=0,p,v,A;for(p=0;p<i;p++){A=r[p];var E=A._getNAFPoints(e);o[p]=E.wnd,c[p]=E.points}for(p=i-1;p>=1;p-=2){var B=p-1,T=p;if(o[B]!==1||o[T]!==1){b[B]=ai(n[B],o[B],this._bitLength),b[T]=ai(n[T],o[T],this._bitLength),g=Math.max(b[B].length,g),g=Math.max(b[T].length,g);continue}var L=[r[B],null,null,r[T]];r[B].y.cmp(r[T].y)===0?(L[1]=r[B].add(r[T]),L[2]=r[B].toJ().mixedAdd(r[T].neg())):r[B].y.cmp(r[T].y.redNeg())===0?(L[1]=r[B].toJ().mixedAdd(r[T]),L[2]=r[B].add(r[T].neg())):(L[1]=r[B].toJ().mixedAdd(r[T]),L[2]=r[B].toJ().mixedAdd(r[T].neg()));var R=[-3,-1,-5,-7,0,7,5,1,3],z=d1(n[B],n[T]);for(g=Math.max(z[0].length,g),b[B]=new Array(g),b[T]=new Array(g),v=0;v<g;v++){var F=z[0][v]|0,Z=z[1][v]|0;b[B][v]=R[(F+1)*3+(Z+1)],b[T][v]=0,c[B]=L}}var C=this.jpoint(null,null,null),q=this._wnafT4;for(p=g;p>=0;p--){for(var W=0;p>=0;){var k=!0;for(v=0;v<i;v++)q[v]=b[v][p]|0,q[v]!==0&&(k=!1);if(!k)break;W++,p--}if(p>=0&&W++,C=C.dblp(W),p<0)break;for(v=0;v<i;v++){var $=q[v];$!==0&&($>0?A=c[v][$-1>>1]:$<0&&(A=c[v][-$-1>>1].neg()),A.type==="affine"?C=C.mixedAdd(A):C=C.add(A))}}for(p=0;p<i;p++)c[p]=null;return a?C:C.toP()};function Mt(t,e){this.curve=t,this.type=e,this.precomputed=null}Ar.BasePoint=Mt;Mt.prototype.eq=function(){throw new Error("Not implemented")};Mt.prototype.validate=function(){return this.curve.validate(this)};Ar.prototype.decodePoint=function(e,r){e=$n.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?oi(e[e.length-1]%2===0):e[0]===7&&oi(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Mt.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Mt.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Mt.prototype.encode=function(e,r){return $n.encode(this._encode(r),e)};Mt.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Mt.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Mt.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,a=0;a<r;a+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};Mt.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),a=1;a<n;a++)r[a]=r[a-1].add(i);return{wnd:e,points:r}};Mt.prototype._getBeta=function(){return null};Mt.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Io={exports:{}};typeof Object.create=="function"?Io.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Io.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var tc=Io.exports,l1=gt,Le=ar,rc=tc,fn=ki,h1=l1.assert;function Pt(t){fn.call(this,"short",t),this.a=new Le(t.a,16).toRed(this.red),this.b=new Le(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}rc(Pt,fn);var b1=Pt;Pt.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Le(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new Le(e.lambda,16);else{var a=this._getEndoRoots(this.n);this.g.mul(a[0]).x.cmp(this.g.x.redMul(r))===0?n=a[0]:(n=a[1],h1(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(c){return{a:new Le(c.a,16),b:new Le(c.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};Pt.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Le.mont(e),n=new Le(2).toRed(r).redInvm(),i=n.redNeg(),a=new Le(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(a).fromRed(),c=i.redSub(a).fromRed();return[o,c]};Pt.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),a=new Le(1),o=new Le(0),c=new Le(0),b=new Le(1),g,p,v,A,E,B,T,L=0,R,z;n.cmpn(0)!==0;){var F=i.div(n);R=i.sub(F.mul(n)),z=c.sub(F.mul(a));var Z=b.sub(F.mul(o));if(!v&&R.cmp(r)<0)g=T.neg(),p=a,v=R.neg(),A=z;else if(v&&++L===2)break;T=R,i=n,n=R,c=a,a=z,b=o,o=Z}E=R.neg(),B=z;var C=v.sqr().add(A.sqr()),q=E.sqr().add(B.sqr());return q.cmp(C)>=0&&(E=g,B=p),v.negative&&(v=v.neg(),A=A.neg()),E.negative&&(E=E.neg(),B=B.neg()),[{a:v,b:A},{a:E,b:B}]};Pt.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],a=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),c=a.mul(n.a),b=o.mul(i.a),g=a.mul(n.b),p=o.mul(i.b),v=e.sub(c).sub(b),A=g.add(p).neg();return{k1:v,k2:A}};Pt.prototype.pointFromX=function(e,r){e=new Le(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var a=i.fromRed().isOdd();return(r&&!a||!r&&a)&&(i=i.redNeg()),this.point(e,i)};Pt.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),a=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(a).cmpn(0)===0};Pt.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,a=this._endoWnafT2,o=0;o<e.length;o++){var c=this._endoSplit(r[o]),b=e[o],g=b._getBeta();c.k1.negative&&(c.k1.ineg(),b=b.neg(!0)),c.k2.negative&&(c.k2.ineg(),g=g.neg(!0)),i[o*2]=b,i[o*2+1]=g,a[o*2]=c.k1,a[o*2+1]=c.k2}for(var p=this._wnafMulAdd(1,i,a,o*2,n),v=0;v<o*2;v++)i[v]=null,a[v]=null;return p};function nt(t,e,r,n){fn.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Le(e,16),this.y=new Le(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}rc(nt,fn.BasePoint);Pt.prototype.point=function(e,r,n){return new nt(this,e,r,n)};Pt.prototype.pointFromJSON=function(e,r){return nt.fromJSON(this,e,r)};nt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(a){return n.point(a.x.redMul(n.endo.beta),a.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};nt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};nt.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function a(c){return e.point(c[0],c[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(a))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(a))}},i};nt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};nt.prototype.isInfinity=function(){return this.inf};nt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};nt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),a=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=a.redSqr().redISub(this.x.redAdd(this.x)),c=a.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,c)};nt.prototype.getX=function(){return this.x.fromRed()};nt.prototype.getY=function(){return this.y.fromRed()};nt.prototype.mul=function(e){return e=new Le(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};nt.prototype.mulAdd=function(e,r,n){var i=[this,r],a=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,a):this.curve._wnafMulAdd(1,i,a,2)};nt.prototype.jmulAdd=function(e,r,n){var i=[this,r],a=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,a,!0):this.curve._wnafMulAdd(1,i,a,2,!0)};nt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};nt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(a){return a.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};nt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function at(t,e,r,n){fn.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Le(0)):(this.x=new Le(e,16),this.y=new Le(r,16),this.z=new Le(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}rc(at,fn.BasePoint);Pt.prototype.jpoint=function(e,r,n){return new at(this,e,r,n)};at.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};at.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};at.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),a=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),c=e.y.redMul(n.redMul(this.z)),b=i.redSub(a),g=o.redSub(c);if(b.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=b.redSqr(),v=p.redMul(b),A=i.redMul(p),E=g.redSqr().redIAdd(v).redISub(A).redISub(A),B=g.redMul(A.redISub(E)).redISub(o.redMul(v)),T=this.z.redMul(e.z).redMul(b);return this.curve.jpoint(E,B,T)};at.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),a=this.y,o=e.y.redMul(r).redMul(this.z),c=n.redSub(i),b=a.redSub(o);if(c.cmpn(0)===0)return b.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=c.redSqr(),p=g.redMul(c),v=n.redMul(g),A=b.redSqr().redIAdd(p).redISub(v).redISub(v),E=b.redMul(v.redISub(A)).redISub(a.redMul(p)),B=this.z.redMul(c);return this.curve.jpoint(A,E,B)};at.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,a=this.curve.tinv,o=this.x,c=this.y,b=this.z,g=b.redSqr().redSqr(),p=c.redAdd(c);for(r=0;r<e;r++){var v=o.redSqr(),A=p.redSqr(),E=A.redSqr(),B=v.redAdd(v).redIAdd(v).redIAdd(i.redMul(g)),T=o.redMul(A),L=B.redSqr().redISub(T.redAdd(T)),R=T.redISub(L),z=B.redMul(R);z=z.redIAdd(z).redISub(E);var F=p.redMul(b);r+1<e&&(g=g.redMul(E)),o=L,b=F,p=z}return this.curve.jpoint(o,p.redMul(a),b)};at.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};at.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),a=this.y.redSqr(),o=a.redSqr(),c=this.x.redAdd(a).redSqr().redISub(i).redISub(o);c=c.redIAdd(c);var b=i.redAdd(i).redIAdd(i),g=b.redSqr().redISub(c).redISub(c),p=o.redIAdd(o);p=p.redIAdd(p),p=p.redIAdd(p),e=g,r=b.redMul(c.redISub(g)).redISub(p),n=this.y.redAdd(this.y)}else{var v=this.x.redSqr(),A=this.y.redSqr(),E=A.redSqr(),B=this.x.redAdd(A).redSqr().redISub(v).redISub(E);B=B.redIAdd(B);var T=v.redAdd(v).redIAdd(v),L=T.redSqr(),R=E.redIAdd(E);R=R.redIAdd(R),R=R.redIAdd(R),e=L.redISub(B).redISub(B),r=T.redMul(B.redISub(e)).redISub(R),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};at.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),a=this.y.redSqr(),o=a.redSqr(),c=this.x.redAdd(a).redSqr().redISub(i).redISub(o);c=c.redIAdd(c);var b=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),g=b.redSqr().redISub(c).redISub(c);e=g;var p=o.redIAdd(o);p=p.redIAdd(p),p=p.redIAdd(p),r=b.redMul(c.redISub(g)).redISub(p),n=this.y.redAdd(this.y)}else{var v=this.z.redSqr(),A=this.y.redSqr(),E=this.x.redMul(A),B=this.x.redSub(v).redMul(this.x.redAdd(v));B=B.redAdd(B).redIAdd(B);var T=E.redIAdd(E);T=T.redIAdd(T);var L=T.redAdd(T);e=B.redSqr().redISub(L),n=this.y.redAdd(this.z).redSqr().redISub(A).redISub(v);var R=A.redSqr();R=R.redIAdd(R),R=R.redIAdd(R),R=R.redIAdd(R),r=B.redMul(T.redISub(e)).redISub(R)}return this.curve.jpoint(e,r,n)};at.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,a=i.redSqr().redSqr(),o=r.redSqr(),c=n.redSqr(),b=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(a)),g=r.redAdd(r);g=g.redIAdd(g);var p=g.redMul(c),v=b.redSqr().redISub(p.redAdd(p)),A=p.redISub(v),E=c.redSqr();E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var B=b.redMul(A).redISub(E),T=n.redAdd(n).redMul(i);return this.curve.jpoint(v,B,T)};at.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),a=e.redAdd(e).redIAdd(e),o=a.redSqr(),c=this.x.redAdd(r).redSqr().redISub(e).redISub(i);c=c.redIAdd(c),c=c.redAdd(c).redIAdd(c),c=c.redISub(o);var b=c.redSqr(),g=i.redIAdd(i);g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var p=a.redIAdd(c).redSqr().redISub(o).redISub(b).redISub(g),v=r.redMul(p);v=v.redIAdd(v),v=v.redIAdd(v);var A=this.x.redMul(b).redISub(v);A=A.redIAdd(A),A=A.redIAdd(A);var E=this.y.redMul(p.redMul(g.redISub(p)).redISub(c.redMul(b)));E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var B=this.z.redAdd(c).redSqr().redISub(n).redISub(b);return this.curve.jpoint(A,E,B)};at.prototype.mul=function(e,r){return e=new Le(e,r),this.curve._wnafMul(this,e)};at.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),a=n.redMul(e.z);return this.y.redMul(a).redISub(e.y.redMul(i)).cmpn(0)===0};at.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),a=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(a),this.x.cmp(n)===0)return!0}};at.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};at.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Jr=ar,Uu=tc,Ni=ki,p1=gt;function dn(t){Ni.call(this,"mont",t),this.a=new Jr(t.a,16).toRed(this.red),this.b=new Jr(t.b,16).toRed(this.red),this.i4=new Jr(4).toRed(this.red).redInvm(),this.two=new Jr(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Uu(dn,Ni);var y1=dn;dn.prototype.validate=function(e){var r=e.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r),a=i.redSqrt();return a.redSqr().cmp(i)===0};function rt(t,e,r){Ni.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Jr(e,16),this.z=new Jr(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Uu(rt,Ni.BasePoint);dn.prototype.decodePoint=function(e,r){return this.point(p1.toArray(e,r),1)};dn.prototype.point=function(e,r){return new rt(this,e,r)};dn.prototype.pointFromJSON=function(e){return rt.fromJSON(this,e)};rt.prototype.precompute=function(){};rt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};rt.fromJSON=function(e,r){return new rt(e,r[0],r[1]||e.one)};rt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};rt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};rt.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),a=r.redSub(i),o=r.redMul(i),c=a.redMul(i.redAdd(this.curve.a24.redMul(a)));return this.curve.point(o,c)};rt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};rt.prototype.diffAdd=function(e,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),a=e.x.redAdd(e.z),o=e.x.redSub(e.z),c=o.redMul(n),b=a.redMul(i),g=r.z.redMul(c.redAdd(b).redSqr()),p=r.x.redMul(c.redISub(b).redSqr());return this.curve.point(g,p)};rt.prototype.mul=function(e){for(var r=e.clone(),n=this,i=this.curve.point(null,null),a=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var c=o.length-1;c>=0;c--)o[c]===0?(n=n.diffAdd(i,a),i=i.dbl()):(i=n.diffAdd(i,a),n=n.dbl());return i};rt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};rt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};rt.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};rt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};rt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var v1=gt,er=ar,Fu=tc,Li=ki,g1=v1.assert;function Wt(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Li.call(this,"edwards",t),this.a=new er(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new er(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new er(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),g1(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}Fu(Wt,Li);var m1=Wt;Wt.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Wt.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Wt.prototype.jpoint=function(e,r,n,i){return this.point(e,r,n,i)};Wt.prototype.pointFromX=function(e,r){e=new er(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),a=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(a.redInvm()),c=o.redSqrt();if(c.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var b=c.fromRed().isOdd();return(r&&!b||!r&&b)&&(c=c.redNeg()),this.point(e,c)};Wt.prototype.pointFromY=function(e,r){e=new er(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),a=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(a.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var c=o.redSqrt();if(c.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return c.fromRed().isOdd()!==r&&(c=c.redNeg()),this.point(c,e)};Wt.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),n=e.y.redSqr(),i=r.redMul(this.a).redAdd(n),a=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(a)===0};function ke(t,e,r,n,i){Li.BasePoint.call(this,t,"projective"),e===null&&r===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new er(e,16),this.y=new er(r,16),this.z=n?new er(n,16):this.curve.one,this.t=i&&new er(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Fu(ke,Li.BasePoint);Wt.prototype.pointFromJSON=function(e){return ke.fromJSON(this,e)};Wt.prototype.point=function(e,r,n,i){return new ke(this,e,r,n,i)};ke.fromJSON=function(e,r){return new ke(e,r[0],r[1],r[2])};ke.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};ke.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};ke.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),a=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=i.redAdd(r),c=o.redSub(n),b=i.redSub(r),g=a.redMul(c),p=o.redMul(b),v=a.redMul(b),A=c.redMul(o);return this.curve.point(g,p,A,v)};ke.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),n=this.y.redSqr(),i,a,o,c,b,g;if(this.curve.twisted){c=this.curve._mulA(r);var p=c.redAdd(n);this.zOne?(i=e.redSub(r).redSub(n).redMul(p.redSub(this.curve.two)),a=p.redMul(c.redSub(n)),o=p.redSqr().redSub(p).redSub(p)):(b=this.z.redSqr(),g=p.redSub(b).redISub(b),i=e.redSub(r).redISub(n).redMul(g),a=p.redMul(c.redSub(n)),o=p.redMul(g))}else c=r.redAdd(n),b=this.curve._mulC(this.z).redSqr(),g=c.redSub(b).redSub(b),i=this.curve._mulC(e.redISub(c)).redMul(g),a=this.curve._mulC(c).redMul(r.redISub(n)),o=c.redMul(g);return this.curve.point(i,a,o)};ke.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};ke.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),a=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(r),c=a.redSub(i),b=a.redAdd(i),g=n.redAdd(r),p=o.redMul(c),v=b.redMul(g),A=o.redMul(g),E=c.redMul(b);return this.curve.point(p,v,E,A)};ke.prototype._projAdd=function(e){var r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),a=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(a),c=n.redSub(o),b=n.redAdd(o),g=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(a),p=r.redMul(c).redMul(g),v,A;return this.curve.twisted?(v=r.redMul(b).redMul(a.redSub(this.curve._mulA(i))),A=c.redMul(b)):(v=r.redMul(b).redMul(a.redSub(i)),A=this.curve._mulC(c).redMul(b)),this.curve.point(p,v,A)};ke.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};ke.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};ke.prototype.mulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!1)};ke.prototype.jmulAdd=function(e,r,n){return this.curve._wnafMulAdd(1,[this,r],[e,n],2,!0)};ke.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};ke.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};ke.prototype.getX=function(){return this.normalize(),this.x.fromRed()};ke.prototype.getY=function(){return this.normalize(),this.y.fromRed()};ke.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};ke.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};ke.prototype.toP=ke.prototype.normalize;ke.prototype.mixedAdd=ke.prototype.add;(function(t){var e=t;e.base=ki,e.short=b1,e.mont=y1,e.edwards=m1})(ec);var Ri={},Ki={},Se={},Mo={exports:{}};typeof Object.create=="function"?Mo.exports=function(e,r){e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Mo.exports=function(e,r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e};var _1=Mo.exports,w1=Kr,S1=_1;Se.inherits=S1;function A1(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function E1(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var a=t.charCodeAt(i);a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):A1(t,i)?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Se.toArray=E1;function x1(t){for(var e="",r=0;r<t.length;r++)e+=zu(t[r].toString(16));return e}Se.toHex=x1;function qu(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Se.htonl=qu;function I1(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=qu(i)),r+=Hu(i.toString(16))}return r}Se.toHex32=I1;function zu(t){return t.length===1?"0"+t:t}Se.zero2=zu;function Hu(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Se.zero8=Hu;function M1(t,e,r,n){var i=r-e;w1(i%4===0);for(var a=new Array(i/4),o=0,c=e;o<a.length;o++,c+=4){var b;n==="big"?b=t[c]<<24|t[c+1]<<16|t[c+2]<<8|t[c+3]:b=t[c+3]<<24|t[c+2]<<16|t[c+1]<<8|t[c],a[o]=b>>>0}return a}Se.join32=M1;function P1(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var a=t[n];e==="big"?(r[i]=a>>>24,r[i+1]=a>>>16&255,r[i+2]=a>>>8&255,r[i+3]=a&255):(r[i+3]=a>>>24,r[i+2]=a>>>16&255,r[i+1]=a>>>8&255,r[i]=a&255)}return r}Se.split32=P1;function B1(t,e){return t>>>e|t<<32-e}Se.rotr32=B1;function O1(t,e){return t<<e|t>>>32-e}Se.rotl32=O1;function T1(t,e){return t+e>>>0}Se.sum32=T1;function C1(t,e,r){return t+e+r>>>0}Se.sum32_3=C1;function k1(t,e,r,n){return t+e+r+n>>>0}Se.sum32_4=k1;function N1(t,e,r,n,i){return t+e+r+n+i>>>0}Se.sum32_5=N1;function L1(t,e,r,n){var i=t[e],a=t[e+1],o=n+a>>>0,c=(o<n?1:0)+r+i;t[e]=c>>>0,t[e+1]=o}Se.sum64=L1;function R1(t,e,r,n){var i=e+n>>>0,a=(i<e?1:0)+t+r;return a>>>0}Se.sum64_hi=R1;function K1(t,e,r,n){var i=e+n;return i>>>0}Se.sum64_lo=K1;function $1(t,e,r,n,i,a,o,c){var b=0,g=e;g=g+n>>>0,b+=g<e?1:0,g=g+a>>>0,b+=g<a?1:0,g=g+c>>>0,b+=g<c?1:0;var p=t+r+i+o+b;return p>>>0}Se.sum64_4_hi=$1;function D1(t,e,r,n,i,a,o,c){var b=e+n+a+c;return b>>>0}Se.sum64_4_lo=D1;function j1(t,e,r,n,i,a,o,c,b,g){var p=0,v=e;v=v+n>>>0,p+=v<e?1:0,v=v+a>>>0,p+=v<a?1:0,v=v+c>>>0,p+=v<c?1:0,v=v+g>>>0,p+=v<g?1:0;var A=t+r+i+o+b+p;return A>>>0}Se.sum64_5_hi=j1;function U1(t,e,r,n,i,a,o,c,b,g){var p=e+n+a+c+g;return p>>>0}Se.sum64_5_lo=U1;function F1(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Se.rotr64_hi=F1;function q1(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Se.rotr64_lo=q1;function z1(t,e,r){return t>>>r}Se.shr64_hi=z1;function H1(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Se.shr64_lo=H1;var ln={},es=Se,G1=Kr;function $i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ln.BlockHash=$i;$i.prototype.update=function(e,r){if(e=es.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=es.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};$i.prototype.digest=function(e){return this.update(this._pad()),G1(this.pending===null),this._digest(e)};$i.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var a=1;a<n;a++)i[a]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[a++]=0;i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=e>>>24&255,i[a++]=e>>>16&255,i[a++]=e>>>8&255,i[a++]=e&255}else for(i[a++]=e&255,i[a++]=e>>>8&255,i[a++]=e>>>16&255,i[a++]=e>>>24&255,i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=0,o=8;o<this.padLength;o++)i[a++]=0;return i};var hn={},Zt={},V1=Se,qt=V1.rotr32;function J1(t,e,r,n){if(t===0)return Gu(e,r,n);if(t===1||t===3)return Ju(e,r,n);if(t===2)return Vu(e,r,n)}Zt.ft_1=J1;function Gu(t,e,r){return t&e^~t&r}Zt.ch32=Gu;function Vu(t,e,r){return t&e^t&r^e&r}Zt.maj32=Vu;function Ju(t,e,r){return t^e^r}Zt.p32=Ju;function W1(t){return qt(t,2)^qt(t,13)^qt(t,22)}Zt.s0_256=W1;function Z1(t){return qt(t,6)^qt(t,11)^qt(t,25)}Zt.s1_256=Z1;function X1(t){return qt(t,7)^qt(t,18)^t>>>3}Zt.g0_256=X1;function Y1(t){return qt(t,17)^qt(t,19)^t>>>10}Zt.g1_256=Y1;var en=Se,Q1=ln,eb=Zt,qa=en.rotl32,An=en.sum32,tb=en.sum32_5,rb=eb.ft_1,Wu=Q1.BlockHash,nb=[1518500249,1859775393,2400959708,3395469782];function Gt(){if(!(this instanceof Gt))return new Gt;Wu.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}en.inherits(Gt,Wu);var ib=Gt;Gt.blockSize=512;Gt.outSize=160;Gt.hmacStrength=80;Gt.padLength=64;Gt.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=qa(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var a=this.h[0],o=this.h[1],c=this.h[2],b=this.h[3],g=this.h[4];for(i=0;i<n.length;i++){var p=~~(i/20),v=tb(qa(a,5),rb(p,o,c,b),g,n[i],nb[p]);g=b,b=c,c=qa(o,30),o=a,a=v}this.h[0]=An(this.h[0],a),this.h[1]=An(this.h[1],o),this.h[2]=An(this.h[2],c),this.h[3]=An(this.h[3],b),this.h[4]=An(this.h[4],g)};Gt.prototype._digest=function(e){return e==="hex"?en.toHex32(this.h,"big"):en.split32(this.h,"big")};var tn=Se,ab=ln,bn=Zt,ob=Kr,Tt=tn.sum32,cb=tn.sum32_4,sb=tn.sum32_5,ub=bn.ch32,fb=bn.maj32,db=bn.s0_256,lb=bn.s1_256,hb=bn.g0_256,bb=bn.g1_256,Zu=ab.BlockHash,pb=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Vt(){if(!(this instanceof Vt))return new Vt;Zu.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=pb,this.W=new Array(64)}tn.inherits(Vt,Zu);var Xu=Vt;Vt.blockSize=512;Vt.outSize=256;Vt.hmacStrength=192;Vt.padLength=64;Vt.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=cb(bb(n[i-2]),n[i-7],hb(n[i-15]),n[i-16]);var a=this.h[0],o=this.h[1],c=this.h[2],b=this.h[3],g=this.h[4],p=this.h[5],v=this.h[6],A=this.h[7];for(ob(this.k.length===n.length),i=0;i<n.length;i++){var E=sb(A,lb(g),ub(g,p,v),this.k[i],n[i]),B=Tt(db(a),fb(a,o,c));A=v,v=p,p=g,g=Tt(b,E),b=c,c=o,o=a,a=Tt(E,B)}this.h[0]=Tt(this.h[0],a),this.h[1]=Tt(this.h[1],o),this.h[2]=Tt(this.h[2],c),this.h[3]=Tt(this.h[3],b),this.h[4]=Tt(this.h[4],g),this.h[5]=Tt(this.h[5],p),this.h[6]=Tt(this.h[6],v),this.h[7]=Tt(this.h[7],A)};Vt.prototype._digest=function(e){return e==="hex"?tn.toHex32(this.h,"big"):tn.split32(this.h,"big")};var Po=Se,Yu=Xu;function nr(){if(!(this instanceof nr))return new nr;Yu.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Po.inherits(nr,Yu);var yb=nr;nr.blockSize=512;nr.outSize=224;nr.hmacStrength=192;nr.padLength=64;nr.prototype._digest=function(e){return e==="hex"?Po.toHex32(this.h.slice(0,7),"big"):Po.split32(this.h.slice(0,7),"big")};var lt=Se,vb=ln,gb=Kr,zt=lt.rotr64_hi,Ht=lt.rotr64_lo,Qu=lt.shr64_hi,ef=lt.shr64_lo,ur=lt.sum64,za=lt.sum64_hi,Ha=lt.sum64_lo,mb=lt.sum64_4_hi,_b=lt.sum64_4_lo,wb=lt.sum64_5_hi,Sb=lt.sum64_5_lo,tf=vb.BlockHash,Ab=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Rt(){if(!(this instanceof Rt))return new Rt;tf.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Ab,this.W=new Array(160)}lt.inherits(Rt,tf);var rf=Rt;Rt.blockSize=1024;Rt.outSize=512;Rt.hmacStrength=192;Rt.padLength=128;Rt.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var a=Nb(n[i-4],n[i-3]),o=Lb(n[i-4],n[i-3]),c=n[i-14],b=n[i-13],g=Cb(n[i-30],n[i-29]),p=kb(n[i-30],n[i-29]),v=n[i-32],A=n[i-31];n[i]=mb(a,o,c,b,g,p,v,A),n[i+1]=_b(a,o,c,b,g,p,v,A)}};Rt.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],a=this.h[1],o=this.h[2],c=this.h[3],b=this.h[4],g=this.h[5],p=this.h[6],v=this.h[7],A=this.h[8],E=this.h[9],B=this.h[10],T=this.h[11],L=this.h[12],R=this.h[13],z=this.h[14],F=this.h[15];gb(this.k.length===n.length);for(var Z=0;Z<n.length;Z+=2){var C=z,q=F,W=Ob(A,E),k=Tb(A,E),$=Eb(A,E,B,T,L),ee=xb(A,E,B,T,L,R),M=this.k[Z],s=this.k[Z+1],d=n[Z],h=n[Z+1],y=wb(C,q,W,k,$,ee,M,s,d,h),_=Sb(C,q,W,k,$,ee,M,s,d,h);C=Pb(i,a),q=Bb(i,a),W=Ib(i,a,o,c,b),k=Mb(i,a,o,c,b,g);var P=za(C,q,W,k),I=Ha(C,q,W,k);z=L,F=R,L=B,R=T,B=A,T=E,A=za(p,v,y,_),E=Ha(v,v,y,_),p=b,v=g,b=o,g=c,o=i,c=a,i=za(y,_,P,I),a=Ha(y,_,P,I)}ur(this.h,0,i,a),ur(this.h,2,o,c),ur(this.h,4,b,g),ur(this.h,6,p,v),ur(this.h,8,A,E),ur(this.h,10,B,T),ur(this.h,12,L,R),ur(this.h,14,z,F)};Rt.prototype._digest=function(e){return e==="hex"?lt.toHex32(this.h,"big"):lt.split32(this.h,"big")};function Eb(t,e,r,n,i){var a=t&r^~t&i;return a<0&&(a+=4294967296),a}function xb(t,e,r,n,i,a){var o=e&n^~e&a;return o<0&&(o+=4294967296),o}function Ib(t,e,r,n,i){var a=t&r^t&i^r&i;return a<0&&(a+=4294967296),a}function Mb(t,e,r,n,i,a){var o=e&n^e&a^n&a;return o<0&&(o+=4294967296),o}function Pb(t,e){var r=zt(t,e,28),n=zt(e,t,2),i=zt(e,t,7),a=r^n^i;return a<0&&(a+=4294967296),a}function Bb(t,e){var r=Ht(t,e,28),n=Ht(e,t,2),i=Ht(e,t,7),a=r^n^i;return a<0&&(a+=4294967296),a}function Ob(t,e){var r=zt(t,e,14),n=zt(t,e,18),i=zt(e,t,9),a=r^n^i;return a<0&&(a+=4294967296),a}function Tb(t,e){var r=Ht(t,e,14),n=Ht(t,e,18),i=Ht(e,t,9),a=r^n^i;return a<0&&(a+=4294967296),a}function Cb(t,e){var r=zt(t,e,1),n=zt(t,e,8),i=Qu(t,e,7),a=r^n^i;return a<0&&(a+=4294967296),a}function kb(t,e){var r=Ht(t,e,1),n=Ht(t,e,8),i=ef(t,e,7),a=r^n^i;return a<0&&(a+=4294967296),a}function Nb(t,e){var r=zt(t,e,19),n=zt(e,t,29),i=Qu(t,e,6),a=r^n^i;return a<0&&(a+=4294967296),a}function Lb(t,e){var r=Ht(t,e,19),n=Ht(e,t,29),i=ef(t,e,6),a=r^n^i;return a<0&&(a+=4294967296),a}var Bo=Se,nf=rf;function ir(){if(!(this instanceof ir))return new ir;nf.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Bo.inherits(ir,nf);var Rb=ir;ir.blockSize=1024;ir.outSize=384;ir.hmacStrength=192;ir.padLength=128;ir.prototype._digest=function(e){return e==="hex"?Bo.toHex32(this.h.slice(0,12),"big"):Bo.split32(this.h.slice(0,12),"big")};hn.sha1=ib;hn.sha224=yb;hn.sha256=Xu;hn.sha384=Rb;hn.sha512=rf;var af={},Cr=Se,Kb=ln,Jn=Cr.rotl32,ts=Cr.sum32,En=Cr.sum32_3,rs=Cr.sum32_4,of=Kb.BlockHash;function Jt(){if(!(this instanceof Jt))return new Jt;of.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Cr.inherits(Jt,of);af.ripemd160=Jt;Jt.blockSize=512;Jt.outSize=160;Jt.hmacStrength=192;Jt.padLength=64;Jt.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],a=this.h[2],o=this.h[3],c=this.h[4],b=n,g=i,p=a,v=o,A=c,E=0;E<80;E++){var B=ts(Jn(rs(n,ns(E,i,a,o),e[jb[E]+r],$b(E)),Fb[E]),c);n=c,c=o,o=Jn(a,10),a=i,i=B,B=ts(Jn(rs(b,ns(79-E,g,p,v),e[Ub[E]+r],Db(E)),qb[E]),A),b=A,A=v,v=Jn(p,10),p=g,g=B}B=En(this.h[1],a,v),this.h[1]=En(this.h[2],o,A),this.h[2]=En(this.h[3],c,b),this.h[3]=En(this.h[4],n,g),this.h[4]=En(this.h[0],i,p),this.h[0]=B};Jt.prototype._digest=function(e){return e==="hex"?Cr.toHex32(this.h,"little"):Cr.split32(this.h,"little")};function ns(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function $b(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Db(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var jb=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Ub=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Fb=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],qb=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],zb=Se,Hb=Kr;function rn(t,e,r){if(!(this instanceof rn))return new rn(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(zb.toArray(e,r))}var Gb=rn;rn.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),Hb(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};rn.prototype.update=function(e,r){return this.inner.update(e,r),this};rn.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Se,e.common=ln,e.sha=hn,e.ripemd=af,e.hmac=Gb,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Ki);var Ga,is;function Vb(){return is||(is=1,Ga={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Ga}(function(t){var e=t,r=Ki,n=ec,i=gt,a=i.assert;function o(g){g.type==="short"?this.curve=new n.short(g):g.type==="edwards"?this.curve=new n.edwards(g):this.curve=new n.mont(g),this.g=this.curve.g,this.n=this.curve.n,this.hash=g.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function c(g,p){Object.defineProperty(e,g,{configurable:!0,enumerable:!0,get:function(){var v=new o(p);return Object.defineProperty(e,g,{configurable:!0,enumerable:!0,value:v}),v}})}c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var b;try{b=Vb()}catch{b=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",b]})})(Ri);var Jb=Ki,Or=Yo,cf=Kr;function vr(t){if(!(this instanceof vr))return new vr(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Or.toArray(t.entropy,t.entropyEnc||"hex"),r=Or.toArray(t.nonce,t.nonceEnc||"hex"),n=Or.toArray(t.pers,t.persEnc||"hex");cf(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Wb=vr;vr.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var a=0;a<this.V.length;a++)this.K[a]=0,this.V[a]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};vr.prototype._hmac=function(){return new Jb.hmac(this.hash,this.K)};vr.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};vr.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Or.toArray(e,r),n=Or.toArray(n,i),cf(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};vr.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Or.toArray(n,i||"hex"),this._update(n));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var o=a.slice(0,e);return this._update(n),this._reseed++,Or.encode(o,r)};var Zb=ar,Xb=gt,Oo=Xb.assert;function ct(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Yb=ct;ct.fromPublic=function(e,r,n){return r instanceof ct?r:new ct(e,{pub:r,pubEnc:n})};ct.fromPrivate=function(e,r,n){return r instanceof ct?r:new ct(e,{priv:r,privEnc:n})};ct.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};ct.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};ct.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};ct.prototype._importPrivate=function(e,r){this.priv=new Zb(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};ct.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Oo(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Oo(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};ct.prototype.derive=function(e){return e.validate()||Oo(e.validate(),"public point not validated"),e.mul(this.priv).getX()};ct.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};ct.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};ct.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var ci=ar,nc=gt,Qb=nc.assert;function Di(t,e){if(t instanceof Di)return t;this._importDER(t,e)||(Qb(t.r&&t.s,"Signature without r or s"),this.r=new ci(t.r,16),this.s=new ci(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var ep=Di;function tp(){this.place=0}function Va(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var i=0,a=0,o=e.place;a<n;a++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function as(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Di.prototype._importDER=function(e,r){e=nc.toArray(e,r);var n=new tp;if(e[n.place++]!==48)return!1;var i=Va(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var a=Va(e,n);if(a===!1||e[n.place]&128)return!1;var o=e.slice(n.place,a+n.place);if(n.place+=a,e[n.place++]!==2)return!1;var c=Va(e,n);if(c===!1||e.length!==c+n.place||e[n.place]&128)return!1;var b=e.slice(n.place,c+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(b[0]===0)if(b[1]&128)b=b.slice(1);else return!1;return this.r=new ci(o),this.s=new ci(b),this.recoveryParam=null,!0};function Ja(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Di.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=as(r),n=as(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Ja(i,r.length),i=i.concat(r),i.push(2),Ja(i,n.length);var a=i.concat(n),o=[48];return Ja(o,a.length),o=o.concat(a),nc.encode(o,e)};var Tr=ar,sf=Wb,rp=gt,Wa=Ri,np=ju,uf=rp.assert,ic=Yb,ji=ep;function It(t){if(!(this instanceof It))return new It(t);typeof t=="string"&&(uf(Object.prototype.hasOwnProperty.call(Wa,t),"Unknown curve "+t),t=Wa[t]),t instanceof Wa.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var ip=It;It.prototype.keyPair=function(e){return new ic(this,e)};It.prototype.keyFromPrivate=function(e,r){return ic.fromPrivate(this,e,r)};It.prototype.keyFromPublic=function(e,r){return ic.fromPublic(this,e,r)};It.prototype.genKeyPair=function(e){e||(e={});for(var r=new sf({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||np(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Tr(2));;){var a=new Tr(r.generate(n));if(!(a.cmp(i)>0))return a.iaddn(1),this.keyFromPrivate(a)}};It.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};It.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Tr(e,16));for(var a=this.n.byteLength(),o=r.getPrivate().toArray("be",a),c=e.toArray("be",a),b=new sf({hash:this.hash,entropy:o,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),g=this.n.sub(new Tr(1)),p=0;;p++){var v=i.k?i.k(p):new Tr(b.generate(this.n.byteLength()));if(v=this._truncateToN(v,!0),!(v.cmpn(1)<=0||v.cmp(g)>=0)){var A=this.g.mul(v);if(!A.isInfinity()){var E=A.getX(),B=E.umod(this.n);if(B.cmpn(0)!==0){var T=v.invm(this.n).mul(B.mul(r.getPrivate()).iadd(e));if(T=T.umod(this.n),T.cmpn(0)!==0){var L=(A.getY().isOdd()?1:0)|(E.cmp(B)!==0?2:0);return i.canonical&&T.cmp(this.nh)>0&&(T=this.n.sub(T),L^=1),new ji({r:B,s:T,recoveryParam:L})}}}}}};It.prototype.verify=function(e,r,n,i){e=this._truncateToN(new Tr(e,16)),n=this.keyFromPublic(n,i),r=new ji(r,"hex");var a=r.r,o=r.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var c=o.invm(this.n),b=c.mul(e).umod(this.n),g=c.mul(a).umod(this.n),p;return this.curve._maxwellTrick?(p=this.g.jmulAdd(b,n.getPublic(),g),p.isInfinity()?!1:p.eqXToP(a)):(p=this.g.mulAdd(b,n.getPublic(),g),p.isInfinity()?!1:p.getX().umod(this.n).cmp(a)===0)};It.prototype.recoverPubKey=function(t,e,r,n){uf((3&r)===r,"The recovery param is more than two bits"),e=new ji(e,n);var i=this.n,a=new Tr(t),o=e.r,c=e.s,b=r&1,g=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&g)throw new Error("Unable to find sencond key candinate");g?o=this.curve.pointFromX(o.add(this.curve.n),b):o=this.curve.pointFromX(o,b);var p=e.r.invm(i),v=i.sub(a).mul(p).umod(i),A=c.mul(p).umod(i);return this.g.mulAdd(v,o,A)};It.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new ji(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var a;try{a=this.recoverPubKey(t,e,i)}catch{continue}if(a.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Dn=gt,ff=Dn.assert,os=Dn.parseBytes,pn=Dn.cachedProperty;function tt(t,e){this.eddsa=t,this._secret=os(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=os(e.pub)}tt.fromPublic=function(e,r){return r instanceof tt?r:new tt(e,{pub:r})};tt.fromSecret=function(e,r){return r instanceof tt?r:new tt(e,{secret:r})};tt.prototype.secret=function(){return this._secret};pn(tt,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});pn(tt,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});pn(tt,"privBytes",function(){var e=this.eddsa,r=this.hash(),n=e.encodingLength-1,i=r.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});pn(tt,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});pn(tt,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});pn(tt,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});tt.prototype.sign=function(e){return ff(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};tt.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)};tt.prototype.getSecret=function(e){return ff(this._secret,"KeyPair is public only"),Dn.encode(this.secret(),e)};tt.prototype.getPublic=function(e){return Dn.encode(this.pubBytes(),e)};var ap=tt,op=ar,Ui=gt,cs=Ui.assert,Fi=Ui.cachedProperty,cp=Ui.parseBytes;function $r(t,e){this.eddsa=t,typeof e!="object"&&(e=cp(e)),Array.isArray(e)&&(cs(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),cs(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof op&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Fi($r,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Fi($r,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Fi($r,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Fi($r,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});$r.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};$r.prototype.toHex=function(){return Ui.encode(this.toBytes(),"hex").toUpperCase()};var sp=$r,up=Ki,fp=Ri,nn=gt,dp=nn.assert,df=nn.parseBytes,lf=ap,ss=sp;function ht(t){if(dp(t==="ed25519","only tested with ed25519 so far"),!(this instanceof ht))return new ht(t);t=fp[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=up.sha512}var lp=ht;ht.prototype.sign=function(e,r){e=df(e);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),e),a=this.g.mul(i),o=this.encodePoint(a),c=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),b=i.add(c).umod(this.curve.n);return this.makeSignature({R:a,S:b,Rencoded:o})};ht.prototype.verify=function(e,r,n){if(e=df(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var i=this.keyFromPublic(n),a=this.hashInt(r.Rencoded(),i.pubBytes(),e),o=this.g.mul(r.S()),c=r.R().add(i.pub().mul(a));return c.eq(o)};ht.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return nn.intFromLE(e.digest()).umod(this.curve.n)};ht.prototype.keyFromPublic=function(e){return lf.fromPublic(this,e)};ht.prototype.keyFromSecret=function(e){return lf.fromSecret(this,e)};ht.prototype.makeSignature=function(e){return e instanceof ss?e:new ss(this,e)};ht.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r};ht.prototype.decodePoint=function(e){e=nn.parseBytes(e);var r=e.length-1,n=e.slice(0,r).concat(e[r]&-129),i=(e[r]&128)!==0,a=nn.intFromLE(n);return this.curve.pointFromY(a,i)};ht.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};ht.prototype.decodeInt=function(e){return nn.intFromLE(e)};ht.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=s1.version,e.utils=gt,e.rand=ju,e.curve=ec,e.curves=Ri,e.ec=ip,e.eddsa=lp})($u);const hp=$u.ec,jt=new hp("secp256k1"),Ae=jt.curve,Oe=Ae.n.constructor;function bp(t,e){let r=new Oe(e);if(r.cmp(Ae.p)>=0)return null;r=r.toRed(Ae.red);let n=r.redSqr().redIMul(r).redIAdd(Ae.b).redSqrt();return t===3!==n.isOdd()&&(n=n.redNeg()),jt.keyPair({pub:{x:r,y:n}})}function pp(t,e,r){let n=new Oe(e),i=new Oe(r);if(n.cmp(Ae.p)>=0||i.cmp(Ae.p)>=0||(n=n.toRed(Ae.red),i=i.toRed(Ae.red),(t===6||t===7)&&i.isOdd()!==(t===7)))return null;const a=n.redSqr().redIMul(n);return i.redSqr().redISub(a.redIAdd(Ae.b)).isZero()?jt.keyPair({pub:{x:n,y:i}}):null}function fr(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:bp(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:pp(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function Mr(t,e){const r=e.encode(null,t.length===33);for(let n=0;n<t.length;++n)t[n]=r[n]}var yp={contextRandomize(){return 0},privateKeyVerify(t){const e=new Oe(t);return e.cmp(Ae.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new Oe(t),r=Ae.n.sub(e).umod(Ae.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){const r=new Oe(e);if(r.cmp(Ae.n)>=0||(r.iadd(new Oe(t)),r.cmp(Ae.n)>=0&&r.isub(Ae.n),r.isZero()))return 1;const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new Oe(e);if(r.cmp(Ae.n)>=0||r.isZero())return 1;r.imul(new Oe(t)),r.cmp(Ae.n)>=0&&(r=r.umod(Ae.n));const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){return fr(t)===null?1:0},publicKeyCreate(t,e){const r=new Oe(e);if(r.cmp(Ae.n)>=0||r.isZero())return 1;const n=jt.keyFromPrivate(e).getPublic();return Mr(t,n),0},publicKeyConvert(t,e){const r=fr(e);if(r===null)return 1;const n=r.getPublic();return Mr(t,n),0},publicKeyNegate(t,e){const r=fr(e);if(r===null)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),Mr(t,n),0},publicKeyCombine(t,e){const r=new Array(e.length);for(let i=0;i<e.length;++i)if(r[i]=fr(e[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(Mr(t,n),0)},publicKeyTweakAdd(t,e,r){const n=fr(e);if(n===null)return 1;if(r=new Oe(r),r.cmp(Ae.n)>=0)return 2;const i=n.getPublic().add(Ae.g.mul(r));return i.isInfinity()?2:(Mr(t,i),0)},publicKeyTweakMul(t,e,r){const n=fr(e);if(n===null)return 1;if(r=new Oe(r),r.cmp(Ae.n)>=0||r.isZero())return 2;const i=n.getPublic().mul(r);return Mr(t,i),0},signatureNormalize(t){const e=new Oe(t.subarray(0,32)),r=new Oe(t.subarray(32,64));return e.cmp(Ae.n)>=0||r.cmp(Ae.n)>=0?1:(r.cmp(jt.nh)===1&&t.set(Ae.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const r=e.subarray(0,32),n=e.subarray(32,64);if(new Oe(r).cmp(Ae.n)>=0||new Oe(n).cmp(Ae.n)>=0)return 1;const{output:i}=t;let a=i.subarray(4,37);a[0]=0,a.set(r,1);let o=33,c=0;for(;o>1&&a[c]===0&&!(a[c+1]&128);--o,++c);if(a=a.subarray(c),a[0]&128||o>1&&a[0]===0&&!(a[1]&128))return 1;let b=i.subarray(39,72);b[0]=0,b.set(n,1);let g=33,p=0;for(;g>1&&b[p]===0&&!(b[p+1]&128);--g,++p);return b=b.subarray(p),b[0]&128||g>1&&b[0]===0&&!(b[1]&128)?1:(t.outputlen=6+o+g,i[0]=48,i[1]=t.outputlen-2,i[2]=2,i[3]=a.length,i.set(a,4),i[4+o]=2,i[5+o]=b.length,i.set(b,6+o),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;const n=e[5+r];if(n===0||6+r+n!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||n>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let i=e.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let a=e.subarray(6+r);if(a.length===33&&a[0]===0&&(a=a.slice(1)),a.length>32)throw new Error("S length is too long");let o=new Oe(i);o.cmp(Ae.n)>=0&&(o=new Oe(0));let c=new Oe(e.subarray(6+r));return c.cmp(Ae.n)>=0&&(c=new Oe(0)),t.set(o.toArrayLike(Uint8Array,"be",32),0),t.set(c.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,i){if(i){const c=i;i=b=>{const g=c(e,r,null,n,b);if(!(g instanceof Uint8Array&&g.length===32))throw new Error("This is the way");return new Oe(g)}}const a=new Oe(r);if(a.cmp(Ae.n)>=0||a.isZero())return 1;let o;try{o=jt.sign(e,r,{canonical:!0,k:i,pers:n})}catch{return 1}return t.signature.set(o.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(o.s.toArrayLike(Uint8Array,"be",32),32),t.recid=o.recoveryParam,0},ecdsaVerify(t,e,r){const n={r:t.subarray(0,32),s:t.subarray(32,64)},i=new Oe(n.r),a=new Oe(n.s);if(i.cmp(Ae.n)>=0||a.cmp(Ae.n)>=0)return 1;if(a.cmp(jt.nh)===1||i.isZero()||a.isZero())return 3;const o=fr(r);if(o===null)return 2;const c=o.getPublic();return jt.verify(e,n,c)?0:3},ecdsaRecover(t,e,r,n){const i={r:e.slice(0,32),s:e.slice(32,64)},a=new Oe(i.r),o=new Oe(i.s);if(a.cmp(Ae.n)>=0||o.cmp(Ae.n)>=0)return 1;if(a.isZero()||o.isZero())return 2;let c;try{c=jt.recoverPubKey(n,i,r)}catch{return 2}return Mr(t,c),0},ecdh(t,e,r,n,i,a,o){const c=fr(e);if(c===null)return 1;const b=new Oe(r);if(b.cmp(Ae.n)>=0||b.isZero())return 2;const g=c.getPublic().mul(b);if(i===void 0){const p=g.encode(null,!0),v=jt.hash().update(p).digest();for(let A=0;A<32;++A)t[A]=v[A]}else{a||(a=new Uint8Array(32));const p=g.getX().toArray("be",32);for(let B=0;B<32;++B)a[B]=p[B];o||(o=new Uint8Array(32));const v=g.getY().toArray("be",32);for(let B=0;B<32;++B)o[B]=v[B];const A=i(a,o,n);if(!(A instanceof Uint8Array&&A.length===t.length))return 2;t.set(A)}return 0}},hf=Vh(yp),vp=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(un,"__esModule",{value:!0});un.PublicKey=void 0;const us=Qe,gp=Fo,mp=vp(hf),dt=rr;function _p(t){switch(t){case dt.KeyType.ED25519:return"ed25519";case dt.KeyType.SECP256K1:return"secp256k1";default:throw new Error(`Unknown key type ${t}`)}}function wp(t){switch(t.toLowerCase()){case"ed25519":return dt.KeyType.ED25519;case"secp256k1":return dt.KeyType.SECP256K1;default:throw new Error(`Unknown key type ${t}`)}}function Sp(t){switch(t){case dt.KeyType.ED25519:return"ed25519Key";case dt.KeyType.SECP256K1:return"secp256k1Key";default:throw Error(`unknown type ${t}`)}}class Ap{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this[r]=e[r]})}}class si extends Ap{enum;ed25519Key;secp256k1Key;constructor(e){const r=Sp(e.keyType);super({[r]:e}),this[r]=e,this.enum=r}static from(e){return typeof e=="string"?si.fromString(e):e}static fromString(e){const r=e.split(":");let n,i;if(r.length===1)n=r[0];else if(r.length===2)n=r[1],i=wp(r[0]);else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>");const a=(0,us.baseDecode)(n);i||(i=a.length===dt.KeySize.SECP256k1_PUBLIC_KEY?dt.KeyType.SECP256K1:dt.KeyType.ED25519);const o=i===dt.KeyType.ED25519?dt.KeySize.ED25519_PUBLIC_KEY:dt.KeySize.SECP256k1_PUBLIC_KEY;if(a.length!==o)throw new Error(`Invalid public key size (${a.length}), must be ${o}`);return new si({keyType:i,data:a})}toString(){const e=(0,us.baseEncode)(this.data);return`${_p(this.keyType)}:${e}`}verify(e,r){const n=this.keyType,i=this.data;switch(n){case dt.KeyType.ED25519:return gp.ed25519.verify(r,e,i);case dt.KeyType.SECP256K1:return mp.default.ecdsaVerify(r.subarray(0,64),e,new Uint8Array([4,...i]));default:throw new Error(`Unknown key type: ${n}`)}}get keyPair(){return this.ed25519Key||this.secp256k1Key}get keyType(){return this.keyPair.keyType}get data(){return this.keyPair.data}}un.PublicKey=si;var Ep=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kn,"__esModule",{value:!0});kn.KeyPairEd25519=void 0;const Wn=Qe,Za=Fo,xp=Ep(Ku),Xa=rr,Ip=sn,Mp=un;class ac extends Ip.KeyPairBase{publicKey;secretKey;extendedSecretKey;constructor(e){super();const r=(0,Wn.baseDecode)(e),n=new Uint8Array(r.slice(0,Xa.KeySize.SECRET_KEY)),i=Za.ed25519.getPublicKey(new Uint8Array(n));this.publicKey=new Mp.PublicKey({keyType:Xa.KeyType.ED25519,data:i}),this.secretKey=(0,Wn.baseEncode)(n),this.extendedSecretKey=e}static fromRandom(){const e=(0,xp.default)(Xa.KeySize.SECRET_KEY),r=Za.ed25519.getPublicKey(new Uint8Array(e)),n=new Uint8Array([...e,...r]);return new ac((0,Wn.baseEncode)(n))}sign(e){return{signature:Za.ed25519.sign(e,(0,Wn.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(e,r){return this.publicKey.verify(e,r)}toString(){return`ed25519:${this.extendedSecretKey}`}getPublicKey(){return this.publicKey}}kn.KeyPairEd25519=ac;var jn={},bf=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jn,"__esModule",{value:!0});jn.KeyPairSecp256k1=void 0;const Ya=rr,Pp=sn,Bp=un,Qa=bf(hf),Op=bf(Ku),Zn=Qe;class oc extends Pp.KeyPairBase{publicKey;secretKey;extendedSecretKey;constructor(e){super();const r=(0,Zn.baseDecode)(e),n=new Uint8Array(r.slice(0,Ya.KeySize.SECRET_KEY)),i=Qa.default.publicKeyCreate(new Uint8Array(n),!1),a=i.subarray(1,i.length);this.publicKey=new Bp.PublicKey({keyType:Ya.KeyType.SECP256K1,data:a}),this.secretKey=(0,Zn.baseEncode)(n),this.extendedSecretKey=e}static fromRandom(){const e=(0,Op.default)(Ya.KeySize.SECRET_KEY),r=Qa.default.publicKeyCreate(new Uint8Array(e),!1),n=r.subarray(1,r.length),i=new Uint8Array([...e,...n]);return new oc((0,Zn.baseEncode)(i))}sign(e){const{signature:r,recid:n}=Qa.default.ecdsaSign(e,(0,Zn.baseDecode)(this.secretKey));return{signature:new Uint8Array([...r,n]),publicKey:this.publicKey}}verify(e,r){return this.publicKey.verify(e,r)}toString(){return`secp256k1:${this.extendedSecretKey}`}getPublicKey(){return this.publicKey}}jn.KeyPairSecp256k1=oc;Object.defineProperty(vi,"__esModule",{value:!0});vi.KeyPair=void 0;const Tp=sn,fs=kn,ds=jn;class Cp extends Tp.KeyPairBase{static fromRandom(e){switch(e.toUpperCase()){case"ED25519":return fs.KeyPairEd25519.fromRandom();case"SECP256K1":return ds.KeyPairSecp256k1.fromRandom();default:throw new Error(`Unknown curve ${e}`)}}static fromString(e){const r=e.split(":");if(r.length===2)switch(r[0].toUpperCase()){case"ED25519":return new fs.KeyPairEd25519(r[1]);case"SECP256K1":return new ds.KeyPairSecp256k1(r[1]);default:throw new Error(`Unknown curve: ${r[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}vi.KeyPair=Cp;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyPairSecp256k1=t.KeyPairEd25519=t.KeyPair=t.KeyType=void 0;var e=rr;Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return e.KeyType}});var r=vi;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return r.KeyPair}});var n=kn;Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return n.KeyPairEd25519}});var i=jn;Object.defineProperty(t,"KeyPairSecp256k1",{enumerable:!0,get:function(){return i.KeyPairSecp256k1}});var a=un;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return a.PublicKey}})})(Kt);var yn={};Object.defineProperty(yn,"__esModule",{value:!0});yn.KeyStore=void 0;class kp{}yn.KeyStore=kp;Object.defineProperty(yi,"__esModule",{value:!0});yi.InMemoryKeyStore=void 0;const Np=Kt,Lp=yn;class Rp extends Lp.KeyStore{keys;constructor(){super(),this.keys={}}async setKey(e,r,n){this.keys[`${r}:${e}`]=n.toString()}async getKey(e,r){const n=this.keys[`${r}:${e}`];return n?Np.KeyPair.fromString(n):null}async removeKey(e,r){delete this.keys[`${r}:${e}`]}async clear(){this.keys={}}async getNetworks(){const e=new Set;return Object.keys(this.keys).forEach(r=>{const n=r.split(":");e.add(n[1])}),Array.from(e.values())}async getAccounts(e){const r=new Array;return Object.keys(this.keys).forEach(n=>{const i=n.split(":");i[i.length-1]===e&&r.push(i.slice(0,i.length-1).join(":"))}),r}toString(){return"InMemoryKeyStore"}}yi.InMemoryKeyStore=Rp;var qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.MergeKeyStore=void 0;const Kp=yn;class $p extends Kp.KeyStore{options;keyStores;constructor(e,r={writeKeyStoreIndex:0}){super(),this.options=r,this.keyStores=e}async setKey(e,r,n){await this.keyStores[this.options.writeKeyStoreIndex].setKey(e,r,n)}async getKey(e,r){for(const n of this.keyStores){const i=await n.getKey(e,r);if(i)return i}return null}async removeKey(e,r){for(const n of this.keyStores)await n.removeKey(e,r)}async clear(){for(const e of this.keyStores)await e.clear()}async getNetworks(){const e=new Set;for(const r of this.keyStores)for(const n of await r.getNetworks())e.add(n);return Array.from(e)}async getAccounts(e){const r=new Set;for(const n of this.keyStores)for(const i of await n.getAccounts(e))r.add(i);return Array.from(r)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}qi.MergeKeyStore=$p;var zi={};Object.defineProperty(zi,"__esModule",{value:!0});zi.MultiContractKeyStore=void 0;class Dp{}zi.MultiContractKeyStore=Dp;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultiContractKeyStore=t.MergeKeyStore=t.KeyStore=t.InMemoryKeyStore=void 0;var e=yi;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return e.InMemoryKeyStore}});var r=yn;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return r.KeyStore}});var n=qi;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return n.MergeKeyStore}});var i=zi;Object.defineProperty(t,"MultiContractKeyStore",{enumerable:!0,get:function(){return i.MultiContractKeyStore}})})(Rr);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyStore=void 0;var e=Rr;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return e.KeyStore}})})(Fs);var pf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryKeyStore=void 0;var e=Rr;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return e.InMemoryKeyStore}})})(pf);var yf={},vf={},Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.BrowserLocalStorageKeyStore=void 0;const jp=Kt,Up=Rr,Fp="near-api-js:keystore:";class qp extends Up.KeyStore{localStorage;prefix;constructor(e=window.localStorage,r=Fp){super(),this.localStorage=e,this.prefix=r}async setKey(e,r,n){this.localStorage.setItem(this.storageKeyForSecretKey(e,r),n.toString())}async getKey(e,r){const n=this.localStorage.getItem(this.storageKeyForSecretKey(e,r));return n?jp.KeyPair.fromString(n):null}async removeKey(e,r){this.localStorage.removeItem(this.storageKeyForSecretKey(e,r))}async clear(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)}async getNetworks(){const e=new Set;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())}async getAccounts(e){const r=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const i=n.substring(this.prefix.length).split(":");i[1]===e&&r.push(i[0])}return r}storageKeyForSecretKey(e,r){return`${this.prefix}${r}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}Hi.BrowserLocalStorageKeyStore=qp;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.MultiContractBrowserLocalStorageKeyStore=void 0;const zp=Kt,Hp=Rr,ls="near-api-js:keystore:";class Gp extends Hp.MultiContractKeyStore{localStorage;prefix;constructor(e=window.localStorage,r=ls){super(),this.localStorage=e,this.prefix=r||ls}async setKey(e,r,n,i){this.localStorage.setItem(this.storageKeyForSecretKey(e,r,i),n.toString())}async getKey(e,r,n){const i=this.localStorage.getItem(this.storageKeyForSecretKey(e,r,n));return i?zp.KeyPair.fromString(i):null}async removeKey(e,r,n){this.localStorage.removeItem(this.storageKeyForSecretKey(e,r,n))}async clear(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)}async getNetworks(){const e=new Set;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())}async getAccounts(e){const r=[];for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const i=n.substring(this.prefix.length).split(":");i[1]===e&&r.push(i[0])}return r}async getContracts(e,r){const n=[];for(const i of this.storageKeys())if(i.startsWith(this.prefix)){const a=i.substring(this.prefix.length).split(":");a[1]===e&&a[0]===r&&n.push(a[2])}return n}storageKeyForSecretKey(e,r,n){return`${this.prefix}${r}:${e}:${n}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}Gi.MultiContractBrowserLocalStorageKeyStore=Gp;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultiContractBrowserLocalStorageKeyStore=t.BrowserLocalStorageKeyStore=void 0;var e=Hi;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return e.BrowserLocalStorageKeyStore}});var r=Gi;Object.defineProperty(t,"MultiContractBrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return r.MultiContractBrowserLocalStorageKeyStore}})})(vf);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserLocalStorageKeyStore=void 0;var e=vf;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return e.BrowserLocalStorageKeyStore}})})(yf);var gf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=void 0;var e=Rr;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return e.MergeKeyStore}})})(gf);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.BrowserLocalStorageKeyStore=t.InMemoryKeyStore=t.KeyStore=void 0;const e=Fs;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return e.KeyStore}});const r=pf;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return r.InMemoryKeyStore}});const n=yf;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return n.BrowserLocalStorageKeyStore}});const i=gf;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return i.MergeKeyStore}})})(Us);var mf={},_f={},wf={},vn={},Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.exponentialBackoff=void 0;async function Vp(t,e,r,n){let i=t;for(let a=0;a<e;a++){const o=await n();if(o)return o;await Jp(i),i*=r}return null}Un.exponentialBackoff=Vp;function Jp(t){return new Promise(e=>setTimeout(e,t))}var Vi={},gr={},kr={},Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.Action=Ie.SignedDelegate=Ie.DeleteAccount=Ie.DeleteKey=Ie.AddKey=Ie.Stake=Ie.Transfer=Ie.FunctionCall=Ie.DeployContract=Ie.CreateAccount=Ie.AccessKey=Ie.AccessKeyPermission=Ie.FullAccessPermission=Ie.FunctionCallPermission=void 0;const Sf=bt;class Wp{allowance;receiverId;methodNames;constructor({allowance:e,receiverId:r,methodNames:n}){this.allowance=e,this.receiverId=r,this.methodNames=n}}Ie.FunctionCallPermission=Wp;class Zp{}Ie.FullAccessPermission=Zp;class Xp extends Sf.Enum{enum;functionCall;fullAccess;constructor(e){super(e);for(const[r,n]of Object.entries(e||{}))this[r]=n,this.enum=r}}Ie.AccessKeyPermission=Xp;class Yp{nonce;permission;constructor({nonce:e,permission:r}){this.nonce=e,this.permission=r}}Ie.AccessKey=Yp;class Qp{}Ie.CreateAccount=Qp;class ey{code;constructor({code:e}){this.code=e}}Ie.DeployContract=ey;class ty{methodName;args;gas;deposit;constructor({methodName:e,args:r,gas:n,deposit:i}){this.methodName=e,this.args=r,this.gas=n,this.deposit=i}}Ie.FunctionCall=ty;class ry{deposit;constructor({deposit:e}){this.deposit=e}}Ie.Transfer=ry;class ny{stake;publicKey;constructor({stake:e,publicKey:r}){this.stake=e,this.publicKey=r}}Ie.Stake=ny;class iy{publicKey;accessKey;constructor({publicKey:e,accessKey:r}){this.publicKey=e,this.accessKey=r}}Ie.AddKey=iy;class ay{publicKey;constructor({publicKey:e}){this.publicKey=e}}Ie.DeleteKey=ay;class oy{beneficiaryId;constructor({beneficiaryId:e}){this.beneficiaryId=e}}Ie.DeleteAccount=oy;class cy{delegateAction;signature;constructor({delegateAction:e,signature:r}){this.delegateAction=e,this.signature=r}}Ie.SignedDelegate=cy;class sy extends Sf.Enum{enum;createAccount;deployContract;functionCall;transfer;stake;addKey;deleteKey;deleteAccount;signedDelegate;constructor(e){super(e);for(const[r,n]of Object.entries(e||{}))this[r]=n,this.enum=r}}Ie.Action=sy;Object.defineProperty(kr,"__esModule",{value:!0});kr.actionCreators=kr.stringifyJsonOrBytes=void 0;const Ce=Ie;function uy(){return new Ce.AccessKey({nonce:0n,permission:new Ce.AccessKeyPermission({fullAccess:new Ce.FullAccessPermission})})}function fy(t,e,r){return new Ce.AccessKey({nonce:0n,permission:new Ce.AccessKeyPermission({functionCall:new Ce.FunctionCallPermission({receiverId:t,allowance:r,methodNames:e})})})}function dy(){return new Ce.Action({createAccount:new Ce.CreateAccount})}function ly(t){return new Ce.Action({deployContract:new Ce.DeployContract({code:t})})}function Af(t){return t.byteLength!==void 0&&t.byteLength===t.length?t:Buffer.from(JSON.stringify(t))}kr.stringifyJsonOrBytes=Af;function hy(t,e,r=0n,n=0n,i=Af,a=!1){return a?new Ce.Action({functionCall:new Ce.FunctionCall({methodName:t,args:e,gas:r,deposit:n})}):new Ce.Action({functionCall:new Ce.FunctionCall({methodName:t,args:i(e),gas:r,deposit:n})})}function by(t=0n){return new Ce.Action({transfer:new Ce.Transfer({deposit:t})})}function py(t=0n,e){return new Ce.Action({stake:new Ce.Stake({stake:t,publicKey:e})})}function yy(t,e){return new Ce.Action({addKey:new Ce.AddKey({publicKey:t,accessKey:e})})}function vy(t){return new Ce.Action({deleteKey:new Ce.DeleteKey({publicKey:t})})}function gy(t){return new Ce.Action({deleteAccount:new Ce.DeleteAccount({beneficiaryId:t})})}function my({delegateAction:t,signature:e}){return new Ce.Action({signedDelegate:new Ce.SignedDelegate({delegateAction:t,signature:e})})}kr.actionCreators={addKey:yy,createAccount:dy,deleteAccount:gy,deleteKey:vy,deployContract:ly,fullAccessKey:uy,functionCall:hy,functionCallAccessKey:fy,signedDelegate:my,stake:py,transfer:by};var Fn={},Ji={},mr={},Wi={},gn={};gn.__esModule=!0;gn.integers=void 0;gn.integers=["u8","u16","u32","u64","u128","i8","i16","i32","i64","i128","f32","f64"];var Nr={};Nr.__esModule=!0;Nr.DecodeBuffer=Nr.EncodeBuffer=void 0;var _y=function(){function t(){this.offset=0,this.buffer_size=256,this.buffer=new ArrayBuffer(this.buffer_size),this.view=new DataView(this.buffer)}return t.prototype.resize_if_necessary=function(e){if(this.buffer_size-this.offset<e){this.buffer_size=Math.max(this.buffer_size*2,this.buffer_size+e);var r=new ArrayBuffer(this.buffer_size);new Uint8Array(r).set(new Uint8Array(this.buffer)),this.buffer=r,this.view=new DataView(r)}},t.prototype.get_used_buffer=function(){return new Uint8Array(this.buffer).slice(0,this.offset)},t.prototype.store_value=function(e,r){var n=r.substring(1),i=parseInt(n)/8;this.resize_if_necessary(i);var a=r[0]==="f"?"setFloat".concat(n):r[0]==="i"?"setInt".concat(n):"setUint".concat(n);this.view[a](this.offset,e,!0),this.offset+=i},t.prototype.store_bytes=function(e){this.resize_if_necessary(e.length),new Uint8Array(this.buffer).set(new Uint8Array(e),this.offset),this.offset+=e.length},t}();Nr.EncodeBuffer=_y;var wy=function(){function t(e){this.offset=0,this.buffer_size=e.length,this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e),this.view=new DataView(this.buffer)}return t.prototype.assert_enough_buffer=function(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Error in schema, the buffer is smaller than expected")},t.prototype.consume_value=function(e){var r=e.substring(1),n=parseInt(r)/8;this.assert_enough_buffer(n);var i=e[0]==="f"?"getFloat".concat(r):e[0]==="i"?"getInt".concat(r):"getUint".concat(r),a=this.view[i](this.offset,!0);return this.offset+=n,a},t.prototype.consume_bytes=function(e){this.assert_enough_buffer(e);var r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r},t}();Nr.DecodeBuffer=wy;var it={},Sy=X&&X.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();it.__esModule=!0;it.validate_schema=it.ErrorSchema=it.expect_enum=it.expect_same_size=it.expect_bigint=it.expect_type=it.isArrayLike=void 0;var Ay=gn;function Ey(t){return Array.isArray(t)||!!t&&typeof t=="object"&&"length"in t&&typeof t.length=="number"&&(t.length===0||t.length>0&&t.length-1 in t)}it.isArrayLike=Ey;function xy(t,e,r){if(typeof t!==e)throw new Error("Expected ".concat(e," not ").concat(typeof t,"(").concat(t,") at ").concat(r.join(".")))}it.expect_type=xy;function Iy(t,e){var r=["number","string","bigint","boolean"].includes(typeof t),n=typeof t=="object"&&t!==null&&"toString"in t;if(!r&&!n)throw new Error("Expected bigint, number, boolean or string not ".concat(typeof t,"(").concat(t,") at ").concat(e.join(".")))}it.expect_bigint=Iy;function My(t,e,r){if(t!==e)throw new Error("Array length ".concat(t," does not match schema length ").concat(e," at ").concat(r.join(".")))}it.expect_same_size=My;function Py(t,e){if(typeof t!="object"||t===null)throw new Error("Expected object not ".concat(typeof t,"(").concat(t,") at ").concat(e.join(".")))}it.expect_enum=Py;var hs=Ay.integers.concat(["bool","string"]),bs=["option","enum","array","set","map","struct"],Lr=function(t){Sy(e,t);function e(r,n){var i="Invalid schema: ".concat(JSON.stringify(r)," expected ").concat(n);return t.call(this,i)||this}return e}(Error);it.ErrorSchema=Lr;function _r(t){if(!(typeof t=="string"&&hs.includes(t))){if(t&&typeof t=="object"){var e=Object.keys(t);if(e.length===1&&bs.includes(e[0])){var r=e[0];if(r==="option")return _r(t[r]);if(r==="enum")return By(t[r]);if(r==="array")return Oy(t[r]);if(r==="set")return _r(t[r]);if(r==="map")return Ty(t[r]);if(r==="struct")return Cy(t[r])}}throw new Lr(t,bs.join(", ")+" or "+hs.join(", "))}}it.validate_schema=_r;function By(t){if(!Array.isArray(t))throw new Lr(t,"Array");for(var e=0,r=t;e<r.length;e++){var n=r[e];if(typeof n!="object"||!("struct"in n))throw new Error('Missing "struct" key in enum schema');if(typeof n.struct!="object"||Object.keys(n.struct).length!==1)throw new Error('The "struct" in each enum must have a single key');_r({struct:n.struct})}}function Oy(t){if(typeof t!="object")throw new Lr(t,"{ type, len? }");if(t.len&&typeof t.len!="number")throw new Error("Invalid schema: ".concat(t));if("type"in t)return _r(t.type);throw new Lr(t,"{ type, len? }")}function Ty(t){if(typeof t=="object"&&"key"in t&&"value"in t)_r(t.key),_r(t.value);else throw new Lr(t,"{ key, value }")}function Cy(t){if(typeof t!="object")throw new Lr(t,"object");for(var e in t)_r(t[e])}var ky=X&&X.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ny=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ly=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ky(e,t,r);return Ny(e,t),e};Wi.__esModule=!0;Wi.BorshSerializer=void 0;var Ry=gn,Ky=Nr,Ct=Ly(it),$y=function(){function t(e){this.encoded=new Ky.EncodeBuffer,this.fieldPath=["value"],this.checkTypes=e}return t.prototype.encode=function(e,r){return this.encode_value(e,r),this.encoded.get_used_buffer()},t.prototype.encode_value=function(e,r){if(typeof r=="string"){if(Ry.integers.includes(r))return this.encode_integer(e,r);if(r==="string")return this.encode_string(e);if(r==="bool")return this.encode_boolean(e)}if(typeof r=="object"){if("option"in r)return this.encode_option(e,r);if("enum"in r)return this.encode_enum(e,r);if("array"in r)return this.encode_array(e,r);if("set"in r)return this.encode_set(e,r);if("map"in r)return this.encode_map(e,r);if("struct"in r)return this.encode_struct(e,r)}},t.prototype.encode_integer=function(e,r){var n=parseInt(r.substring(1));n<=32||r=="f64"?(this.checkTypes&&Ct.expect_type(e,"number",this.fieldPath),this.encoded.store_value(e,r)):(this.checkTypes&&Ct.expect_bigint(e,this.fieldPath),this.encode_bigint(BigInt(e),n))},t.prototype.encode_bigint=function(e,r){for(var n=r/8,i=new Uint8Array(n),a=0;a<n;a++)i[a]=Number(e&BigInt(255)),e=e>>BigInt(8);this.encoded.store_bytes(new Uint8Array(i))},t.prototype.encode_string=function(e){this.checkTypes&&Ct.expect_type(e,"string",this.fieldPath);var r=e;this.encoded.store_value(r.length,"u32");for(var n=0;n<r.length;n++)this.encoded.store_value(r.charCodeAt(n),"u8")},t.prototype.encode_boolean=function(e){this.checkTypes&&Ct.expect_type(e,"boolean",this.fieldPath),this.encoded.store_value(e?1:0,"u8")},t.prototype.encode_option=function(e,r){e==null?this.encoded.store_value(0,"u8"):(this.encoded.store_value(1,"u8"),this.encode_value(e,r.option))},t.prototype.encode_enum=function(e,r){this.checkTypes&&Ct.expect_enum(e,this.fieldPath);for(var n=Object.keys(e)[0],i=0;i<r.enum.length;i++){var a=r.enum[i];if(n===Object.keys(a.struct)[0])return this.encoded.store_value(i,"u8"),this.encode_struct(e,a)}throw new Error("Enum key (".concat(n,") not found in enum schema: ").concat(JSON.stringify(r)," at ").concat(this.fieldPath.join(".")))},t.prototype.encode_array=function(e,r){if(Ct.isArrayLike(e))return this.encode_arraylike(e,r);if(e instanceof ArrayBuffer)return this.encode_buffer(e,r);throw new Error("Expected Array-like not ".concat(typeof e,"(").concat(e,") at ").concat(this.fieldPath.join(".")))},t.prototype.encode_arraylike=function(e,r){r.array.len?Ct.expect_same_size(e.length,r.array.len,this.fieldPath):this.encoded.store_value(e.length,"u32");for(var n=0;n<e.length;n++)this.encode_value(e[n],r.array.type)},t.prototype.encode_buffer=function(e,r){r.array.len?Ct.expect_same_size(e.byteLength,r.array.len,this.fieldPath):this.encoded.store_value(e.byteLength,"u32"),this.encoded.store_bytes(new Uint8Array(e))},t.prototype.encode_set=function(e,r){this.checkTypes&&Ct.expect_type(e,"object",this.fieldPath);var n=e instanceof Set,i=n?Array.from(e.values()):Object.values(e);this.encoded.store_value(i.length,"u32");for(var a=0,o=i;a<o.length;a++){var c=o[a];this.encode_value(c,r.set)}},t.prototype.encode_map=function(e,r){this.checkTypes&&Ct.expect_type(e,"object",this.fieldPath);var n=e instanceof Map,i=n?Array.from(e.keys()):Object.keys(e);this.encoded.store_value(i.length,"u32");for(var a=0,o=i;a<o.length;a++){var c=o[a];this.encode_value(c,r.map.key),this.encode_value(n?e.get(c):e[c],r.map.value)}},t.prototype.encode_struct=function(e,r){this.checkTypes&&Ct.expect_type(e,"object",this.fieldPath);for(var n=0,i=Object.keys(r.struct);n<i.length;n++){var a=i[n];this.fieldPath.push(a),this.encode_value(e[a],r.struct[a]),this.fieldPath.pop()}},t}();Wi.BorshSerializer=$y;var Zi={};Zi.__esModule=!0;Zi.BorshDeserializer=void 0;var Dy=gn,jy=Nr,Uy=function(){function t(e){this.buffer=new jy.DecodeBuffer(e)}return t.prototype.decode=function(e){return this.decode_value(e)},t.prototype.decode_value=function(e){if(typeof e=="string"){if(Dy.integers.includes(e))return this.decode_integer(e);if(e==="string")return this.decode_string();if(e==="bool")return this.decode_boolean()}if(typeof e=="object"){if("option"in e)return this.decode_option(e);if("enum"in e)return this.decode_enum(e);if("array"in e)return this.decode_array(e);if("set"in e)return this.decode_set(e);if("map"in e)return this.decode_map(e);if("struct"in e)return this.decode_struct(e)}throw new Error("Unsupported type: ".concat(e))},t.prototype.decode_integer=function(e){var r=parseInt(e.substring(1));return r<=32||e=="f64"?this.buffer.consume_value(e):this.decode_bigint(r,e.startsWith("i"))},t.prototype.decode_bigint=function(e,r){r===void 0&&(r=!1);var n=e/8,i=new Uint8Array(this.buffer.consume_bytes(n)),a=i.reduceRight(function(o,c){return o+c.toString(16).padStart(2,"0")},"");return r&&i[n-1]?BigInt.asIntN(e,BigInt("0x".concat(a))):BigInt("0x".concat(a))},t.prototype.decode_string=function(){var e=this.decode_integer("u32"),r=new Uint8Array(this.buffer.consume_bytes(e));return String.fromCharCode.apply(null,r)},t.prototype.decode_boolean=function(){return this.buffer.consume_value("u8")>0},t.prototype.decode_option=function(e){var r=this.buffer.consume_value("u8");if(r===1)return this.decode_value(e.option);if(r!==0)throw new Error("Invalid option ".concat(r));return null},t.prototype.decode_enum=function(e){var r,n=this.buffer.consume_value("u8");if(n>e.enum.length)throw new Error("Enum option ".concat(n," is not available"));var i=e.enum[n].struct,a=Object.keys(i)[0];return r={},r[a]=this.decode_value(i[a]),r},t.prototype.decode_array=function(e){for(var r=[],n=e.array.len?e.array.len:this.decode_integer("u32"),i=0;i<n;++i)r.push(this.decode_value(e.array.type));return r},t.prototype.decode_set=function(e){for(var r=this.decode_integer("u32"),n=new Set,i=0;i<r;++i)n.add(this.decode_value(e.set));return n},t.prototype.decode_map=function(e){for(var r=this.decode_integer("u32"),n=new Map,i=0;i<r;++i){var a=this.decode_value(e.map.key),o=this.decode_value(e.map.value);n.set(a,o)}return n},t.prototype.decode_struct=function(e){var r={};for(var n in e.struct)r[n]=this.decode_value(e.struct[n]);return r},t}();Zi.BorshDeserializer=Uy;var Fy=X&&X.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),qy=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zy=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Fy(e,t,r);return qy(e,t),e};mr.__esModule=!0;mr.deserialize=mr.serialize=void 0;var Hy=Wi,Gy=Zi,Ef=zy(it);function Vy(t,e,r){r===void 0&&(r=!0),r&&Ef.validate_schema(t);var n=new Hy.BorshSerializer(r);return n.encode(e,t)}mr.serialize=Vy;function Jy(t,e,r){r===void 0&&(r=!0),r&&Ef.validate_schema(t);var n=new Gy.BorshDeserializer(e);return n.decode(t)}mr.deserialize=Jy;var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.DelegateActionPrefix=void 0;const Wy=Math.pow(2,30),Zy={MetaTransactions:366};class Xy{prefix;constructor({prefix:e}){this.prefix=e}}class Yy extends Xy{constructor(e){super({prefix:Wy+e})}}class Qy extends Yy{constructor(){super(Zy.MetaTransactions)}}Xi.DelegateActionPrefix=Qy;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SCHEMA=t.SignedTransaction=t.Transaction=t.decodeSignedTransaction=t.decodeTransaction=t.encodeTransaction=t.encodeSignedDelegate=t.encodeDelegateAction=void 0;const e=mr,r=Xi;function n(p){return new Uint8Array([...(0,e.serialize)(t.SCHEMA.DelegateActionPrefix,new r.DelegateActionPrefix),...(0,e.serialize)(t.SCHEMA.DelegateAction,p)])}t.encodeDelegateAction=n;function i(p){return(0,e.serialize)(t.SCHEMA.SignedDelegate,p)}t.encodeSignedDelegate=i;function a(p){const v=p instanceof g?t.SCHEMA.SignedTransaction:t.SCHEMA.Transaction;return(0,e.serialize)(v,p)}t.encodeTransaction=a;function o(p){return new b((0,e.deserialize)(t.SCHEMA.Transaction,p))}t.decodeTransaction=o;function c(p){return new g((0,e.deserialize)(t.SCHEMA.SignedTransaction,p))}t.decodeSignedTransaction=c;class b{signerId;publicKey;nonce;receiverId;actions;blockHash;constructor({signerId:v,publicKey:A,nonce:E,receiverId:B,actions:T,blockHash:L}){this.signerId=v,this.publicKey=A,this.nonce=E,this.receiverId=B,this.actions=T,this.blockHash=L}encode(){return a(this)}static decode(v){return o(v)}}t.Transaction=b;class g{transaction;signature;constructor({transaction:v,signature:A}){this.transaction=v,this.signature=A}encode(){return a(this)}static decode(v){return c(v)}}t.SignedTransaction=g,t.SCHEMA=new class{Ed25519Signature={struct:{data:{array:{type:"u8",len:64}}}};Secp256k1Signature={struct:{data:{array:{type:"u8",len:65}}}};Signature={enum:[{struct:{ed25519Signature:this.Ed25519Signature}},{struct:{secp256k1Signature:this.Secp256k1Signature}}]};Ed25519Data={struct:{data:{array:{type:"u8",len:32}}}};Secp256k1Data={struct:{data:{array:{type:"u8",len:64}}}};PublicKey={enum:[{struct:{ed25519Key:this.Ed25519Data}},{struct:{secp256k1Key:this.Secp256k1Data}}]};FunctionCallPermission={struct:{allowance:{option:"u128"},receiverId:"string",methodNames:{array:{type:"string"}}}};FullAccessPermission={struct:{}};AccessKeyPermission={enum:[{struct:{functionCall:this.FunctionCallPermission}},{struct:{fullAccess:this.FullAccessPermission}}]};AccessKey={struct:{nonce:"u64",permission:this.AccessKeyPermission}};CreateAccount={struct:{}};DeployContract={struct:{code:{array:{type:"u8"}}}};FunctionCall={struct:{methodName:"string",args:{array:{type:"u8"}},gas:"u64",deposit:"u128"}};Transfer={struct:{deposit:"u128"}};Stake={struct:{stake:"u128",publicKey:this.PublicKey}};AddKey={struct:{publicKey:this.PublicKey,accessKey:this.AccessKey}};DeleteKey={struct:{publicKey:this.PublicKey}};DeleteAccount={struct:{beneficiaryId:"string"}};DelegateActionPrefix={struct:{prefix:"u32"}};ClassicActions={enum:[{struct:{createAccount:this.CreateAccount}},{struct:{deployContract:this.DeployContract}},{struct:{functionCall:this.FunctionCall}},{struct:{transfer:this.Transfer}},{struct:{stake:this.Stake}},{struct:{addKey:this.AddKey}},{struct:{deleteKey:this.DeleteKey}},{struct:{deleteAccount:this.DeleteAccount}}]};DelegateAction={struct:{senderId:"string",receiverId:"string",actions:{array:{type:this.ClassicActions}},nonce:"u64",maxBlockHeight:"u64",publicKey:this.PublicKey}};SignedDelegate={struct:{delegateAction:this.DelegateAction,signature:this.Signature}};Action={enum:[{struct:{createAccount:this.CreateAccount}},{struct:{deployContract:this.DeployContract}},{struct:{functionCall:this.FunctionCall}},{struct:{transfer:this.Transfer}},{struct:{stake:this.Stake}},{struct:{addKey:this.AddKey}},{struct:{deleteKey:this.DeleteKey}},{struct:{deleteAccount:this.DeleteAccount}},{struct:{signedDelegate:this.SignedDelegate}}]};Transaction={struct:{signerId:"string",publicKey:this.PublicKey,nonce:"u64",receiverId:"string",blockHash:{array:{type:"u8",len:32}},actions:{array:{type:this.Action}}}};SignedTransaction={struct:{transaction:this.Transaction,signature:this.Signature}}}})(Ji);Object.defineProperty(Fn,"__esModule",{value:!0});Fn.createTransaction=void 0;const e2=Ji;function t2(t,e,r,n,i,a){const o=typeof n=="bigint"?n:BigInt(n);return new e2.Transaction({signerId:t,publicKey:e,nonce:o,receiverId:r,actions:i,blockHash:a})}Fn.createTransaction=t2;var an={};Object.defineProperty(an,"__esModule",{value:!0});an.buildDelegateAction=an.DelegateAction=void 0;const r2=kr,{addKey:n2,createAccount:i2,deleteAccount:a2,deleteKey:o2,deployContract:c2,functionCall:s2,stake:u2,transfer:f2}=r2.actionCreators;class xf{senderId;receiverId;actions;nonce;maxBlockHeight;publicKey;constructor({senderId:e,receiverId:r,actions:n,nonce:i,maxBlockHeight:a,publicKey:o}){this.senderId=e,this.receiverId=r,this.actions=n,this.nonce=i,this.maxBlockHeight=a,this.publicKey=o}}an.DelegateAction=xf;function d2({actions:t,maxBlockHeight:e,nonce:r,publicKey:n,receiverId:i,senderId:a}){return new xf({senderId:a,receiverId:i,actions:t.map(o=>{if(!o.type&&!o.params)return o;switch(o.type){case"AddKey":{const{publicKey:c,accessKey:b}=o.params;return n2(c,b)}case"CreateAccount":return i2(o.params.createAccount);case"DeleteAccount":return a2(o.params.deleteAccount);case"DeleteKey":return o2(o.params.publicKey);case"DeployContract":return c2(o.params.code);case"FunctionCall":{const{methodName:c,args:b,gas:g,deposit:p}=o.params;return s2(c,b,g,p)}case"Stake":return u2(o.params.stake,o.params.publicKey);case"Transfer":{const{deposit:c}=o.params;return f2(c)}}throw new Error("Unrecognized action")}),nonce:r,maxBlockHeight:e,publicKey:n})}an.buildDelegateAction=d2;var on={},wr={},Yi={},ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.output=ft.exists=ft.hash=ft.bytes=ft.bool=ft.number=void 0;function ui(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}ft.number=ui;function If(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}ft.bool=If;function l2(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function cc(t,...e){if(!l2(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}ft.bytes=cc;function Mf(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ui(t.outputLen),ui(t.blockLen)}ft.hash=Mf;function Pf(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}ft.exists=Pf;function Bf(t,e){cc(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}ft.output=Bf;const h2={number:ui,bool:If,bytes:cc,hash:Mf,exists:Pf,output:Bf};ft.default=h2;var sc={},Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.crypto=void 0;Qi.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const e=Qi,r=k=>new Uint8Array(k.buffer,k.byteOffset,k.byteLength);t.u8=r;const n=k=>new Uint32Array(k.buffer,k.byteOffset,Math.floor(k.byteLength/4));t.u32=n;function i(k){return k instanceof Uint8Array||k!=null&&typeof k=="object"&&k.constructor.name==="Uint8Array"}const a=k=>new DataView(k.buffer,k.byteOffset,k.byteLength);t.createView=a;const o=(k,$)=>k<<32-$|k>>>$;if(t.rotr=o,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const c=Array.from({length:256},(k,$)=>$.toString(16).padStart(2,"0"));function b(k){if(!i(k))throw new Error("Uint8Array expected");let $="";for(let ee=0;ee<k.length;ee++)$+=c[k[ee]];return $}t.bytesToHex=b;const g={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function p(k){if(k>=g._0&&k<=g._9)return k-g._0;if(k>=g._A&&k<=g._F)return k-(g._A-10);if(k>=g._a&&k<=g._f)return k-(g._a-10)}function v(k){if(typeof k!="string")throw new Error("hex string expected, got "+typeof k);const $=k.length,ee=$/2;if($%2)throw new Error("padded hex string expected, got unpadded hex of length "+$);const M=new Uint8Array(ee);for(let s=0,d=0;s<ee;s++,d+=2){const h=p(k.charCodeAt(d)),y=p(k.charCodeAt(d+1));if(h===void 0||y===void 0){const _=k[d]+k[d+1];throw new Error('hex string expected, got non-hex character "'+_+'" at index '+d)}M[s]=h*16+y}return M}t.hexToBytes=v;const A=async()=>{};t.nextTick=A;async function E(k,$,ee){let M=Date.now();for(let s=0;s<k;s++){ee(s);const d=Date.now()-M;d>=0&&d<$||(await(0,t.nextTick)(),M+=d)}}t.asyncLoop=E;function B(k){if(typeof k!="string")throw new Error(`utf8ToBytes expected string, got ${typeof k}`);return new Uint8Array(new TextEncoder().encode(k))}t.utf8ToBytes=B;function T(k){if(typeof k=="string"&&(k=B(k)),!i(k))throw new Error(`expected Uint8Array, got ${typeof k}`);return k}t.toBytes=T;function L(...k){let $=0;for(let M=0;M<k.length;M++){const s=k[M];if(!i(s))throw new Error("Uint8Array expected");$+=s.length}const ee=new Uint8Array($);for(let M=0,s=0;M<k.length;M++){const d=k[M];ee.set(d,s),s+=d.length}return ee}t.concatBytes=L;class R{clone(){return this._cloneInto()}}t.Hash=R;const z={}.toString;function F(k,$){if($!==void 0&&z.call($)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(k,$)}t.checkOpts=F;function Z(k){const $=M=>k().update(T(M)).digest(),ee=k();return $.outputLen=ee.outputLen,$.blockLen=ee.blockLen,$.create=()=>k(),$}t.wrapConstructor=Z;function C(k){const $=(M,s)=>k(s).update(T(M)).digest(),ee=k({});return $.outputLen=ee.outputLen,$.blockLen=ee.blockLen,$.create=M=>k(M),$}t.wrapConstructorWithOpts=C;function q(k){const $=(M,s)=>k(s).update(T(M)).digest(),ee=k({});return $.outputLen=ee.outputLen,$.blockLen=ee.blockLen,$.create=M=>k(M),$}t.wrapXOFConstructorWithOpts=q;function W(k=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(k));throw new Error("crypto.getRandomValues must be defined")}t.randomBytes=W})(sc);Object.defineProperty(Yi,"__esModule",{value:!0});Yi.SHA2=void 0;const eo=ft,xn=sc;function b2(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),a=BigInt(4294967295),o=Number(r>>i&a),c=Number(r&a),b=n?4:0,g=n?0:4;t.setUint32(e+b,o,n),t.setUint32(e+g,c,n)}class p2 extends xn.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,xn.createView)(this.buffer)}update(e){(0,eo.exists)(this);const{view:r,buffer:n,blockLen:i}=this;e=(0,xn.toBytes)(e);const a=e.length;for(let o=0;o<a;){const c=Math.min(i-this.pos,a-o);if(c===i){const b=(0,xn.createView)(e);for(;i<=a-o;o+=i)this.process(b,o);continue}n.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,eo.exists)(this),(0,eo.output)(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:a}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let v=o;v<i;v++)r[v]=0;b2(n,i-8,BigInt(this.length*8),a),this.process(n,0);const c=(0,xn.createView)(e),b=this.outputLen;if(b%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=b/4,p=this.get();if(g>p.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<g;v++)c.setUint32(4*v,p[v],a)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:a,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=a,e.destroyed=o,i%r&&e.buffer.set(n),e}}Yi.SHA2=p2;Object.defineProperty(wr,"__esModule",{value:!0});wr.sha224=wr.sha256=void 0;const y2=Yi,mt=sc,v2=(t,e,r)=>t&e^~t&r,g2=(t,e,r)=>t&e^t&r^e&r,m2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lr=new Uint32Array(64);class Of extends y2.SHA2{constructor(){super(64,32,8,!1),this.A=dr[0]|0,this.B=dr[1]|0,this.C=dr[2]|0,this.D=dr[3]|0,this.E=dr[4]|0,this.F=dr[5]|0,this.G=dr[6]|0,this.H=dr[7]|0}get(){const{A:e,B:r,C:n,D:i,E:a,F:o,G:c,H:b}=this;return[e,r,n,i,a,o,c,b]}set(e,r,n,i,a,o,c,b){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=a|0,this.F=o|0,this.G=c|0,this.H=b|0}process(e,r){for(let v=0;v<16;v++,r+=4)lr[v]=e.getUint32(r,!1);for(let v=16;v<64;v++){const A=lr[v-15],E=lr[v-2],B=(0,mt.rotr)(A,7)^(0,mt.rotr)(A,18)^A>>>3,T=(0,mt.rotr)(E,17)^(0,mt.rotr)(E,19)^E>>>10;lr[v]=T+lr[v-7]+B+lr[v-16]|0}let{A:n,B:i,C:a,D:o,E:c,F:b,G:g,H:p}=this;for(let v=0;v<64;v++){const A=(0,mt.rotr)(c,6)^(0,mt.rotr)(c,11)^(0,mt.rotr)(c,25),E=p+A+v2(c,b,g)+m2[v]+lr[v]|0,T=((0,mt.rotr)(n,2)^(0,mt.rotr)(n,13)^(0,mt.rotr)(n,22))+g2(n,i,a)|0;p=g,g=b,b=c,c=o+E|0,o=a,a=i,i=n,n=E+T|0}n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,c=c+this.E|0,b=b+this.F|0,g=g+this.G|0,p=p+this.H|0,this.set(n,i,a,o,c,b,g,p)}roundClean(){lr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class _2 extends Of{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}wr.sha256=(0,mt.wrapConstructor)(()=>new Of);wr.sha224=(0,mt.wrapConstructor)(()=>new _2);var qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.Signature=void 0;const ps=Kt,w2=bt;function S2(t){switch(t){case ps.KeyType.ED25519:return"ed25519Signature";case ps.KeyType.SECP256K1:return"secp256k1Signature";default:throw Error(`unknown type ${t}`)}}class A2 extends w2.Enum{enum;ed25519Signature;secp256k1Signature;constructor(e){const r=S2(e.keyType);super({[r]:e}),this[r]=e,this.enum=r}get signature(){return this.ed25519Signature||this.secp256k1Signature}get signatureType(){return this.signature.keyType}get data(){return this.signature.data}}qn.Signature=A2;Object.defineProperty(on,"__esModule",{value:!0});on.signDelegateAction=on.signTransaction=void 0;const Tf=wr,E2=Ie,x2=Fn,fi=Ji,Cf=qn,di=Kt;async function ys(t,e,r,n){const i=(0,fi.encodeTransaction)(t),a=new Uint8Array((0,Tf.sha256)(i)),o=await e.signMessage(i,r,n),c=t.publicKey.ed25519Key?di.KeyType.ED25519:di.KeyType.SECP256K1,b=new fi.SignedTransaction({transaction:t,signature:new Cf.Signature({keyType:c,data:o.signature})});return[a,b]}async function I2(...t){if(t[0].constructor===fi.Transaction){const[e,r,n,i]=t;return ys(e,r,n,i)}else{const[e,r,n,i,a,o,c]=t,b=await a.getPublicKey(o,c),g=(0,x2.createTransaction)(o,b,e,r,n,i);return ys(g,a,o,c)}}on.signTransaction=I2;async function M2({delegateAction:t,signer:e}){const r=(0,fi.encodeDelegateAction)(t),n=await e.sign(r),i=t.publicKey.ed25519Key?di.KeyType.ED25519:di.KeyType.SECP256K1,a=new E2.SignedDelegate({delegateAction:t,signature:new Cf.Signature({keyType:i,data:n})});return{hash:new Uint8Array((0,Tf.sha256)(r)),signedDelegateAction:a}}on.signDelegateAction=M2;(function(t){var e=X&&X.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a);var c=Object.getOwnPropertyDescriptor(i,a);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,c)}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=X&&X.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(kr,t),r(Ie,t),r(Fn,t),r(an,t),r(Ji,t),r(on,t),r(qn,t)})(gr);var mn={};Object.defineProperty(mn,"__esModule",{value:!0});mn.Provider=void 0;class P2{}mn.Provider=P2;var ea={},uc={},fc={},li=X&&X.__assign||function(){return li=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},li.apply(this,arguments)};Object.defineProperty(fc,"__esModule",{value:!0});var B2={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function O2(t){var e=li(li({},B2),t);return e.numOfAttempts<1&&(e.numOfAttempts=1),e}fc.getSanitizedOptions=O2;var dc={},lc={},ta={},hc={},bc={};Object.defineProperty(bc,"__esModule",{value:!0});function T2(t){var e=Math.random()*t;return Math.round(e)}bc.fullJitter=T2;var pc={};Object.defineProperty(pc,"__esModule",{value:!0});function C2(t){return t}pc.noJitter=C2;Object.defineProperty(hc,"__esModule",{value:!0});var k2=bc,N2=pc;function L2(t){switch(t.jitter){case"full":return k2.fullJitter;case"none":default:return N2.noJitter}}hc.JitterFactory=L2;Object.defineProperty(ta,"__esModule",{value:!0});var R2=hc,K2=function(){function t(e){this.options=e,this.attempt=0}return t.prototype.apply=function(){var e=this;return new Promise(function(r){return setTimeout(r,e.jitteredDelay)})},t.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(t.prototype,"jitteredDelay",{get:function(){var e=R2.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){var e=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,i=e*Math.pow(r,n);return Math.min(i,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),t}();ta.Delay=K2;var $2=X&&X.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D2=X&&X.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(p){try{g(n.next(p))}catch(v){o(v)}}function b(p){try{g(n.throw(p))}catch(v){o(v)}}function g(p){p.done?a(p.value):i(p.value).then(c,b)}g((n=n.apply(t,e||[])).next())})},j2=X&&X.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(g){return function(p){return b([g,p])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=g[0]&2?i.return:g[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,g[1])).done)return a;switch(i=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,i=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){r.label=g[1];break}if(g[0]===6&&r.label<a[1]){r.label=a[1],a=g;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(g);break}a[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(p){g=[6,p],i=0}finally{n=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}};Object.defineProperty(lc,"__esModule",{value:!0});var U2=ta,F2=function(t){$2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.apply=function(){return D2(this,void 0,void 0,function(){return j2(this,function(r){return[2,this.isFirstAttempt?!0:t.prototype.apply.call(this)]})})},Object.defineProperty(e.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),e}(U2.Delay);lc.SkipFirstDelay=F2;var yc={},q2=X&&X.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(yc,"__esModule",{value:!0});var z2=ta,H2=function(t){q2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(z2.Delay);yc.AlwaysDelay=H2;Object.defineProperty(dc,"__esModule",{value:!0});var G2=lc,V2=yc;function J2(t,e){var r=W2(t);return r.setAttemptNumber(e),r}dc.DelayFactory=J2;function W2(t){return t.delayFirstAttempt?new V2.AlwaysDelay(t):new G2.SkipFirstDelay(t)}var To=X&&X.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(p){try{g(n.next(p))}catch(v){o(v)}}function b(p){try{g(n.throw(p))}catch(v){o(v)}}function g(p){p.done?a(p.value):i(p.value).then(c,b)}g((n=n.apply(t,e||[])).next())})},Co=X&&X.__generator||function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(g){return function(p){return b([g,p])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=g[0]&2?i.return:g[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,g[1])).done)return a;switch(i=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,i=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){r.label=g[1];break}if(g[0]===6&&r.label<a[1]){r.label=a[1],a=g;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(g);break}a[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(t,r)}catch(p){g=[6,p],i=0}finally{n=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}};Object.defineProperty(uc,"__esModule",{value:!0});var Z2=fc,X2=dc;function Y2(t,e){return e===void 0&&(e={}),To(this,void 0,void 0,function(){var r,n;return Co(this,function(i){switch(i.label){case 0:return r=Z2.getSanitizedOptions(e),n=new Q2(t,r),[4,n.execute()];case 1:return[2,i.sent()]}})})}uc.backOff=Y2;var Q2=function(){function t(e,r){this.request=e,this.options=r,this.attemptNumber=0}return t.prototype.execute=function(){return To(this,void 0,void 0,function(){var e,r;return Co(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return[3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return[2,n.sent()];case 4:return e=n.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(t.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),t.prototype.applyDelay=function(){return To(this,void 0,void 0,function(){var e;return Co(this,function(r){switch(r.label){case 0:return e=X2.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return r.sent(),[2]}})})},t}();function ev(t,e){return e=e||{},new Promise(function(r,n){var i=new XMLHttpRequest,a=[],o=[],c={},b=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:b,headers:{keys:function(){return a},entries:function(){return o},get:function(p){return c[p.toLowerCase()]},has:function(p){return p.toLowerCase()in c}}}};for(var g in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(p,v,A){a.push(v=v.toLowerCase()),o.push([v,A]),c[v]=c[v]?c[v]+","+A:A}),r(b())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(g,e.headers[g]);i.send(e.body||null)})}const tv=Object.freeze(Object.defineProperty({__proto__:null,default:ev},Symbol.toStringTag,{value:"Module"})),vs=Ds(tv);var vc=self.fetch||(self.fetch=vs.default||vs),rv=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ea,"__esModule",{value:!0});ea.fetchJsonRpc=void 0;const nv=bt,iv=uc,av=rv(vc),ov=1.5,kf=10,cv={numOfAttempts:kf,timeMultiple:ov,retry:t=>!!([503,408].includes(t.cause)||["FetchError","Failed to fetch"].includes(t.toString()))};class to extends Error{cause;constructor(e,r){super(e,r)}}async function sv(t,e,r){const n=await(0,iv.backOff)(async()=>{const i=await(0,av.default)(t,{method:"POST",body:JSON.stringify(e),headers:{...r,"Content-Type":"application/json"}}),{ok:a,status:o}=i;if(!a)throw new to(await i.text(),{cause:o});if(o===503)throw new to(`${t} unavailable`,{cause:o});if(o===408)throw new to("Unused connection",{cause:o});return i},cv);if(!n)throw new nv.TypedError(`Exceeded ${kf} attempts for ${t}.`,"RetriesExceeded");return await n.json()}ea.fetchJsonRpc=sv;Object.defineProperty(Vi,"__esModule",{value:!0});Vi.JsonRpcProvider=void 0;const $t=Qe,jr=bt,uv=gr,fv=Un,dv=mn,lv=ea,hv=12,bv=500,pv=1.5;let yv=123;class vv extends dv.Provider{connection;options;constructor(e,r){super(),this.connection=e||{url:""};const n={retries:hv,wait:bv,backoff:pv};this.options=Object.assign({},n,r)}async status(){return this.sendJsonRpc("status",[])}async sendTransactionUntil(e,r){const n=(0,uv.encodeTransaction)(e);return this.sendJsonRpc("send_tx",{signed_tx_base64:Buffer.from(n).toString("base64"),wait_until:r})}async sendTransaction(e){return this.sendTransactionUntil(e,"EXECUTED_OPTIMISTIC")}async sendTransactionAsync(e){return this.sendTransactionUntil(e,"NONE")}async txStatus(e,r,n="EXECUTED_OPTIMISTIC"){return typeof e=="string"?this.txStatusString(e,r,n):this.txStatusUint8Array(e,r,n)}async txStatusUint8Array(e,r,n){return this.sendJsonRpc("tx",{tx_hash:(0,$t.baseEncode)(e),sender_account_id:r,wait_until:n})}async txStatusString(e,r,n){return this.sendJsonRpc("tx",{tx_hash:e,sender_account_id:r,wait_until:n})}async txStatusReceipts(e,r,n="EXECUTED_OPTIMISTIC"){return typeof e=="string"?this.sendJsonRpc("EXPERIMENTAL_tx_status",{tx_hash:e,sender_account_id:r,wait_until:n}):this.sendJsonRpc("EXPERIMENTAL_tx_status",{tx_hash:(0,$t.baseEncode)(e),sender_account_id:r,wait_until:n})}async query(...e){let r;if(e.length===1){const{block_id:n,blockId:i,...a}=e[0];r=await this.sendJsonRpc("query",{...a,block_id:n||i})}else{const[n,i]=e;r=await this.sendJsonRpc("query",[n,i])}if(r&&r.error)throw new jr.TypedError(`Querying failed: ${r.error}.
${JSON.stringify(r,null,2)}`,(0,$t.getErrorTypeFromErrorMessage)(r.error,r.error.name));return r}async block(e){const{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("block",{block_id:n,finality:r})}async blockChanges(e){const{finality:r}=e,{blockId:n}=e;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:n,finality:r})}async chunk(e){return this.sendJsonRpc("chunk",[e])}async validators(e){return this.sendJsonRpc("validators",[e])}async experimental_protocolConfig(e){const{blockId:r,...n}=e;return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{...n,block_id:r})}async lightClientProof(e){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",e)}async nextLightClientBlock(e){return await this.sendJsonRpc("next_light_client_block",e)}async accessKeyChanges(e,r){const{finality:n}=r,{blockId:i}=r;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:e,block_id:i,finality:n})}async singleAccessKeyChanges(e,r){const{finality:n}=r,{blockId:i}=r;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:e,block_id:i,finality:n})}async accountChanges(e,r){const{finality:n}=r,{blockId:i}=r;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:e,block_id:i,finality:n})}async contractStateChanges(e,r,n=""){const{finality:i}=r,{blockId:a}=r;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:e,key_prefix_base64:n,block_id:a,finality:i})}async contractCodeChanges(e,r){const{finality:n}=r,{blockId:i}=r;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:e,block_id:i,finality:n})}async gasPrice(e){return await this.sendJsonRpc("gas_price",[e])}async sendJsonRpc(e,r){const n=await(0,fv.exponentialBackoff)(this.options.wait,this.options.retries,this.options.backoff,async()=>{try{const a={method:e,params:r,id:yv++,jsonrpc:"2.0"},o=await(0,lv.fetchJsonRpc)(this.connection.url,a,this.connection.headers);if(o.error){if(typeof o.error.data=="object")throw typeof o.error.data.error_message=="string"&&typeof o.error.data.error_type=="string"?new jr.TypedError(o.error.data.error_message,o.error.data.error_type):(0,$t.parseRpcError)(o.error.data);{const c=`[${o.error.code}] ${o.error.message}: ${o.error.data}`;if(o.error.data==="Timeout"||c.includes("Timeout error")||c.includes("query has timed out"))throw new jr.TypedError(c,"TimeoutError");const b=(0,$t.getErrorTypeFromErrorMessage)(o.error.data,"");throw b?new jr.TypedError((0,$t.formatError)(b,r),b):new jr.TypedError(c,o.error.name)}}else if(typeof o.result?.error=="string"){const c=(0,$t.getErrorTypeFromErrorMessage)(o.result.error,"");if(c)throw new $t.ServerError((0,$t.formatError)(c,r),c)}return o}catch(a){if(a.type==="TimeoutError")return $t.Logger.warn(`Retrying request to ${e} as it has timed out`,r),null;throw a}}),{result:i}=n;if(typeof i>"u")throw new jr.TypedError(`Exceeded ${this.options.retries} attempts for request to ${e}.`,"RetriesExceeded");return i}}Vi.JsonRpcProvider=vv;var ra={};Object.defineProperty(ra,"__esModule",{value:!0});ra.FailoverRpcProvider=void 0;const gv=Qe,mv=bt,_v=mn;class wv extends _v.Provider{providers;currentProviderIndex;constructor(e){if(super(),e.length===0)throw new Error("At least one provider must be specified");this.providers=e,this.currentProviderIndex=0}switchToNextProvider(){this.providers.length!==1&&(this.providers.length-1<=this.currentProviderIndex?this.currentProviderIndex=0:this.currentProviderIndex+=1,gv.Logger.debug(`Switched to provider at the index ${this.currentProviderIndex}`))}get currentProvider(){const e=this.providers[this.currentProviderIndex];if(!e)throw new Error(`Provider wasn't found at index ${this.currentProviderIndex}`);return e}async withBackoff(e){for(let r=0;r<this.providers.length;r++)try{const n=await e(this.currentProvider);if(n)return n}catch{this.switchToNextProvider()}throw new mv.TypedError(`Exceeded ${this.providers.length} providers to execute request`,"RetriesExceeded")}async status(){return this.withBackoff(e=>e.status())}async sendTransactionUntil(e,r){return this.withBackoff(n=>n.sendTransactionUntil(e,r))}async sendTransaction(e){return this.withBackoff(r=>r.sendTransaction(e))}async sendTransactionAsync(e){return this.withBackoff(r=>r.sendTransactionAsync(e))}async txStatus(e,r,n){return this.withBackoff(i=>i.txStatus(e,r,n))}async txStatusReceipts(e,r,n){return this.withBackoff(i=>i.txStatusReceipts(e,r,n))}async query(e,r){return r?this.withBackoff(n=>n.query(e,r)):this.withBackoff(n=>n.query(e))}async block(e){return this.withBackoff(r=>r.block(e))}async blockChanges(e){return this.withBackoff(r=>r.blockChanges(e))}async chunk(e){return this.withBackoff(r=>r.chunk(e))}async validators(e){return this.withBackoff(r=>r.validators(e))}async experimental_protocolConfig(e){return this.withBackoff(r=>r.experimental_protocolConfig(e))}async lightClientProof(e){return this.withBackoff(r=>r.lightClientProof(e))}async nextLightClientBlock(e){return this.withBackoff(r=>r.nextLightClientBlock(e))}async accessKeyChanges(e,r){return this.withBackoff(n=>n.accessKeyChanges(e,r))}async singleAccessKeyChanges(e,r){return this.withBackoff(n=>n.singleAccessKeyChanges(e,r))}async accountChanges(e,r){return this.withBackoff(n=>n.accountChanges(e,r))}async contractStateChanges(e,r,n=""){return this.withBackoff(i=>i.contractStateChanges(e,r,n))}async contractCodeChanges(e,r){return this.withBackoff(n=>n.contractCodeChanges(e,r))}async gasPrice(e){return this.withBackoff(r=>r.gasPrice(e))}}ra.FailoverRpcProvider=wv;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=t.FailoverRpcProvider=t.JsonRpcProvider=t.exponentialBackoff=void 0;var e=Un;Object.defineProperty(t,"exponentialBackoff",{enumerable:!0,get:function(){return e.exponentialBackoff}});var r=Vi;Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return r.JsonRpcProvider}});var n=ra;Object.defineProperty(t,"FailoverRpcProvider",{enumerable:!0,get:function(){return n.FailoverRpcProvider}});var i=mn;Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return i.Provider}})})(vn);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=t.Provider=t.getTransactionLastResult=void 0;var e=Qe;Object.defineProperty(t,"getTransactionLastResult",{enumerable:!0,get:function(){return e.getTransactionLastResult}});var r=vn;Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r.Provider}});var n=bt;Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return n.IdType}}),Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return n.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return n.FinalExecutionStatusBasic}})})(wf);var Nf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=t.TypedError=t.ErrorContext=void 0;var e=bt;Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return e.ErrorContext}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return e.TypedError}});var r=vn;Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return r.JsonRpcProvider}})})(Nf);var Lf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FailoverRpcProvider=void 0;var e=vn;Object.defineProperty(t,"FailoverRpcProvider",{enumerable:!0,get:function(){return e.FailoverRpcProvider}})})(Lf);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorContext=t.TypedError=t.getTransactionLastResult=t.FinalExecutionStatusBasic=t.FailoverRpcProvider=t.JsonRpcProvider=t.Provider=void 0;const e=wf;Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return e.Provider}}),Object.defineProperty(t,"getTransactionLastResult",{enumerable:!0,get:function(){return e.getTransactionLastResult}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return e.FinalExecutionStatusBasic}});const r=Nf;Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return r.JsonRpcProvider}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return r.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return r.ErrorContext}});const n=Lf;Object.defineProperty(t,"FailoverRpcProvider",{enumerable:!0,get:function(){return n.FailoverRpcProvider}})})(_f);var Rf={},hi={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyType=t.KeyPairEd25519=t.KeyPair=void 0;var e=Kt;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return e.KeyPair}}),Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return e.KeyPairEd25519}}),Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return e.KeyType}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return e.PublicKey}})})(hi);var Kf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.base_decode=t.base_encode=t.deserialize=t.serialize=void 0;var e=mr;Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return e.serialize}}),Object.defineProperty(t,"deserialize",{enumerable:!0,get:function(){return e.deserialize}});var r=Qe;Object.defineProperty(t,"base_encode",{enumerable:!0,get:function(){return r.baseEncode}}),Object.defineProperty(t,"base_decode",{enumerable:!0,get:function(){return r.baseDecode}})})(Kf);var $f={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Enum=void 0;var e=bt;Object.defineProperty(t,"Enum",{enumerable:!0,get:function(){return e.Enum}})})($f);var Df={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseNearAmount=t.formatNearAmount=t.NEAR_NOMINATION_EXP=t.NEAR_NOMINATION=void 0;var e=Qe;Object.defineProperty(t,"NEAR_NOMINATION",{enumerable:!0,get:function(){return e.NEAR_NOMINATION}}),Object.defineProperty(t,"NEAR_NOMINATION_EXP",{enumerable:!0,get:function(){return e.NEAR_NOMINATION_EXP}}),Object.defineProperty(t,"formatNearAmount",{enumerable:!0,get:function(){return e.formatNearAmount}}),Object.defineProperty(t,"parseNearAmount",{enumerable:!0,get:function(){return e.parseNearAmount}})})(Df);var jf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ServerError=t.getErrorTypeFromErrorMessage=t.formatError=t.parseResultError=t.parseRpcError=void 0;var e=Qe;Object.defineProperty(t,"parseRpcError",{enumerable:!0,get:function(){return e.parseRpcError}}),Object.defineProperty(t,"parseResultError",{enumerable:!0,get:function(){return e.parseResultError}}),Object.defineProperty(t,"formatError",{enumerable:!0,get:function(){return e.formatError}}),Object.defineProperty(t,"getErrorTypeFromErrorMessage",{enumerable:!0,get:function(){return e.getErrorTypeFromErrorMessage}}),Object.defineProperty(t,"ServerError",{enumerable:!0,get:function(){return e.ServerError}})})(jf);var Uf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var e=Qe;Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return e.Logger}})})(Uf);(function(t){var e=X&&X.__createBinding||(Object.create?function(v,A,E,B){B===void 0&&(B=E);var T=Object.getOwnPropertyDescriptor(A,E);(!T||("get"in T?!A.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return A[E]}}),Object.defineProperty(v,B,T)}:function(v,A,E,B){B===void 0&&(B=E),v[B]=A[E]}),r=X&&X.__setModuleDefault||(Object.create?function(v,A){Object.defineProperty(v,"default",{enumerable:!0,value:A})}:function(v,A){v.default=A}),n=X&&X.__importStar||function(v){if(v&&v.__esModule)return v;var A={};if(v!=null)for(var E in v)E!=="default"&&Object.prototype.hasOwnProperty.call(v,E)&&e(A,v,E);return r(A,v),A};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.rpc_errors=t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.format=t.enums=t.serialize=t.key_pair=void 0;const i=n(hi);t.key_pair=i;const a=n(Kf);t.serialize=a;const o=n($f);t.enums=o;const c=n(Df);t.format=c;const b=n(jf);t.rpc_errors=b;const g=hi;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return g.PublicKey}}),Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return g.KeyPair}}),Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return g.KeyPairEd25519}});const p=Uf;Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return p.Logger}})})(Rf);var Ff={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.transfer=t.stake=t.functionCallAccessKey=t.functionCall=t.fullAccessKey=t.deployContract=t.deleteKey=t.deleteAccount=t.createAccount=t.addKey=t.encodeTransaction=t.encodeDelegateAction=t.encodeSignedDelegate=t.Transaction=t.SignedTransaction=t.Signature=t.signTransaction=t.createTransaction=t.SCHEMA=t.Transfer=t.Stake=t.FunctionCallPermission=t.FunctionCall=t.FullAccessPermission=t.DeployContract=t.DeleteKey=t.DeleteAccount=t.CreateAccount=t.AddKey=t.AccessKeyPermission=t.AccessKey=t.Action=t.stringifyJsonOrBytes=void 0;var e=gr;Object.defineProperty(t,"stringifyJsonOrBytes",{enumerable:!0,get:function(){return e.stringifyJsonOrBytes}}),Object.defineProperty(t,"Action",{enumerable:!0,get:function(){return e.Action}}),Object.defineProperty(t,"AccessKey",{enumerable:!0,get:function(){return e.AccessKey}}),Object.defineProperty(t,"AccessKeyPermission",{enumerable:!0,get:function(){return e.AccessKeyPermission}}),Object.defineProperty(t,"AddKey",{enumerable:!0,get:function(){return e.AddKey}}),Object.defineProperty(t,"CreateAccount",{enumerable:!0,get:function(){return e.CreateAccount}}),Object.defineProperty(t,"DeleteAccount",{enumerable:!0,get:function(){return e.DeleteAccount}}),Object.defineProperty(t,"DeleteKey",{enumerable:!0,get:function(){return e.DeleteKey}}),Object.defineProperty(t,"DeployContract",{enumerable:!0,get:function(){return e.DeployContract}}),Object.defineProperty(t,"FullAccessPermission",{enumerable:!0,get:function(){return e.FullAccessPermission}}),Object.defineProperty(t,"FunctionCall",{enumerable:!0,get:function(){return e.FunctionCall}}),Object.defineProperty(t,"FunctionCallPermission",{enumerable:!0,get:function(){return e.FunctionCallPermission}}),Object.defineProperty(t,"Stake",{enumerable:!0,get:function(){return e.Stake}}),Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return e.Transfer}}),Object.defineProperty(t,"SCHEMA",{enumerable:!0,get:function(){return e.SCHEMA}}),Object.defineProperty(t,"createTransaction",{enumerable:!0,get:function(){return e.createTransaction}}),Object.defineProperty(t,"signTransaction",{enumerable:!0,get:function(){return e.signTransaction}}),Object.defineProperty(t,"Signature",{enumerable:!0,get:function(){return e.Signature}}),Object.defineProperty(t,"SignedTransaction",{enumerable:!0,get:function(){return e.SignedTransaction}}),Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return e.Transaction}}),Object.defineProperty(t,"encodeSignedDelegate",{enumerable:!0,get:function(){return e.encodeSignedDelegate}}),Object.defineProperty(t,"encodeDelegateAction",{enumerable:!0,get:function(){return e.encodeDelegateAction}}),Object.defineProperty(t,"encodeTransaction",{enumerable:!0,get:function(){return e.encodeTransaction}});const r=gr,n=(E,B)=>r.actionCreators.addKey(E,B);t.addKey=n;const i=()=>r.actionCreators.createAccount();t.createAccount=i;const a=E=>r.actionCreators.deleteAccount(E);t.deleteAccount=a;const o=E=>r.actionCreators.deleteKey(E);t.deleteKey=o;const c=E=>r.actionCreators.deployContract(E);t.deployContract=c;const b=()=>r.actionCreators.fullAccessKey();t.fullAccessKey=b;const g=(E,B,T,L,R,z)=>r.actionCreators.functionCall(E,B,T,L,R,z);t.functionCall=g;const p=(E,B,T)=>r.actionCreators.functionCallAccessKey(E,B,T);t.functionCallAccessKey=p;const v=(E,B)=>r.actionCreators.stake(E,B);t.stake=v;const A=E=>r.actionCreators.transfer(E);t.transfer=A})(Ff);var qf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.findSeatPrice=t.diffEpochValidators=void 0;var e=Qe;Object.defineProperty(t,"diffEpochValidators",{enumerable:!0,get:function(){return e.diffEpochValidators}}),Object.defineProperty(t,"findSeatPrice",{enumerable:!0,get:function(){return e.findSeatPrice}})})(qf);var zf={},Er={},_n={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.viewFunction=xt.viewState=xt.encodeJSContractArgs=xt.validateArgs=void 0;const Sv=bt,Av=Qe;function Ev(t){return JSON.parse(Buffer.from(t).toString())}function xv(t){return Buffer.from(JSON.stringify(t))}function Hf(t){if(!(t.byteLength!==void 0&&t.byteLength===t.length)&&(Array.isArray(t)||typeof t!="object"))throw new Sv.PositionalArgsError}xt.validateArgs=Hf;function Gf(t,e,r){return Buffer.concat([Buffer.from(t),Buffer.from([0]),Buffer.from(e),Buffer.from([0]),Buffer.from(r)])}xt.encodeJSContractArgs=Gf;async function Iv(t,e,r,n={finality:"optimistic"}){const{values:i}=await t.provider.query({request_type:"view_state",...n,account_id:e,prefix_base64:Buffer.from(r).toString("base64")});return i.map(({key:a,value:o})=>({key:Buffer.from(a,"base64"),value:Buffer.from(o,"base64")}))}xt.viewState=Iv;async function Mv(t,{contractId:e,methodName:r,args:n={},parse:i=Ev,stringify:a=xv,jsContract:o=!1,blockQuery:c={finality:"optimistic"}}){let b;Hf(n),o?b=Gf(e,r,Object.keys(n).length>0?JSON.stringify(n):""):b=a(n);const g=await t.provider.query({request_type:"call_function",...c,account_id:o?t.jsvmAccountId:e,method_name:o?"view_js_contract":r,args_base64:b.toString("base64")});return g.logs&&(0,Av.printTxOutcomeLogs)({contractId:e,logs:g.logs}),g.result&&g.result.length>0&&i(Buffer.from(g.result))}xt.viewFunction=Mv;Object.defineProperty(_n,"__esModule",{value:!0});_n.Account=void 0;const In=Kt,Pv=vn,On=gr,Ur=bt,Dt=Qe,gs=xt,{addKey:ro,createAccount:ms,deleteAccount:Bv,deleteKey:Ov,deployContract:_s,fullAccessKey:no,functionCall:Tv,functionCallAccessKey:Cv,stake:kv,transfer:io}=On.actionCreators,Nv=12,Lv=500,Rv=1.5;class gc{connection;accountId;constructor(e,r){this.connection=e,this.accountId=r}getConnection(){return this.connection}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}async signTransaction(e,r){const n=await this.findAccessKey(e,r);if(!n)throw new Ur.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair exists for this account`,"KeyNotFound");const{accessKey:i}=n,o=(await this.connection.provider.block({finality:"final"})).header.hash,c=i.nonce+1n;return await(0,On.signTransaction)(e,c,r,(0,Dt.baseDecode)(o),this.connection.signer,this.accountId,this.connection.networkId)}async signAndSendTransaction({receiverId:e,actions:r,returnError:n}){let i,a;const o=await(0,Pv.exponentialBackoff)(Lv,Nv,Rv,async()=>{[i,a]=await this.signTransaction(e,r);const c=a.transaction.publicKey;try{return await this.connection.provider.sendTransaction(a)}catch(b){if(b.type==="InvalidNonce")return Dt.Logger.warn(`Retrying transaction ${e}:${(0,Dt.baseEncode)(i)} with new nonce.`),delete this.accessKeyByPublicKeyCache[c.toString()],null;if(b.type==="Expired")return Dt.Logger.warn(`Retrying transaction ${e}:${(0,Dt.baseEncode)(i)} due to expired block hash`),null;throw b.context=new Ur.ErrorContext((0,Dt.baseEncode)(i)),b}});if(!o)throw new Ur.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");if((0,Dt.printTxOutcomeLogsAndFailures)({contractId:a.transaction.receiverId,outcome:o}),!n&&typeof o.status=="object"&&typeof o.status.Failure=="object"&&o.status.Failure!==null)throw o.status.Failure.error_message&&o.status.Failure.error_type?new Ur.TypedError(`Transaction ${o.transaction_outcome.id} failed. ${o.status.Failure.error_message}`,o.status.Failure.error_type):(0,Dt.parseResultError)(o);return o}accessKeyByPublicKeyCache={};async findAccessKey(e,r){const n=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!n)throw new Ur.TypedError(`no matching key pair found in ${this.connection.signer}`,"PublicKeyNotFound");const i=this.accessKeyByPublicKeyCache[n.toString()];if(i!==void 0)return{publicKey:n,accessKey:i};try{const a=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:n.toString(),finality:"optimistic"}),o={...a,nonce:BigInt(a.nonce||0)};return this.accessKeyByPublicKeyCache[n.toString()]?{publicKey:n,accessKey:this.accessKeyByPublicKeyCache[n.toString()]}:(this.accessKeyByPublicKeyCache[n.toString()]=o,{publicKey:n,accessKey:o})}catch(a){if(a.type=="AccessKeyDoesNotExist")return null;throw a}}async createAndDeployContract(e,r,n,i){const a=no();return await this.signAndSendTransaction({receiverId:e,actions:[ms(),io(i),ro(In.PublicKey.from(r),a),_s(n)]}),new gc(this.connection,e)}async sendMoney(e,r){return this.signAndSendTransaction({receiverId:e,actions:[io(r)]})}async createAccount(e,r,n){const i=no();return this.signAndSendTransaction({receiverId:e,actions:[ms(),io(n),ro(In.PublicKey.from(r),i)]})}async deleteAccount(e){return Dt.Logger.log("Deleting an account does not automatically transfer NFTs and FTs to the beneficiary address. Ensure to transfer assets before deleting."),this.signAndSendTransaction({receiverId:this.accountId,actions:[Bv(e)]})}async deployContract(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[_s(e)]})}encodeJSContractArgs(e,r,n){return Buffer.concat([Buffer.from(e),Buffer.from([0]),Buffer.from(r),Buffer.from([0]),Buffer.from(n)])}async functionCall({contractId:e,methodName:r,args:n={},gas:i=Dt.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:a,walletMeta:o,walletCallbackUrl:c,stringify:b,jsContract:g}){this.validateArgs(n);let p;if(g)p=["call_js_contract",this.encodeJSContractArgs(e,r,JSON.stringify(n)),i,a,null,!0];else{const v=b===void 0?On.stringifyJsonOrBytes:b;p=[r,n,i,a,v,!1]}return this.signAndSendTransaction({receiverId:g?this.connection.jsvmAccountId:e,actions:[Tv.apply(void 0,p)],walletMeta:o,walletCallbackUrl:c})}async addKey(e,r,n,i){n||(n=[]),Array.isArray(n)||(n=[n]);let a;return r?a=Cv(r,n,i):a=no(),this.signAndSendTransaction({receiverId:this.accountId,actions:[ro(In.PublicKey.from(e),a)]})}async deleteKey(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[Ov(In.PublicKey.from(e))]})}async stake(e,r){return this.signAndSendTransaction({receiverId:this.accountId,actions:[kv(r,In.PublicKey.from(e))]})}async signedDelegate({actions:e,blockHeightTtl:r,receiverId:n}){const{provider:i,signer:a}=this.connection,{header:o}=await i.block({finality:"final"}),{accessKey:c,publicKey:b}=await this.findAccessKey(null,null),g=(0,On.buildDelegateAction)({actions:e,maxBlockHeight:BigInt(o.height)+BigInt(r),nonce:BigInt(c.nonce)+1n,publicKey:b,receiverId:n,senderId:this.accountId}),{signedDelegateAction:p}=await(0,On.signDelegateAction)({delegateAction:g,signer:{sign:async v=>{const{signature:A}=await a.signMessage(v,g.senderId,this.connection.networkId);return A}}});return p}validateArgs(e){if(!(e.byteLength!==void 0&&e.byteLength===e.length)&&(Array.isArray(e)||typeof e!="object"))throw new Ur.PositionalArgsError}async viewFunction(e){return await(0,gs.viewFunction)(this.connection,e)}async viewState(e,r={finality:"optimistic"}){return await(0,gs.viewState)(this.connection,this.accountId,e,r)}async getAccessKeys(){return(await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"}))?.keys?.map(r=>({...r,access_key:{...r.access_key,nonce:BigInt(r.access_key.nonce)}}))}async getAccountDetails(){return{authorizedApps:(await this.getAccessKeys()).filter(n=>n.access_key.permission!=="FullAccess").map(n=>{const i=n.access_key.permission;return{contractId:i.FunctionCall.receiver_id,amount:i.FunctionCall.allowance,publicKey:n.public_key}})}}async getAccountBalance(){const e=await this.connection.provider.experimental_protocolConfig({finality:"final"}),r=await this.state(),n=BigInt(e.runtime_config.storage_amount_per_byte),i=BigInt(r.storage_usage)*n,a=BigInt(r.locked),o=BigInt(r.amount)+a,c=o-(a>i?a:i);return{total:o.toString(),stateStaked:i.toString(),staked:a.toString(),available:c.toString()}}async getActiveDelegatedStakeBalance(){const e=await this.connection.provider.block({finality:"final"}),r=e.header.hash,n=e.header.epoch_id,{current_validators:i,next_validators:a,current_proposals:o}=await this.connection.provider.validators(n),c=new Set;[...i,...a,...o].forEach(E=>c.add(E.account_id));const b=[...c],g=b.map(E=>this.viewFunction({contractId:E,methodName:"get_account_total_balance",args:{account_id:this.accountId},blockQuery:{blockId:r}})),p=await Promise.allSettled(g);if(p.some(E=>E.status==="rejected"&&E.reason.type==="TimeoutError"))throw new Error("Failed to get delegated stake balance");const A=p.reduce((E,B,T)=>{const L=b[T];if(B.status==="fulfilled"){const R=BigInt(B.value);if(R!==0n)return{...E,stakedValidators:[...E.stakedValidators,{validatorId:L,amount:R.toString()}],total:E.total+R}}return B.status==="rejected"?{...E,failedValidators:[...E.failedValidators,{validatorId:L,error:B.reason}]}:E},{stakedValidators:[],failedValidators:[],total:0n});return{...A,total:A.total.toString()}}}_n.Account=gc;var na={},zn={},ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.MULTISIG_CONFIRM_METHODS=ot.MULTISIG_CHANGE_METHODS=ot.MULTISIG_DEPOSIT=ot.MULTISIG_GAS=ot.MULTISIG_ALLOWANCE=ot.MULTISIG_STORAGE_KEY=void 0;const Kv=Qe;ot.MULTISIG_STORAGE_KEY="__multisigRequest";ot.MULTISIG_ALLOWANCE=BigInt((0,Kv.parseNearAmount)("1"));ot.MULTISIG_GAS=100000000000000n;ot.MULTISIG_DEPOSIT=0n;ot.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"];ot.MULTISIG_CONFIRM_METHODS=["confirm"];var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.MultisigStateStatus=Sr.MultisigDeleteRequestRejectionError=void 0;var ws;(function(t){t.CANNOT_DESERIALIZE_STATE="Cannot deserialize the contract state",t.MULTISIG_NOT_INITIALIZED="Smart contract panicked: Multisig contract should be initialized before usage",t.NO_SUCH_REQUEST="Smart contract panicked: panicked at 'No such request: either wrong number or already confirmed'",t.REQUEST_COOLDOWN_ERROR="Request cannot be deleted immediately after creation.",t.METHOD_NOT_FOUND="Contract method is not found"})(ws||(Sr.MultisigDeleteRequestRejectionError=ws={}));var Ss;(function(t){t[t.INVALID_STATE=0]="INVALID_STATE",t[t.STATE_NOT_INITIALIZED=1]="STATE_NOT_INITIALIZED",t[t.VALID_STATE=2]="VALID_STATE",t[t.UNKNOWN_STATE=3]="UNKNOWN_STATE"})(Ss||(Sr.MultisigStateStatus=Ss={}));Object.defineProperty(zn,"__esModule",{value:!0});zn.AccountMultisig=void 0;const $v=gr,Dv=Qe,jv=_n,st=ot,Xt=Sr,{deployContract:Uv,functionCall:Xn}=$v.actionCreators;var Wr;(function(t){t[t.INVALID_CODE=0]="INVALID_CODE",t[t.VALID_CODE=1]="VALID_CODE",t[t.UNKNOWN_CODE=2]="UNKNOWN_CODE"})(Wr||(Wr={}));const As={[st.MULTISIG_STORAGE_KEY]:null};class Fv extends jv.Account{storage;onAddRequestResult;constructor(e,r,n){super(e,r),this.storage=n.storage,this.onAddRequestResult=n.onAddRequestResult}async signAndSendTransactionWithAccount(e,r){return super.signAndSendTransaction({receiverId:e,actions:r})}async signAndSendTransaction({receiverId:e,actions:r}){const{accountId:n}=this,i=Buffer.from(JSON.stringify({request:{receiver_id:e,actions:zv(r,n,e)}}));let a;try{a=await super.signAndSendTransaction({receiverId:n,actions:[Xn("add_request_and_confirm",i,st.MULTISIG_GAS,st.MULTISIG_DEPOSIT)]})}catch(c){if(c.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction({receiverId:e,actions:r});throw c}if(!a.status)throw new Error("Request failed");const o={...a.status};if(!o.SuccessValue||typeof o.SuccessValue!="string")throw new Error("Request failed");return this.setRequest({accountId:n,actions:r,requestId:parseInt(Buffer.from(o.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(a),this.deleteUnconfirmedRequests(),a}async checkMultisigCodeAndStateStatus(e){const n=e?Wr.UNKNOWN_CODE:Wr.VALID_CODE;try{return e?await super.signAndSendTransaction({receiverId:this.accountId,actions:[Uv(e),Xn("delete_request",{request_id:4294967295},st.MULTISIG_GAS,st.MULTISIG_DEPOSIT)]}):await this.deleteRequest(4294967295),{codeStatus:Wr.VALID_CODE,stateStatus:Xt.MultisigStateStatus.VALID_STATE}}catch(i){if(new RegExp(Xt.MultisigDeleteRequestRejectionError.CANNOT_DESERIALIZE_STATE).test(i&&i.kind&&i.kind.ExecutionError))return{codeStatus:n,stateStatus:Xt.MultisigStateStatus.INVALID_STATE};if(new RegExp(Xt.MultisigDeleteRequestRejectionError.MULTISIG_NOT_INITIALIZED).test(i&&i.kind&&i.kind.ExecutionError))return{codeStatus:n,stateStatus:Xt.MultisigStateStatus.STATE_NOT_INITIALIZED};if(new RegExp(Xt.MultisigDeleteRequestRejectionError.NO_SUCH_REQUEST).test(i&&i.kind&&i.kind.ExecutionError))return{codeStatus:n,stateStatus:Xt.MultisigStateStatus.VALID_STATE};if(new RegExp(Xt.MultisigDeleteRequestRejectionError.METHOD_NOT_FOUND).test(i&&i.message))return{codeStatus:Wr.INVALID_CODE,stateStatus:Xt.MultisigStateStatus.UNKNOWN_STATE};throw i}}deleteRequest(e){return super.signAndSendTransaction({receiverId:this.accountId,actions:[Xn("delete_request",{request_id:e},st.MULTISIG_GAS,st.MULTISIG_DEPOSIT)]})}async deleteAllRequests(){const e=await this.getRequestIds();e.length&&await Promise.all(e.map(r=>this.deleteRequest(r)))}async deleteUnconfirmedRequests(){const e=await this.getRequestIds(),{requestId:r}=this.getRequest();for(const n of e)if(n!=r)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[Xn("delete_request",{request_id:n},st.MULTISIG_GAS,st.MULTISIG_DEPOSIT)]})}catch{Dv.Logger.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction({contractId:this.accountId,methodName:"list_request_ids"})}getRequest(){return this.storage?JSON.parse(this.storage.getItem(st.MULTISIG_STORAGE_KEY)||"{}"):As[st.MULTISIG_STORAGE_KEY]}setRequest(e){if(this.storage)return this.storage.setItem(st.MULTISIG_STORAGE_KEY,JSON.stringify(e));As[st.MULTISIG_STORAGE_KEY]=e}}zn.AccountMultisig=Fv;const qv=t=>t.toString().replace("ed25519:",""),zv=(t,e,r)=>t.map(n=>{const i=n.enum,{gas:a,publicKey:o,methodName:c,args:b,deposit:g,accessKey:p,code:v}=n[i],A={type:i[0].toUpperCase()+i.substr(1),gas:a&&a.toString()||void 0,public_key:o&&qv(o)||void 0,method_name:c,args:b&&Buffer.from(b).toString("base64")||void 0,code:v&&Buffer.from(v).toString("base64")||void 0,amount:g&&g.toString()||void 0,deposit:g&&g.toString()||"0",permission:void 0};if(p&&(r===e&&p.permission.enum!=="fullAccess"&&(A.permission={receiver_id:e,allowance:st.MULTISIG_ALLOWANCE.toString(),method_names:st.MULTISIG_CHANGE_METHODS}),p.permission.enum==="functionCall")){const{receiverId:E,methodNames:B,allowance:T}=p.permission.functionCall;A.permission={receiver_id:E,allowance:T&&T.toString()||void 0,method_names:B}}return A});var Hv=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(na,"__esModule",{value:!0});na.Account2FA=void 0;const ei=Kt,Mn=bt,Gv=gr,ao=Qe,Vv=Hv(vc),Jv=zn,Pn=ot,Bn=Sr,{addKey:oo,deleteKey:co,deployContract:Yn,fullAccessKey:Wv,functionCall:Es,functionCallAccessKey:xs}=Gv.actionCreators;class Zv extends Jv.AccountMultisig{sendCode;getCode;verifyCode;onConfirmResult;helperUrl="https://helper.testnet.near.org";constructor(e,r,n){super(e,r,n),this.helperUrl=n.helperUrl||this.helperUrl,this.storage=n.storage,this.sendCode=n.sendCode||this.sendCodeDefault,this.getCode=n.getCode||this.getCodeDefault,this.verifyCode=n.verifyCode||this.verifyCodeDefault,this.onConfirmResult=n.onConfirmResult}async signAndSendTransaction({receiverId:e,actions:r}){await super.signAndSendTransaction({receiverId:e,actions:r}),await this.sendCode();const n=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(n),n}async deployMultisig(e){const{accountId:r}=this,n=(await this.getRecoveryMethods()).data.filter(({kind:p,publicKey:v})=>(p==="phrase"||p==="ledger")&&v!==null).map(p=>p.publicKey),i=(await this.getAccessKeys()).filter(({public_key:p,access_key:{permission:v}})=>v==="FullAccess"&&!n.includes(p)).map(p=>p.public_key).map(Is),a=Is((await this.postSignedJson("/2fa/getAccessKey",{accountId:r})).publicKey),o=Buffer.from(JSON.stringify({num_confirmations:2})),c=[...i.map(p=>co(p)),...i.map(p=>oo(p,xs(r,Pn.MULTISIG_CHANGE_METHODS,null))),oo(a,xs(r,Pn.MULTISIG_CONFIRM_METHODS,null)),Yn(e)],b=c.concat(Es("new",o,Pn.MULTISIG_GAS,Pn.MULTISIG_DEPOSIT));ao.Logger.log("deploying multisig contract for",r);const{stateStatus:g}=await this.checkMultisigCodeAndStateStatus(e);switch(g){case Bn.MultisigStateStatus.STATE_NOT_INITIALIZED:return await super.signAndSendTransactionWithAccount(r,b);case Bn.MultisigStateStatus.VALID_STATE:return await super.signAndSendTransactionWithAccount(r,c);case Bn.MultisigStateStatus.INVALID_STATE:throw new Mn.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState");default:throw new Mn.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown")}}async disableWithFAK({contractBytes:e,cleanupContractBytes:r}){let n=[];r&&(await this.deleteAllRequests().catch(c=>c),n=await this.get2faDisableCleanupActions(r));const i=await this.get2faDisableKeyConversionActions(),a=[...n,...i,Yn(e)],o=await this.findAccessKey(this.accountId,a);if(o&&o.accessKey&&o.accessKey.permission!=="FullAccess")throw new Mn.TypedError("No full access key found in keystore. Unable to bypass multisig","NoFAKFound");return this.signAndSendTransactionWithAccount(this.accountId,a)}async get2faDisableCleanupActions(e){const r=await this.viewState("").catch(i=>{const a=i.cause&&i.cause.name;if(a=="NO_CONTRACT_CODE")return[];throw a=="TOO_LARGE_CONTRACT_STATE"?new Mn.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState"):i}),n=r.map(({key:i})=>i.toString("base64"));return r.length?[Yn(e),Es("clean",{keys:n},Pn.MULTISIG_GAS,0n)]:[]}async get2faDisableKeyConversionActions(){const{accountId:e}=this,n=(await this.getAccessKeys()).filter(({access_key:a})=>a.permission!=="FullAccess").filter(({access_key:a})=>{const o=a.permission.FunctionCall;return o.receiver_id===e&&o.method_names.length===4&&o.method_names.includes("add_request_and_confirm")}),i=ei.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:e})).publicKey);return[co(i),...n.map(({public_key:a})=>co(ei.PublicKey.from(a))),...n.map(({public_key:a})=>oo(ei.PublicKey.from(a),Wv()))]}async disable(e,r){const{stateStatus:n}=await this.checkMultisigCodeAndStateStatus();if(n!==Bn.MultisigStateStatus.VALID_STATE&&n!==Bn.MultisigStateStatus.STATE_NOT_INITIALIZED)throw new Mn.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown");let i;await this.deleteAllRequests().catch(c=>i=c);const o=[...await this.get2faDisableCleanupActions(r).catch(c=>{throw c.type==="ContractHasExistingState"&&i||c}),...await this.get2faDisableKeyConversionActions(),Yn(e)];return ao.Logger.log("disabling 2fa for",this.accountId),await this.signAndSendTransaction({receiverId:this.accountId,actions:o})}async sendCodeDefault(){const{accountId:e}=this,{requestId:r}=this.getRequest(),n=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:e,method:n,requestId:r}),r}async getCodeDefault(){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){const e=await this.get2faMethod(),r=await this.getCode(e);try{return await this.verifyCode(r)}catch(n){if(ao.Logger.warn("Error validating security code:",n),n.toString().includes("invalid 2fa code provided")||n.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw n}}async verifyCodeDefault(e){const{accountId:r}=this,n=this.getRequest();if(!n)throw new Error("no request pending");const{requestId:i}=n;return await this.postSignedJson("/2fa/verify",{accountId:r,securityCode:e,requestId:i})}async getRecoveryMethods(){const{accountId:e}=this;return{accountId:e,data:await this.postSignedJson("/account/recoveryMethods",{accountId:e})}}async get2faMethod(){let{data:e}=await this.getRecoveryMethods();if(e&&e.length&&(e=e.find(i=>i.kind.indexOf("2fa-")===0)),!e)return null;const{kind:r,detail:n}=e;return{kind:r,detail:n}}async signatureFor(){const{accountId:e}=this,n=(await this.connection.provider.block({finality:"final"})).header.height.toString(),i=await this.connection.signer.signMessage(Buffer.from(n),e,this.connection.networkId),a=Buffer.from(i.signature).toString("base64");return{blockNumber:n,blockNumberSignature:a}}async postSignedJson(e,r){return await(0,Vv.default)(this.helperUrl+e,{body:JSON.stringify({...r,...await this.signatureFor()}),method:"POST"})}}na.Account2FA=Zv;const Is=t=>ei.PublicKey.from(t);var yr={},Xv=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yr,"__esModule",{value:!0});yr.UrlAccountCreator=yr.LocalAccountCreator=yr.AccountCreator=void 0;const Yv=Xv(vc);class mc{}yr.AccountCreator=mc;class Qv extends mc{masterAccount;initialBalance;constructor(e,r){super(),this.masterAccount=e,this.initialBalance=r}async createAccount(e,r){await this.masterAccount.createAccount(e,r,this.initialBalance)}}yr.LocalAccountCreator=Qv;class eg extends mc{connection;helperUrl;constructor(e,r){super(),this.connection=e,this.helperUrl=r}async createAccount(e,r){await(0,Yv.default)(`${this.helperUrl}/account`,{body:JSON.stringify({newAccountId:e,newAccountPublicKey:r.toString()}),method:"POST"})}}yr.UrlAccountCreator=eg;var ia={},_c={},aa={},Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.Signer=void 0;class tg{}Hn.Signer=tg;Object.defineProperty(aa,"__esModule",{value:!0});aa.InMemorySigner=void 0;const so=Kt,rg=Rr,ng=wr,ig=Hn;class wc extends ig.Signer{keyStore;constructor(e){super(),this.keyStore=e}static async fromKeyPair(e,r,n){const i=new rg.InMemoryKeyStore;return await i.setKey(e,r,n),new wc(i)}async createKey(e,r,n){const i=n===so.KeyType.SECP256K1?so.KeyPair.fromRandom("secp256k1"):so.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(r,e,i),i.getPublicKey()}async getPublicKey(e,r){const n=await this.keyStore.getKey(r,e);return n===null?null:n.getPublicKey()}async signMessage(e,r,n){const i=new Uint8Array((0,ng.sha256)(e));if(!r)throw new Error("InMemorySigner requires provided account id");const a=await this.keyStore.getKey(n,r);if(a===null)throw new Error(`Key for ${r} not found in ${n}`);return a.sign(i)}toString(){return`InMemorySigner(${this.keyStore})`}}aa.InMemorySigner=wc;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Signer=t.InMemorySigner=void 0;var e=aa;Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return e.InMemorySigner}});var r=Hn;Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return r.Signer}})})(_c);Object.defineProperty(ia,"__esModule",{value:!0});ia.Connection=void 0;const ag=_c,uo=vn;function og(t){switch(t.type){case void 0:return t;case"JsonRpcProvider":return new uo.JsonRpcProvider({...t.args});case"FailoverRpcProvider":{const e=(t?.args||[]).map(r=>new uo.JsonRpcProvider(r));return new uo.FailoverRpcProvider(e)}default:throw new Error(`Unknown provider type ${t.type}`)}}function cg(t){switch(t.type){case void 0:return t;case"InMemorySigner":return new ag.InMemorySigner(t.keyStore);default:throw new Error(`Unknown signer type ${t.type}`)}}class Sc{networkId;provider;signer;jsvmAccountId;constructor(e,r,n,i){this.networkId=e,this.provider=r,this.signer=n,this.jsvmAccountId=i}getConnection(){return this}static fromConfig(e){const r=og(e.provider),n=cg(e.signer);return new Sc(e.networkId,r,n,e.jsvmAccountId)}}ia.Connection=Sc;var oa={},ca={},sa={},ko={exports:{}};(function(t,e){(function(r,n){n(e)})(X,function(r){const n=Symbol("newer"),i=Symbol("older");class a{constructor(v,A){typeof v!="number"&&(A=v,v=0),this.size=0,this.limit=v,this.oldest=this.newest=void 0,this._keymap=new Map,A&&(this.assign(A),v<1&&(this.limit=this.size))}_markEntryAsUsed(v){v!==this.newest&&(v[n]&&(v===this.oldest&&(this.oldest=v[n]),v[n][i]=v[i]),v[i]&&(v[i][n]=v[n]),v[n]=void 0,v[i]=this.newest,this.newest&&(this.newest[n]=v),this.newest=v)}assign(v){let A,E=this.limit||Number.MAX_VALUE;this._keymap.clear();let B=v[Symbol.iterator]();for(let T=B.next();!T.done;T=B.next()){let L=new o(T.value[0],T.value[1]);if(this._keymap.set(L.key,L),A?(A[n]=L,L[i]=A):this.oldest=L,A=L,E--==0)throw new Error("overflow")}this.newest=A,this.size=this._keymap.size}get(v){var A=this._keymap.get(v);return A?(this._markEntryAsUsed(A),A.value):void 0}set(v,A){var E=this._keymap.get(v);return E?(E.value=A,this._markEntryAsUsed(E),this):(this._keymap.set(v,E=new o(v,A)),this.newest?(this.newest[n]=E,E[i]=this.newest):this.oldest=E,this.newest=E,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var v=this.oldest;if(v)return this.oldest[n]?(this.oldest=this.oldest[n],this.oldest[i]=void 0):(this.oldest=void 0,this.newest=void 0),v[n]=v[i]=void 0,this._keymap.delete(v.key),--this.size,[v.key,v.value]}find(v){let A=this._keymap.get(v);return A?A.value:void 0}has(v){return this._keymap.has(v)}delete(v){var A=this._keymap.get(v);return A?(this._keymap.delete(A.key),A[n]&&A[i]?(A[i][n]=A[n],A[n][i]=A[i]):A[n]?(A[n][i]=void 0,this.oldest=A[n]):A[i]?(A[i][n]=void 0,this.newest=A[i]):this.oldest=this.newest=void 0,this.size--,A.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new b(this.oldest)}values(){return new g(this.oldest)}entries(){return this}[Symbol.iterator](){return new c(this.oldest)}forEach(v,A){typeof A!="object"&&(A=this);let E=this.oldest;for(;E;)v.call(A,E.value,E.key,this),E=E[n]}toJSON(){for(var v=new Array(this.size),A=0,E=this.oldest;E;)v[A++]={key:E.key,value:E.value},E=E[n];return v}toString(){for(var v="",A=this.oldest;A;)v+=String(A.key)+":"+A.value,A=A[n],A&&(v+=" < ");return v}}r.LRUMap=a;function o(p,v){this.key=p,this.value=v,this[n]=void 0,this[i]=void 0}function c(p){this.entry=p}c.prototype[Symbol.iterator]=function(){return this},c.prototype.next=function(){let p=this.entry;return p?(this.entry=p[n],{done:!1,value:[p.key,p.value]}):{done:!0,value:void 0}};function b(p){this.entry=p}b.prototype[Symbol.iterator]=function(){return this},b.prototype.next=function(){let p=this.entry;return p?(this.entry=p[n],{done:!1,value:p.key}):{done:!0,value:void 0}};function g(p){this.entry=p}g.prototype[Symbol.iterator]=function(){return this},g.prototype.next=function(){let p=this.entry;return p?(this.entry=p[n],{done:!1,value:p.value}):{done:!0,value:void 0}}})})(ko,ko.exports);var sg=ko.exports;Object.defineProperty(sa,"__esModule",{value:!0});sa.Storage=void 0;const ug=sg;class Ac{cache;static MAX_ELEMENTS=100;blockHeights;constructor(e={max:Ac.MAX_ELEMENTS}){this.cache=new ug.LRUMap(e.max),this.blockHeights=new Map}load(e){if(!("blockId"in e))return;let n=e.blockId;return n.toString().length==44&&(n=this.blockHeights.get(n.toString())),this.cache.get(n)}save(e,{blockHeight:r,blockTimestamp:n,contractCode:i,contractState:a}){this.blockHeights.set(e,r),this.cache.set(r,{blockHeight:r,blockTimestamp:n,contractCode:i,contractState:a})}}sa.Storage=Ac;var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.Runtime=void 0;const fg=wr,kt=t=>()=>{throw new Error("method not implemented: "+t)},Be=t=>()=>{throw new Error("method not available for view calls: "+t)};class dg{context;wasm;memory;registers;logs;result;constructor({contractCode:e,...r}){this.context=r,this.wasm=this.prepareWASM(Buffer.from(e,"base64")),this.memory=new WebAssembly.Memory({initial:1024,maximum:2048}),this.registers={},this.logs=[],this.result=Buffer.from([])}readUTF16CStr(e){const r=[],n=new Uint16Array(this.memory.buffer);let i=Number(e)/2;for(;n[i]!=0;)r.push(n[i]),i++;return Buffer.from(Uint16Array.from(r).buffer).toString("ucs2")}readUTF8CStr(e,r){const n=[],i=new Uint8Array(this.memory.buffer);let a=Number(r);for(let o=0;o<e&&i[a]!=0;o++)n.push(i[a]),a++;return Buffer.from(n).toString("utf8")}storageRead(e,r){const n=Buffer.from(new Uint8Array(this.memory.buffer,Number(r),Number(e))),i=this.context.contractState.filter(a=>Buffer.compare(a.key,n)===0).map(a=>a.value);return i.length===0?null:i.length>1?i:i[0]}prepareWASM(e){const r=[];if(e.subarray(0,4).toString("utf8")!=="\0asm")throw new Error("Invalid magic number");const i=e.readUInt32LE(4);if(i!=1)throw new Error("Invalid version: "+i);let a=8;r.push(e.subarray(0,a));function o(){let v=0,A=0,E;do E=e[a++],v|=(E&127)<<A,A+=7;while(E&128);return v}function c(){const A=e[a++]&1,E=o(),B=A?o():null;return{initial:E,max:B}}function b(){const v=o(),A=e.subarray(a,a+v);return a+=v,A.toString("utf8")}function g(v){const A=[];do{let E=v&127;v>>=7,v!==0&&(E|=128),A.push(E)}while(v!==0);return Buffer.from(A)}function p(v){const A=Buffer.from(v,"utf8");return Buffer.concat([g(A.length),A])}do{const v=a,A=e.readUInt8(a);a++;const E=o(),B=a+E;if(A==5)r.push(Buffer.from([5,1,0]));else if(A==2){const T=[],L=o();for(let F=0;F<L;F++){const Z=a;b(),b();const C=e.readUInt8(a);a++;let q=!1;switch(C){case 0:o();break;case 1:a++,c();break;case 2:c(),q=!0;break;case 3:a++,a++;break;default:throw new Error("Invalid import kind: "+C)}q||T.push(e.subarray(Z,a))}const R=Buffer.concat([p("env"),p("memory"),Buffer.from([2]),Buffer.from([0]),g(1)]);T.push(R);const z=Buffer.concat([g(T.length),...T]);r.push(Buffer.concat([Buffer.from([2]),g(z.length),z]))}else if(A==7){const T=[],L=o();for(let z=0;z<L;z++){const F=a;b();const Z=e.readUInt8(a);a++,o(),Z!==2&&T.push(e.subarray(F,a))}const R=Buffer.concat([g(T.length),...T]);r.push(Buffer.concat([Buffer.from([7]),g(R.length),R]))}else r.push(e.subarray(v,B));a=B}while(a<e.length);return Buffer.concat(r)}getRegisterLength(e){return BigInt(this.registers[e.toString()]?this.registers[e.toString()].length:Number.MAX_SAFE_INTEGER)}readFromRegister(e,r){new Uint8Array(this.memory.buffer).set(this.registers[e.toString()]||Buffer.from([]),Number(r))}getCurrentAccountId(e){this.registers[e.toString()]=Buffer.from(this.context.contractId)}inputMethodArgs(e){this.registers[e.toString()]=Buffer.from(this.context.methodArgs)}getBlockHeight(){return BigInt(this.context.blockHeight)}getBlockTimestamp(){return BigInt(this.context.blockTimestamp)}sha256(e,r,n){const i=new Uint8Array(this.memory.buffer,Number(r),Number(e));this.registers[n.toString()]=(0,fg.sha256)(i)}returnValue(e,r){this.result=Buffer.from(new Uint8Array(this.memory.buffer,Number(r),Number(e)))}panic(e){throw new Error("panic: "+e)}abort(e,r,n,i){const a=this.readUTF16CStr(e),o=this.readUTF16CStr(r),c=`${a} ${o}:${n}:${i}`;throw!a||!o?new Error("abort: String encoding is bad UTF-16 sequence."):new Error("abort: "+c)}appendToLog(e,r){this.logs.push(this.readUTF8CStr(e,r))}readStorage(e,r,n){const i=this.storageRead(e,r);return i==null?0n:(this.registers[n]=i,1n)}hasStorageKey(e,r){return this.storageRead(e,r)==null?0n:1n}getHostImports(){return{register_len:this.getRegisterLength.bind(this),read_register:this.readFromRegister.bind(this),current_account_id:this.getCurrentAccountId.bind(this),input:this.inputMethodArgs.bind(this),block_index:this.getBlockHeight.bind(this),block_timestamp:this.getBlockTimestamp.bind(this),sha256:this.sha256.bind(this),value_return:this.returnValue.bind(this),abort:this.abort.bind(this),log_utf8:this.appendToLog.bind(this),log_utf16:this.appendToLog.bind(this),storage_read:this.readStorage.bind(this),storage_has_key:this.hasStorageKey.bind(this),panic:()=>this.panic("explicit guest panic"),panic_utf8:(e,r)=>this.panic(this.readUTF8CStr(e,r)),epoch_height:kt("epoch_height"),storage_usage:kt("storage_usage"),account_balance:kt("account_balance"),account_locked_balance:kt("account_locked_balance"),random_seed:kt("random_seed"),ripemd160:kt("ripemd160"),keccak256:kt("keccak256"),keccak512:kt("keccak512"),ecrecover:kt("ecrecover"),validator_stake:kt("validator_stake"),validator_total_stake:kt("validator_total_stake"),write_register:Be("write_register"),signer_account_id:Be("signer_account_id"),signer_account_pk:Be("signer_account_pk"),predecessor_account_id:Be("predecessor_account_id"),attached_deposit:Be("attached_deposit"),prepaid_gas:Be("prepaid_gas"),used_gas:Be("used_gas"),promise_create:Be("promise_create"),promise_then:Be("promise_then"),promise_and:Be("promise_and"),promise_batch_create:Be("promise_batch_create"),promise_batch_then:Be("promise_batch_then"),promise_batch_action_create_account:Be("promise_batch_action_create_account"),promise_batch_action_deploy_contract:Be("promise_batch_action_deploy_contract"),promise_batch_action_function_call:Be("promise_batch_action_function_call"),promise_batch_action_function_call_weight:Be("promise_batch_action_function_call_weight"),promise_batch_action_transfer:Be("promise_batch_action_transfer"),promise_batch_action_stake:Be("promise_batch_action_stake"),promise_batch_action_add_key_with_full_access:Be("promise_batch_action_add_key_with_full_access"),promise_batch_action_add_key_with_function_call:Be("promise_batch_action_add_key_with_function_call"),promise_batch_action_delete_key:Be("promise_batch_action_delete_key"),promise_batch_action_delete_account:Be("promise_batch_action_delete_account"),promise_results_count:Be("promise_results_count"),promise_result:Be("promise_result"),promise_return:Be("promise_return"),storage_write:Be("storage_write"),storage_remove:Be("storage_remove")}}async execute(e){const r=await WebAssembly.compile(this.wasm),i=(await WebAssembly.instantiate(r,{env:{...this.getHostImports(),memory:this.memory}})).exports[e];if(i==null)throw new Error(`Contract method '${e}' does not exists in contract ${this.context.contractId} for block id ${this.context.blockHeight}`);return i(),{result:this.result,logs:this.logs}}}ua.Runtime=dg;Object.defineProperty(ca,"__esModule",{value:!0});ca.LocalViewExecution=void 0;const lg=Qe,hg=sa,bg=ua,pg=xt;class yg{connection;storage;constructor(e){this.connection=e.getConnection(),this.storage=new hg.Storage}async fetchContractCode(e,r){return(await this.connection.provider.query({request_type:"view_code",account_id:e,...r})).code_base64}async fetchContractState(e,r){return(0,pg.viewState)(this.connection,e,"",r)}async fetch(e,r){const n=await this.connection.provider.block(r),i=n.header.hash,a=n.header.height,o=n.header.timestamp,c=await this.fetchContractCode(e,r),b=await this.fetchContractState(e,r);return{blockHash:i,blockHeight:a,blockTimestamp:o,contractCode:c,contractState:b}}async loadOrFetch(e,r){const n=this.storage.load(r);if(n)return n;const{blockHash:i,...a}=await this.fetch(e,r);return this.storage.save(i,a),a}async viewFunction({contractId:e,methodName:r,args:n={},blockQuery:i={finality:"optimistic"}}){const a=JSON.stringify(n),{contractCode:o,contractState:c,blockHeight:b,blockTimestamp:g}=await this.loadOrFetch(e,i),p=new bg.Runtime({contractId:e,contractCode:o,contractState:c,blockHeight:b,blockTimestamp:g,methodArgs:a}),{result:v,logs:A}=await p.execute(r);return A&&(0,lg.printTxOutcomeLogs)({contractId:e,logs:A}),JSON.parse(Buffer.from(v).toString())}}ca.LocalViewExecution=yg;var Ec={exports:{}};function vg(t){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(t)}var Vf=vg,xc=Vf,Ic=function(t,e){return xc(e)?t+"."+e:t+"["+JSON.stringify(e)+"]"};Ic.valid=xc;Ic.property=function(t){return xc(t)?t:JSON.stringify(t)};var gg=Ic,Ms=Xo,Jf=Vf,Ps=/[\{\[]/,Bs=/[\}\]]/,Os=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof","NaN","undefined"],Wf={};for(var fo=0;fo<Os.length;fo++)Wf[Os[fo]]=!0;var mg=function(t){return Jf(t)&&!Wf.hasOwnProperty(t)},Zf={s:function(t){return""+t},d:function(t){return""+Number(t)},o:function(t){return JSON.stringify(t)}},Xf=function(){var t=[],e=0,r={},n=function(o){for(var c="";c.length<e*2;)c+="  ";t.push(c+o)},i=function(o){if(Bs.test(o.trim()[0])&&Ps.test(o[o.length-1])){e--,n(o),e++;return}if(Ps.test(o[o.length-1])){n(o),e++;return}if(Bs.test(o.trim()[0])){e--,n(o);return}n(o)},a=function(o){if(!o)return a;if(arguments.length===1&&o.indexOf(`
`)>-1)for(var c=o.trim().split(`
`),b=0;b<c.length;b++)i(c[b].trim());else i(Ms.format.apply(Ms,arguments));return a};return a.scope={},a.formats=Zf,a.sym=function(o){return(!o||!mg(o))&&(o="tmp"),r[o]||(r[o]=0),o+(r[o]++||"")},a.property=function(o,c){return arguments.length===1&&(c=o,o=""),c=c+"",Jf(c)?o?o+"."+c:c:o?o+"["+JSON.stringify(c)+"]":JSON.stringify(c)},a.toString=function(){return t.join(`
`)},a.toFunction=function(o){o||(o={});var c="return ("+a.toString()+")";Object.keys(a.scope).forEach(function(p){o[p]||(o[p]=a.scope[p])});var b=Object.keys(o).map(function(p){return p}),g=b.map(function(p){return o[p]});return Function.apply(null,b.concat(c)).apply(null,g)},arguments.length&&a.apply(null,arguments),a};Xf.formats=Zf;var _g=Xf,fa={},wg=/~/,Sg=/~[01]/g;function Ag(t){switch(t){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+t)}function Yf(t){return wg.test(t)?t.replace(Sg,Ag):t}function Eg(t,e,r){for(var n,i,a=1,o=e.length;a<o;){if(e[a]==="constructor"||e[a]==="prototype"||e[a]==="__proto__")return t;if(n=Yf(e[a++]),i=o>a,typeof t[n]>"u"&&(Array.isArray(t)&&n==="-"&&(n=t.length),i&&(e[a]!==""&&e[a]<1/0||e[a]==="-"?t[n]=[]:t[n]={})),!i)break;t=t[n]}var c=t[n];return r===void 0?delete t[n]:t[n]=r,c}function Mc(t){if(typeof t=="string"){if(t=t.split("/"),t[0]==="")return t;throw new Error("Invalid JSON pointer.")}else if(Array.isArray(t)){for(const e of t)if(typeof e!="string"&&typeof e!="number")throw new Error("Invalid JSON pointer. Must be of type string or number.");return t}throw new Error("Invalid JSON pointer.")}function Qf(t,e){if(typeof t!="object")throw new Error("Invalid input object.");e=Mc(e);var r=e.length;if(r===1)return t;for(var n=1;n<r;){if(t=t[Yf(e[n++])],r===n)return t;if(typeof t!="object"||t===null)return}}function ed(t,e,r){if(typeof t!="object")throw new Error("Invalid input object.");if(e=Mc(e),e.length===0)throw new Error("Invalid JSON pointer for set.");return Eg(t,e,r)}function xg(t){var e=Mc(t);return{get:function(r){return Qf(r,e)},set:function(r,n){return ed(r,e,n)}}}fa.get=Qf;fa.set=ed;fa.compile=xg;var Ig=Pg,Mg=Object.prototype.hasOwnProperty;function Pg(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)Mg.call(r,n)&&(t[n]=r[n])}return t}var td={},rd={exports:{}};(function(t){var e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r=/\/\d{1,3}(?=%|$)/,n=/\//,i=/%.*$/,a=/([^0-9a-f:/%])/i,o=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/i;function c(p){if(!e.test(p))return!1;var v=p.split(".");if(v.length!==4||v[0][0]==="0"&&v[0].length>1||v[1][0]==="0"&&v[1].length>1||v[2][0]==="0"&&v[2].length>1||v[3][0]==="0"&&v[3].length>1)return!1;var A=Number(v[0]),E=Number(v[1]),B=Number(v[2]),T=Number(v[3]);return A>=0&&A<256&&E>=0&&E<256&&B>=0&&B<256&&T>=0&&T<256}function b(p){var v=p.replace(r,""),A=p.length!==v.length;if(A||!A&&n.test(p))return!1;var E=v.replace(i,""),B=E.lastIndexOf(":");if(B===-1)return!1;var T=E.substring(B+1),L=c(T),R=L?E.substring(0,B+1)+"1234:5678":E;if(a.test(R)||o.test(R))return!1;var z=R.split("::");if(z.length>2)return!1;if(z.length===2){var F=z[0]===""?[]:z[0].split(":"),Z=z[1]===""?[]:z[1].split(":"),C=8-(F.length+Z.length);if(C<=0)return!1}else if(R.split(":").length!==8)return!1;return!0}function g(p){return c(p)||b(p)}t.exports=function(v){if(v||(v={}),v.version===4)return c;if(v.version===6)return b;if(v.version==null)return g;throw new Error("Unknown version: "+v.version)},t.exports.__all_regexes__=[e,r,n,i,a,o]})(rd);var Bg=rd.exports;(function(t){var e=Bg,r=/\s/,n=/^[a-zA-Z0-9.-]+$/,i=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/,a=/^\+[0-9][0-9 ]{5,27}[0-9]$/,o=/ {2}/,c=/ /g;t["date-time"]=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(?:\.\d+|)([zZ]|[+-]\d{2}:\d{2})$/,t.date=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,t.time=/^\d{2}:\d{2}:\d{2}$/,t.email=function(b){return b.indexOf("@")!==-1&&!r.test(b)},t["ip-address"]=t.ipv4=e({version:4}),t.ipv6=e({version:6}),t.uri=/^[a-zA-Z][a-zA-Z0-9+\-.]*:[^\s]*$/,t.color=/(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/,t.hostname=function(b){if(!n.test(b))return!1;for(var g=b.split("."),p=0;p<g.length;p++)if(!i.test(g[p]))return!1;return!0},t.alpha=/^[a-zA-Z]+$/,t.alphanumeric=/^[a-zA-Z0-9]+$/,t.style=/.:\s*[^;]/g,t.phone=function(b){if(!a.test(b)||o.test(b))return!1;var g=b.substring(1).replace(c,"").length;return g>=7&&g<=15},t["utc-millisec"]=/^[0-9]{1,15}\.?[0-9]{0,15}$/})(td);Ec.exports;(function(t){var e=gg,r=_g,n=fa,i=Ig,a=td,o=function(A,E,B){var T=function(C){return C&&C.id===B?C:typeof C!="object"||!C?null:Object.keys(C).reduce(function(q,W){return q||T(C[W])},null)},L=T(A);if(L)return L;B=B.replace(/^#/,""),B=B.replace(/\/$/,"");try{return n.get(A,decodeURI(B))}catch{var R=B.indexOf("#"),z;if(R!==0)if(R===-1)z=E[B];else{var F=B.slice(0,R);z=E[F];var Z=B.slice(R).replace(/^#/,"");try{return n.get(z,Z)}catch{}}else z=E[B];return z||null}},c={};c.any=function(){return"true"},c.null=function(A){return A+" === null"},c.boolean=function(A){return"typeof "+A+' === "boolean"'},c.array=function(A){return"Array.isArray("+A+")"},c.object=function(A){return"typeof "+A+' === "object" && '+A+" && !Array.isArray("+A+")"},c.number=function(A){return"typeof "+A+' === "number" && isFinite('+A+")"},c.integer=function(A){return"typeof "+A+' === "number" && (Math.floor('+A+") === "+A+" || "+A+" > 9007199254740992 || "+A+" < -9007199254740992)"},c.string=function(A){return"typeof "+A+' === "string"'};var b=function(A,E){E=Math.min(E===-1?A.length:E,A.length);for(var B=[],T=0;T<E;T++)B.push(typeof A[T]=="object"?JSON.stringify(A[T]):A[T]);for(var T=1;T<B.length;T++)if(B.indexOf(B[T])!==T)return!1;return!0},g=function(A,E){var B,T=(E|0)!==E?Math.pow(10,E.toString().split(".").pop().length):1;if(T>1){var L=(A|0)!==A?Math.pow(10,A.toString().split(".").pop().length):1;L>T?B=!0:B=Math.round(T*A)%(T*E)}else B=A%E;return!B},p=function(A,E,B){return B>-1&&E.length>B?!0:A.test(E)},v=function(A,E,B,T,L){var R=L?i(a,L.formats):a,z={unique:b,formats:R,isMultipleOf:g,testLimitedRegex:p},F=L?!!L.verbose:!1,Z=L&&L.greedy!==void 0?L.greedy:!1,C={},q=[],W=function(y){var _=y+(C[y]=(C[y]||0)+1);return q.push(_),_},k=function(y){var _=JSON.stringify(y);try{for(var P=/\[([^\[\]"]+)\]/;P.test(_);)_=_.replace(P,I);return _}catch{return JSON.stringify(y)}function I(m,u){if(q.indexOf(u)===-1)throw new Error("Unreplaceable");return'." + '+u+' + "'}},$={},ee=function(y){if($[y])return $[y];var _=W("pattern");return z[_]=new RegExp(y),$[y]=_,_},M=["i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"],s=function(){var y=M.shift();return M.push(y+y[0]),q.push(y),y},d=function(y,_,P,I,m){var u=_.properties,w=_.type,j=!1;Array.isArray(_.items)&&(u={},_.items.forEach(function(ue,ie){u[ie]=ue}),w="array",j=!0);var H=0,U=function(ue,ie,oe){h("errors++"),P===!0&&(h("if (validate.errors === null) validate.errors = []"),F?h("validate.errors.push({field:%s,message:%s,value:%s,type:%s,schemaPath:%s})",k(ie||y),JSON.stringify(ue),oe||y,JSON.stringify(w),JSON.stringify(m)):h("validate.errors.push({field:%s,message:%s})",k(ie||y),JSON.stringify(ue)))};_.required===!0?(H++,h("if (%s === undefined) {",y),U("is required"),h("} else {")):(H++,h("if (%s !== undefined) {",y));var ne=[].concat(w).map(function(ue){if(ue&&!c.hasOwnProperty(ue))throw new Error("Unknown type: "+ue);return c[ue||"any"](y)}).join(" || ")||"true";if(ne!=="true"&&(H++,h("if (!(%s)) {",ne),U("is the wrong type"),h("} else {")),j){if(_.additionalItems===!1)h("if (%s.length > %d) {",y,_.items.length),U("has additional items"),h("}");else if(_.additionalItems){var V=s();h("for (var %s = %d; %s < %s.length; %s++) {",V,_.items.length,V,y,V),d(y+"["+V+"]",_.additionalItems,P,I,m.concat("additionalItems")),h("}")}}if(_.format&&R[_.format]){w!=="string"&&a[_.format]&&h("if (%s) {",c.string(y));var J=W("format");z[J]=R[_.format],typeof z[J]=="function"?h("if (!%s(%s)) {",J,y):h("if (!testLimitedRegex(%s, %s, %d)) {",J,y,typeof _.maxLength>"u"?-1:_.maxLength),U("must be "+_.format+" format"),h("}"),w!=="string"&&a[_.format]&&h("}")}if(Array.isArray(_.required)){var J=W("missing");h("var %s = 0",J);var be=function(ie){var oe=e(y,ie);h("if (%s === undefined) {",oe),U("is required",oe),h("%s++",J),h("}")};h("if ((%s)) {",w!=="object"?c.object(y):"true"),_.required.map(be),h("}"),Z||(h("if (%s === 0) {",J),H++)}if(_.uniqueItems&&(w!=="array"&&h("if (%s) {",c.array(y)),h("if (!(unique(%s, %d))) {",y,_.maxItems||-1),U("must be unique"),h("}"),w!=="array"&&h("}")),_.enum){var re=_.enum.some(function(ue){return typeof ue=="object"}),le=re?function(ue){return"JSON.stringify("+y+") !== JSON.stringify("+JSON.stringify(ue)+")"}:function(ue){return y+" !== "+JSON.stringify(ue)};h("if (%s) {",_.enum.map(le).join(" && ")||"false"),U("must be an enum value"),h("}")}if(_.dependencies&&(w!=="object"&&h("if (%s) {",c.object(y)),Object.keys(_.dependencies).forEach(function(ue){var ie=_.dependencies[ue];typeof ie=="string"&&(ie=[ie]);var oe=function(Pe){return e(y,Pe)+" !== undefined"};Array.isArray(ie)&&(h("if (%s !== undefined && !(%s)) {",e(y,ue),ie.map(oe).join(" && ")||"true"),U("dependencies not set"),h("}")),typeof ie=="object"&&(h("if (%s !== undefined) {",e(y,ue)),d(y,ie,P,I,m.concat(["dependencies",ue])),h("}"))}),w!=="object"&&h("}")),_.additionalProperties||_.additionalProperties===!1){w!=="object"&&h("if (%s) {",c.object(y));var V=s(),Q=W("keys"),D=function(ie){return Q+"["+V+"] !== "+JSON.stringify(ie)},G=function(ie){return"!"+ee(ie)+".test("+Q+"["+V+"])"},ce=Object.keys(u||{}).map(D).concat(Object.keys(_.patternProperties||{}).map(G)).join(" && ")||"true";h("var %s = Object.keys(%s)",Q,y)("for (var %s = 0; %s < %s.length; %s++) {",V,V,Q,V)("if (%s) {",ce),_.additionalProperties===!1?(I&&h("delete %s",y+"["+Q+"["+V+"]]"),U("has additional properties",null,JSON.stringify(y+".")+" + "+Q+"["+V+"]")):d(y+"["+Q+"["+V+"]]",_.additionalProperties,P,I,m.concat(["additionalProperties"])),h("}")("}"),w!=="object"&&h("}")}if(_.$ref){var ae=o(B,L&&L.schemas||{},_.$ref);if(ae){var Y=E[_.$ref];Y||(E[_.$ref]=function(oe){return Y(oe)},Y=v(ae,E,B,!1,L));var J=W("ref");z[J]=Y,h("if (!(%s(%s))) {",J,y),U("referenced schema does not match"),h("}")}}if(_.not){var te=W("prev");h("var %s = errors",te),d(y,_.not,!1,I,m.concat("not")),h("if (%s === errors) {",te),U("negative schema matches"),h("} else {")("errors = %s",te)("}")}if(_.items&&!j){w!=="array"&&h("if (%s) {",c.array(y));var V=s();h("for (var %s = 0; %s < %s.length; %s++) {",V,V,y,V),d(y+"["+V+"]",_.items,P,I,m.concat("items")),h("}"),w!=="array"&&h("}")}if(_.patternProperties){w!=="object"&&h("if (%s) {",c.object(y));var Q=W("keys"),V=s();h("var %s = Object.keys(%s)",Q,y)("for (var %s = 0; %s < %s.length; %s++) {",V,V,Q,V),Object.keys(_.patternProperties).forEach(function(oe){var Pe=ee(oe);h("if (%s.test(%s)) {",Pe,Q+"["+V+"]"),d(y+"["+Q+"["+V+"]]",_.patternProperties[oe],P,I,m.concat(["patternProperties",oe])),h("}")}),h("}"),w!=="object"&&h("}")}if(_.pattern){var se=ee(_.pattern);w!=="string"&&h("if (%s) {",c.string(y)),h("if (!(testLimitedRegex(%s, %s, %d))) {",se,y,typeof _.maxLength>"u"?-1:_.maxLength),U("pattern mismatch"),h("}"),w!=="string"&&h("}")}if(_.allOf&&_.allOf.forEach(function(ue,ie){d(y,ue,P,I,m.concat(["allOf",ie]))}),_.anyOf&&_.anyOf.length){var te=W("prev");_.anyOf.forEach(function(ie,oe){oe===0?h("var %s = errors",te):h("if (errors !== %s) {",te)("errors = %s",te),d(y,ie,!1,!1,m)}),_.anyOf.forEach(function(ie,oe){oe&&h("}")}),h("if (%s !== errors) {",te),U("no schemas match"),h("}")}if(_.oneOf&&_.oneOf.length){var te=W("prev"),de=W("passes");h("var %s = errors",te)("var %s = 0",de),_.oneOf.forEach(function(ie,oe){d(y,ie,!1,!1,m),h("if (%s === errors) {",te)("%s++",de)("} else {")("errors = %s",te)("}")}),h("if (%s !== 1) {",de),U("no (or more than one) schemas match"),h("}")}for(_.multipleOf!==void 0&&(w!=="number"&&w!=="integer"&&h("if (%s) {",c.number(y)),h("if (!isMultipleOf(%s, %d)) {",y,_.multipleOf),U("has a remainder"),h("}"),w!=="number"&&w!=="integer"&&h("}")),_.maxProperties!==void 0&&(w!=="object"&&h("if (%s) {",c.object(y)),h("if (Object.keys(%s).length > %d) {",y,_.maxProperties),U("has more properties than allowed"),h("}"),w!=="object"&&h("}")),_.minProperties!==void 0&&(w!=="object"&&h("if (%s) {",c.object(y)),h("if (Object.keys(%s).length < %d) {",y,_.minProperties),U("has less properties than allowed"),h("}"),w!=="object"&&h("}")),_.maxItems!==void 0&&(w!=="array"&&h("if (%s) {",c.array(y)),h("if (%s.length > %d) {",y,_.maxItems),U("has more items than allowed"),h("}"),w!=="array"&&h("}")),_.minItems!==void 0&&(w!=="array"&&h("if (%s) {",c.array(y)),h("if (%s.length < %d) {",y,_.minItems),U("has less items than allowed"),h("}"),w!=="array"&&h("}")),_.maxLength!==void 0&&(w!=="string"&&h("if (%s) {",c.string(y)),h("if (%s.length > %d) {",y,_.maxLength),U("has longer length than allowed"),h("}"),w!=="string"&&h("}")),_.minLength!==void 0&&(w!=="string"&&h("if (%s) {",c.string(y)),h("if (%s.length < %d) {",y,_.minLength),U("has less length than allowed"),h("}"),w!=="string"&&h("}")),_.minimum!==void 0&&(w!=="number"&&w!=="integer"&&h("if (%s) {",c.number(y)),h("if (%s %s %d) {",y,_.exclusiveMinimum?"<=":"<",_.minimum),U("is less than minimum"),h("}"),w!=="number"&&w!=="integer"&&h("}")),_.maximum!==void 0&&(w!=="number"&&w!=="integer"&&h("if (%s) {",c.number(y)),h("if (%s %s %d) {",y,_.exclusiveMaximum?">=":">",_.maximum),U("is more than maximum"),h("}"),w!=="number"&&w!=="integer"&&h("}")),u&&Object.keys(u).forEach(function(ue){Array.isArray(w)&&w.indexOf("null")!==-1&&h("if (%s !== null) {",y),d(e(y,ue),u[ue],P,I,m.concat(j?ue:["properties",ue])),Array.isArray(w)&&w.indexOf("null")!==-1&&h("}")});H--;)h("}")},h=r("function validate(data) {")("if (data === undefined) data = null")("validate.errors = null")("var errors = 0");return d("data",A,T,L&&L.filter,[]),h("return errors === 0")("}"),h=h.toFunction(z),h.errors=null,Object.defineProperty&&Object.defineProperty(h,"error",{get:function(){return h.errors?h.errors.map(function(y){return y.field+" "+y.message}).join(`
`):""}}),h.toJSON=function(){return A},h};t.exports=function(A,E){return typeof A=="string"&&(A=JSON.parse(A)),v(A,{},A,!0,E)},t.exports.filter=function(A,E){var B=t.exports(A,i(E,{filter:!0}));return function(T){return B(T),T}}})(Ec);var Og=Ec.exports,nd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AbiSerializationType=t.AbiFunctionModifier=t.AbiFunctionKind=t.SCHEMA_VERSION=void 0,t.SCHEMA_VERSION="0.3.0",function(e){e.View="view",e.Call="call"}(t.AbiFunctionKind||(t.AbiFunctionKind={})),function(e){e.Init="init",e.Private="private",e.Payable="payable"}(t.AbiFunctionModifier||(t.AbiFunctionModifier={})),function(e){e.Json="json",e.Borsh="borsh"}(t.AbiSerializationType||(t.AbiSerializationType={}))})(nd);var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.ConflictingOptions=Lt.ArgumentSchemaError=Lt.UnknownArgumentError=Lt.UnsupportedSerializationError=void 0;class Tg extends Error{constructor(e,r){super(`Contract method '${e}' is using an unsupported serialization type ${r}`)}}Lt.UnsupportedSerializationError=Tg;class Cg extends Error{constructor(e,r){super(`Unrecognized argument '${e}', expected '${JSON.stringify(r)}'`)}}Lt.UnknownArgumentError=Cg;class kg extends Error{constructor(e,r){super(`Argument '${e}' does not conform to the specified ABI schema: '${JSON.stringify(r)}'`)}}Lt.ArgumentSchemaError=kg;class Ng extends Error{constructor(){super("Conflicting contract method options have been passed. You can either specify ABI or a list of view/call methods.")}}Lt.ConflictingOptions=Ng;var id=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oa,"__esModule",{value:!0});oa.Contract=void 0;const lo=Qe,No=bt,Lg=ca,Rg=id(Og),Ts=id(Xs),bi=nd,Kg=_n,Tn=Lt,$g=xt;function Cs(t,e){return{[t](...r){return e(...r)}}[t]}function ks(t,e,r){if(!ti(t))return;if(e.params&&e.params.serialization_type!==bi.AbiSerializationType.Json)throw new Tn.UnsupportedSerializationError(e.name,e.params.serialization_type);if(e.result&&e.result.serialization_type!==bi.AbiSerializationType.Json)throw new Tn.UnsupportedSerializationError(e.name,e.result.serialization_type);const n=e.params?.args||[];for(const i of n){const a=t[i.name],o=i.type_schema;o.definitions=r.body.root_schema.definitions;const c=(0,Rg.default)(o);if(!c(a))throw new Tn.ArgumentSchemaError(i.name,c.errors)}for(const i of Object.keys(t))if(!n.find(o=>o.name===i))throw new Tn.UnknownArgumentError(i,n.map(o=>o.name))}const Ns=t=>t&&t.byteLength!==void 0&&t.byteLength===t.length,ti=t=>Object.prototype.toString.call(t)==="[object Object]";class Dg{account;connection;contractId;lve;constructor(e,r,n){this.connection=e.getConnection(),e instanceof Kg.Account&&((0,Ts.default)("new Contract(account, contractId, options)")("use `new Contract(connection, contractId, options)` instead"),this.account=e),this.contractId=r,this.lve=new Lg.LocalViewExecution(e);const{viewMethods:i=[],changeMethods:a=[],abi:o,useLocalViewExecution:c}=n;let b=i.map(p=>({name:p,abi:null})),g=a.map(p=>({name:p,abi:null}));if(o){if(b.length>0||g.length>0)throw new Tn.ConflictingOptions;b=o.body.functions.filter(p=>p.kind===bi.AbiFunctionKind.View).map(p=>({name:p.name,abi:p})),g=o.body.functions.filter(p=>p.kind===bi.AbiFunctionKind.Call).map(p=>({name:p.name,abi:p}))}b.forEach(({name:p,abi:v})=>{Object.defineProperty(this,p,{writable:!1,enumerable:!0,value:Cs(p,async(A={},E={},...B)=>{if(B.length||!(ti(A)||Ns(A))||!ti(E))throw new No.PositionalArgsError;if(v&&ks(A,v,o),c)try{return await this.lve.viewFunction({contractId:this.contractId,methodName:p,args:A,...E})}catch(T){lo.Logger.warn(`Local view execution failed with: "${T.message}"`),lo.Logger.warn("Fallback to normal RPC call")}return this.account?this.account.viewFunction({contractId:this.contractId,methodName:p,args:A,...E}):(0,$g.viewFunction)(this.connection,{contractId:this.contractId,methodName:p,args:A,...E})})})}),g.forEach(({name:p,abi:v})=>{Object.defineProperty(this,p,{writable:!1,enumerable:!0,value:Cs(p,async(...A)=>{if(A.length&&(A.length>3||!(ti(A[0])||Ns(A[0]))))throw new No.PositionalArgsError;return(A.length>1||!(A[0]&&A[0].args))&&((0,Ts.default)("contract.methodName(args, gas, amount)")("use `contract.methodName({ signerAccount, args, gas?, amount?, callbackUrl?, meta? })` instead"),A[0]={args:A[0],gas:A[1],amount:A[2]}),v&&ks(A[0].args,v,o),this._changeMethod({methodName:p,...A[0]})})})})}async _changeMethod({signerAccount:e,args:r,methodName:n,gas:i,amount:a,meta:o,callbackUrl:c}){jg({gas:i,amount:a});const b=this.account||e;if(!b)throw new Error("signerAccount must be specified");const g=await b.functionCall({contractId:this.contractId,methodName:n,args:r,gas:i,attachedDeposit:a,walletMeta:o,walletCallbackUrl:c});return(0,lo.getTransactionLastResult)(g)}}oa.Contract=Dg;function jg(t){const e="number, decimal string or BigInt";for(const r of Object.keys(t)){const n=t[r];if(n&&typeof n!="bigint"&&isNaN(n))throw new No.ArgumentTypeError(r,e,n)}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultisigStateStatus=t.MultisigDeleteRequestRejectionError=t.UnsupportedSerializationError=t.UnknownArgumentError=t.ConflictingOptions=t.ArgumentSchemaError=t.Contract=t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=t.Connection=t.AccountMultisig=t.UrlAccountCreator=t.LocalAccountCreator=t.AccountCreator=t.Account2FA=t.Account=void 0;var e=_n;Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return e.Account}});var r=na;Object.defineProperty(t,"Account2FA",{enumerable:!0,get:function(){return r.Account2FA}});var n=yr;Object.defineProperty(t,"AccountCreator",{enumerable:!0,get:function(){return n.AccountCreator}}),Object.defineProperty(t,"LocalAccountCreator",{enumerable:!0,get:function(){return n.LocalAccountCreator}}),Object.defineProperty(t,"UrlAccountCreator",{enumerable:!0,get:function(){return n.UrlAccountCreator}});var i=zn;Object.defineProperty(t,"AccountMultisig",{enumerable:!0,get:function(){return i.AccountMultisig}});var a=ia;Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return a.Connection}});var o=ot;Object.defineProperty(t,"MULTISIG_STORAGE_KEY",{enumerable:!0,get:function(){return o.MULTISIG_STORAGE_KEY}}),Object.defineProperty(t,"MULTISIG_ALLOWANCE",{enumerable:!0,get:function(){return o.MULTISIG_ALLOWANCE}}),Object.defineProperty(t,"MULTISIG_GAS",{enumerable:!0,get:function(){return o.MULTISIG_GAS}}),Object.defineProperty(t,"MULTISIG_DEPOSIT",{enumerable:!0,get:function(){return o.MULTISIG_DEPOSIT}}),Object.defineProperty(t,"MULTISIG_CHANGE_METHODS",{enumerable:!0,get:function(){return o.MULTISIG_CHANGE_METHODS}}),Object.defineProperty(t,"MULTISIG_CONFIRM_METHODS",{enumerable:!0,get:function(){return o.MULTISIG_CONFIRM_METHODS}});var c=oa;Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return c.Contract}});var b=Lt;Object.defineProperty(t,"ArgumentSchemaError",{enumerable:!0,get:function(){return b.ArgumentSchemaError}}),Object.defineProperty(t,"ConflictingOptions",{enumerable:!0,get:function(){return b.ConflictingOptions}}),Object.defineProperty(t,"UnknownArgumentError",{enumerable:!0,get:function(){return b.UnknownArgumentError}}),Object.defineProperty(t,"UnsupportedSerializationError",{enumerable:!0,get:function(){return b.UnsupportedSerializationError}});var g=Sr;Object.defineProperty(t,"MultisigDeleteRequestRejectionError",{enumerable:!0,get:function(){return g.MultisigDeleteRequestRejectionError}}),Object.defineProperty(t,"MultisigStateStatus",{enumerable:!0,get:function(){return g.MultisigStateStatus}})})(Er);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Account=void 0;var e=Er;Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return e.Account}})})(zf);var ad={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MultisigStateStatus=t.MultisigDeleteRequestRejectionError=t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=t.AccountMultisig=t.Account2FA=void 0;var e=Er;Object.defineProperty(t,"Account2FA",{enumerable:!0,get:function(){return e.Account2FA}}),Object.defineProperty(t,"AccountMultisig",{enumerable:!0,get:function(){return e.AccountMultisig}}),Object.defineProperty(t,"MULTISIG_STORAGE_KEY",{enumerable:!0,get:function(){return e.MULTISIG_STORAGE_KEY}}),Object.defineProperty(t,"MULTISIG_ALLOWANCE",{enumerable:!0,get:function(){return e.MULTISIG_ALLOWANCE}}),Object.defineProperty(t,"MULTISIG_GAS",{enumerable:!0,get:function(){return e.MULTISIG_GAS}}),Object.defineProperty(t,"MULTISIG_DEPOSIT",{enumerable:!0,get:function(){return e.MULTISIG_DEPOSIT}}),Object.defineProperty(t,"MULTISIG_CHANGE_METHODS",{enumerable:!0,get:function(){return e.MULTISIG_CHANGE_METHODS}}),Object.defineProperty(t,"MULTISIG_CONFIRM_METHODS",{enumerable:!0,get:function(){return e.MULTISIG_CONFIRM_METHODS}}),Object.defineProperty(t,"MultisigDeleteRequestRejectionError",{enumerable:!0,get:function(){return e.MultisigDeleteRequestRejectionError}}),Object.defineProperty(t,"MultisigStateStatus",{enumerable:!0,get:function(){return e.MultisigStateStatus}})})(ad);var od={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.UrlAccountCreator=t.LocalAccountCreator=t.AccountCreator=void 0;var e=Er;Object.defineProperty(t,"AccountCreator",{enumerable:!0,get:function(){return e.AccountCreator}}),Object.defineProperty(t,"LocalAccountCreator",{enumerable:!0,get:function(){return e.LocalAccountCreator}}),Object.defineProperty(t,"UrlAccountCreator",{enumerable:!0,get:function(){return e.UrlAccountCreator}})})(od);var cd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;var e=Er;Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return e.Connection}})})(cd);var sd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Signer=t.InMemorySigner=void 0;var e=_c;Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return e.InMemorySigner}}),Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return e.Signer}})})(sd);var ud={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Contract=void 0;var e=Er;Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return e.Contract}})})(ud);var Pc={},Bc={},da={};Object.defineProperty(da,"__esModule",{value:!0});da.Near=void 0;const Fr=Er;class Ug{config;connection;accountCreator;constructor(e){if(this.config=e,this.connection=Fr.Connection.fromConfig({networkId:e.networkId,provider:e.provider||{type:"JsonRpcProvider",args:{url:e.nodeUrl,headers:e.headers}},signer:e.signer||{type:"InMemorySigner",keyStore:e.keyStore||e.deps?.keyStore},jsvmAccountId:e.jsvmAccountId||`jsvm.${e.networkId}`}),e.masterAccount){const r=e.initialBalance?BigInt(e.initialBalance):500000000000000000000000000n;this.accountCreator=new Fr.LocalAccountCreator(new Fr.Account(this.connection,e.masterAccount),r)}else e.helperUrl?this.accountCreator=new Fr.UrlAccountCreator(this.connection,e.helperUrl):this.accountCreator=null}async account(e){return new Fr.Account(this.connection,e)}async createAccount(e,r){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(e,r),new Fr.Account(this.connection,e)}}da.Near=Ug;var cn={};Object.defineProperty(cn,"__esModule",{value:!0});cn.ConnectedWalletAccount=cn.WalletConnection=void 0;const Fg=Er,fd=Kt,qg=Qe,dd=gr,zg=mr,Hg="/login/",Gg="add_request_and_confirm",Vg="_wallet_auth_key",ho="pending_key";class Jg{_walletBaseUrl;_authDataKey;_keyStore;_authData;_networkId;_near;_connectedAccount;_completeSignInPromise;constructor(e,r){if(typeof r!="string")throw new Error("Please define a clear appKeyPrefix for this WalletConnection instance as the second argument to the constructor");if(typeof window>"u")return new Proxy(this,{get(a,o){return o==="isSignedIn"?()=>!1:o==="getAccountId"?()=>"":a[o]&&typeof a[o]=="function"?()=>{throw new Error("No window found in context, please ensure you are using WalletConnection on the browser")}:a[o]}});this._near=e;const n=r+Vg,i=JSON.parse(window.localStorage.getItem(n));this._networkId=e.config.networkId,this._walletBaseUrl=e.config.walletUrl,r=r||e.config.contractName||"default",this._keyStore=e.connection.signer.keyStore,this._authData=i||{allKeys:[]},this._authDataKey=n,this.isSignedIn()||(this._completeSignInPromise=this._completeSignInWithAccessKey())}isSignedIn(){return!!this._authData.accountId}async isSignedInAsync(){return this._completeSignInPromise?(await this._completeSignInPromise,this.isSignedIn()):this.isSignedIn()}getAccountId(){return this._authData.accountId||""}async requestSignInUrl({contractId:e,methodNames:r,successUrl:n,failureUrl:i,keyType:a="ed25519"}){const o=new URL(window.location.href),c=new URL(this._walletBaseUrl+Hg);if(c.searchParams.set("success_url",n||o.href),c.searchParams.set("failure_url",i||o.href),e){await(await this._near.account(e)).state(),c.searchParams.set("contract_id",e);const g=fd.KeyPair.fromRandom(a);c.searchParams.set("public_key",g.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,ho+g.getPublicKey(),g)}return r&&r.forEach(b=>{c.searchParams.append("methodNames",b)}),c.toString()}async requestSignIn(e){const r=await this.requestSignInUrl(e);window.location.assign(r)}requestSignTransactionsUrl({transactions:e,meta:r,callbackUrl:n}){const i=new URL(window.location.href),a=new URL("sign",this._walletBaseUrl);return a.searchParams.set("transactions",e.map(o=>(0,zg.serialize)(dd.SCHEMA.Transaction,o)).map(o=>Buffer.from(o).toString("base64")).join(",")),a.searchParams.set("callbackUrl",n||i.href),r&&a.searchParams.set("meta",r),a.toString()}requestSignTransactions(e){const r=this.requestSignTransactionsUrl(e);window.location.assign(r)}async _completeSignInWithAccessKey(){const e=new URL(window.location.href),r=e.searchParams.get("public_key")||"",n=(e.searchParams.get("all_keys")||"").split(","),i=e.searchParams.get("account_id")||"";if(i){const a={accountId:i,allKeys:n};window.localStorage.setItem(this._authDataKey,JSON.stringify(a)),r&&await this._moveKeyFromTempToPermanent(i,r),this._authData=a}e.searchParams.delete("public_key"),e.searchParams.delete("all_keys"),e.searchParams.delete("account_id"),e.searchParams.delete("meta"),e.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,e.toString())}async _moveKeyFromTempToPermanent(e,r){const n=await this._keyStore.getKey(this._networkId,ho+r);await this._keyStore.setKey(this._networkId,e,n),await this._keyStore.removeKey(this._networkId,ho+r)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new ld(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}cn.WalletConnection=Jg;class ld extends Fg.Account{walletConnection;constructor(e,r,n){super(r,n),this.walletConnection=e}async signAndSendTransaction({receiverId:e,actions:r,walletMeta:n,walletCallbackUrl:i=window.location.href}){const a=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let o=await this.accessKeyForTransaction(e,r,a);if(!o)throw new Error(`Cannot find matching key for transaction sent to ${e}`);if(a&&a.toString()===o.public_key)try{return await super.signAndSendTransaction({receiverId:e,actions:r})}catch(A){if(A.type==="NotEnoughAllowance")o=await this.accessKeyForTransaction(e,r);else throw A}const c=await this.connection.provider.block({finality:"final"}),b=(0,qg.baseDecode)(c.header.hash),g=fd.PublicKey.from(o.public_key),p=o.access_key.nonce+1n,v=(0,dd.createTransaction)(this.accountId,g,e,p,r,b);return await this.walletConnection.requestSignTransactions({transactions:[v],meta:n,callbackUrl:i}),new Promise((A,E)=>{setTimeout(()=>{E(new Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(e,r,n){const{access_key:{permission:i}}=e;if(i==="FullAccess")return!0;if(i.FunctionCall){const{receiver_id:a,method_names:o}=i.FunctionCall;if(a===this.accountId&&o.includes(Gg))return!0;if(a===r){if(n.length!==1)return!1;const[{functionCall:c}]=n;return c&&(!c.deposit||c.deposit.toString()==="0")&&(o.length===0||o.includes(c.methodName))}}return!1}async accessKeyForTransaction(e,r,n){const i=await this.getAccessKeys();if(n){const o=i.find(c=>c.public_key.toString()===n.toString());if(o&&await this.accessKeyMatchesTransaction(o,e,r))return o}const a=this.walletConnection._authData.allKeys;for(const o of i)if(a.indexOf(o.public_key)!==-1&&await this.accessKeyMatchesTransaction(o,e,r))return o;return null}}cn.ConnectedWalletAccount=ld;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.ConnectedWalletAccount=t.Near=void 0;var e=da;Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return e.Near}});var r=cn;Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return r.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return r.WalletConnection}})})(Bc);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Near=void 0;var e=Bc;Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return e.Near}})})(Pc);var hd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.ConnectedWalletAccount=void 0;var e=Bc;Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return e.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return e.WalletConnection}})})(hd);(function(t){var e=X&&X.__createBinding||(Object.create?function(R,z,F,Z){Z===void 0&&(Z=F);var C=Object.getOwnPropertyDescriptor(z,F);(!C||("get"in C?!z.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return z[F]}}),Object.defineProperty(R,Z,C)}:function(R,z,F,Z){Z===void 0&&(Z=F),R[Z]=z[F]}),r=X&&X.__setModuleDefault||(Object.create?function(R,z){Object.defineProperty(R,"default",{enumerable:!0,value:z})}:function(R,z){R.default=z}),n=X&&X.__importStar||function(R){if(R&&R.__esModule)return R;var z={};if(R!=null)for(var F in R)F!=="default"&&Object.prototype.hasOwnProperty.call(R,F)&&e(z,R,F);return r(z,R),z};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.ConnectedWalletAccount=t.Near=t.KeyPair=t.Signer=t.InMemorySigner=t.Contract=t.Connection=t.Account=t.multisig=t.validators=t.transactions=t.utils=t.providers=t.accountCreator=void 0;const i=n(_f);t.providers=i;const a=n(Rf);t.utils=a;const o=n(Ff);t.transactions=o;const c=n(qf);t.validators=c;const b=zf;Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return b.Account}});const g=n(ad);t.multisig=g;const p=n(od);t.accountCreator=p;const v=cd;Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return v.Connection}});const A=sd;Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return A.Signer}}),Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return A.InMemorySigner}});const E=ud;Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return E.Contract}});const B=hi;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return B.KeyPair}});const T=Pc;Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return T.Near}});const L=hd;Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return L.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return L.WalletConnection}})})(mf);var la={};Object.defineProperty(la,"__esModule",{value:!0});la.connect=void 0;const Wg=Pc;async function Zg(t){return new Wg.Near(t)}la.connect=Zg;(function(t){var e=X&&X.__createBinding||(Object.create?function(a,o,c,b){b===void 0&&(b=c);var g=Object.getOwnPropertyDescriptor(o,c);(!g||("get"in g?!o.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(a,b,g)}:function(a,o,c,b){b===void 0&&(b=c),a[b]=o[c]}),r=X&&X.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),n=X&&X.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var c in a)c!=="default"&&Object.prototype.hasOwnProperty.call(a,c)&&e(o,a,c);return r(o,a),o},i=X&&X.__exportStar||function(a,o){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&e(o,a,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.keyStores=void 0,t.keyStores=n(Us),i(mf,t),i(la,t)})(mo);window.global||=window;window.Buffer=Ro.Buffer;const ha=new mo.Near({keyStore:new mo.keyStores.InMemoryKeyStore,networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"}),Qt=async(t,e,r={})=>(await ha.account(t)).viewFunction({contractId:t,methodName:e,args:r}),Xg=Object.freeze(Object.defineProperty({__proto__:null,near:ha,view:Qt},Symbol.toStringTag,{value:"Module"}));let Qn=null;async function Yg(){if(Qn)return Qn;const t=await ha.connection.provider.sendJsonRpc("validators","latest");return Qn={current:t.current_validators.reduce((e,r)=>(e[r.account_id]=r,e),{}),next:t.next_validators.reduce((e,r)=>(e[r.account_id]=r,e),{}),proposals:t.current_proposals.reduce((e,r)=>(e[r.account_id]=r,e),{})},Qn}async function bd(t){const e=await Yg();return e.current[t]?"active":e.next[t]?"next":e.proposals[t]?"proposed":"inactive"}const Qg=Object.freeze(Object.defineProperty({__proto__:null,getStatus:bd},Symbol.toStringTag,{value:"Module"})),pd=[],Hr={raw:"[]",undecorated:[],decorated:[]},e3=/doesn't exist/;async function yd(){const t=localStorage.getItem("accounts");!t||t===Hr.raw||(Hr.raw=t,Hr.undecorated=JSON.parse(t),Hr.decorated=await Promise.all(Hr.undecorated.map(async e=>{if(e.lockup_contract){const r=await ha.account(e.lockup_contract);try{await r.getAccountBalance()}catch(n){n instanceof Error&&e3.test(n.message)&&(e.lockup_contract="DELETED")}}return{...e,lockup_info:!e.lockup_contract||e.lockup_contract==="DELETED"?{}:{"Vesting Info":await Qt(e.lockup_contract,"get_vesting_information"),"Termination Status":await Qt(e.lockup_contract,"get_termination_status"),"Liquid Balance":Vr(await Qt(e.lockup_contract,"get_liquid_owners_balance")),"Locked Amount":Vr(await Qt(e.lockup_contract,"get_locked_amount")),"Owner's Balance":Vr(await Qt(e.lockup_contract,"get_owners_balance")),"Terminated Unvested Balance":Vr(await Qt(e.lockup_contract,"get_terminated_unvested_balance")),lockup_balance:await Qt(e.lockup_contract,"get_balance")},...e.delegated_to?{validator_status:await bd(e.delegated_to)}:{},...e.delegated_to&&e.lockup_contract&&e.lockup_contract!=="DELETED"?{staked_balance:await Qt(e.delegated_to,"get_account_total_balance",{account_id:e.lockup_contract})}:{}}})))}async function Lo(t="decorated"){if(!["raw","undecorated","decorated"].includes(t))throw new Error(`Invalid argument to \`get\`; must be 'raw' | 'undecorated' | 'decorated'; got ${t}`);return await yd(),Hr[t]}async function vd(t){localStorage.setItem("accounts",JSON.stringify(t)),await yd(),await Promise.all(pd.map(e=>e()))}function gd(t){pd.push(t)}const t3=Object.freeze(Object.defineProperty({__proto__:null,get:Lo,onChange:gd,set:vd},Symbol.toStringTag,{value:"Module"}));async function ba(){const t=await Lo("undecorated"),e=await Lo();return Promise.all(window.renderers.map(r=>r({accounts:e,accountsRaw:t,setAccounts:vd})))}window.global||=window;window.accounts=t3;window.near=Xg;window.render=ba;window.utils=Od;window.validators=Qg;window.render=ba;gd(ba);window.addEventListener("hashchange",ba);
